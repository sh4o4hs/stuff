import{m as e,u as t,b as i,a as n,g as s,i as a,d as o,o as r,O as l,G as c,r as h,e as g,l as u,n as d,f as p,h as m,s as f,I as b,P as w,L as y,T as v,j as x,k as T}from"./agent.1d008d04.js";let L={Android:()=>navigator.userAgent.match(/Android/i),BlackBerry:()=>navigator.userAgent.match(/BlackBerry/i),iOS:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i),Opera:()=>navigator.userAgent.match(/Opera Mini/i),Windows:()=>navigator.userAgent.match(/IEMobile/i),any:()=>L.Android()||L.BlackBerry()||L.iOS()||L.Opera()||L.Windows()},C=null;function E(e){C=e}function k(e){C&&C.fix&&(globalThis.innerHeight>=e.screenHeight-C.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}let R={name:"chrome",0:{offset:{x:0,y:0,width:0,height:0},fix:{height:68}},90:{offset:{x:0,y:0,width:0,height:0},fix:{height:28}},"-90":{offset:{x:0,y:0,width:0,height:0},fix:{height:28}},270:{offset:{x:0,y:0,width:0,height:0},fix:{height:28}},180:{offset:{x:0,y:0,width:0,height:0},fix:{height:68}}};var O=Object.freeze({__proto__:null,checkFullscreen:function(e){k(e)},setCurrentValue:function(e){E(R[e])},getCurrentValue:function(){return C},value:R});let I={name:"firefox",0:{offset:0,fix:{height:26}},90:{offset:0,fix:{height:26}},"-90":{offset:0,fix:{height:26}},270:{offset:0,fix:{height:26}},180:{offset:0,fix:{height:26}}};var U=Object.freeze({__proto__:null,checkFullscreen:function(e){k(e)},setCurrentValue:function(e){E(I[e])},getCurrentValue:function(){return C},value:I});let _={name:"opera",0:{offset:0,fix:{height:114}},90:{offset:0,fix:{height:72}},"-90":{offset:0,fix:{height:72}},270:{offset:0,fix:{height:72}},180:{offset:0,fix:{height:114}}};var $=Object.freeze({__proto__:null,checkFullscreen:function(e){k(e)},setCurrentValue:function(e){E(_[e])},getCurrentValue:function(){return C},value:_});let F={name:"uc",0:{offset:0,fix:{height:0}},90:{offset:0,fix:{height:0}},"-90":{offset:0,fix:{height:0}},270:{offset:0,fix:{height:0}},180:{offset:0,fix:{height:0}}};var A=Object.freeze({__proto__:null,checkFullscreen:function(e){k(e)},setCurrentValue:function(e){E(F[e])},getCurrentValue:function(){return C},value:F});let B={name:"baidu",0:{offset:{x:0,y:0,width:0,height:0},fix:{height:87}},90:{offset:0,fix:{height:87}},"-90":{offset:0,fix:{height:87}},270:{offset:0,fix:{height:87}},180:{offset:0,fix:{height:87}}};var P=Object.freeze({__proto__:null,checkFullscreen:function(e){k(e)},setCurrentValue:function(e){E(B[e])},getCurrentValue:function(){return C},value:B});let M={name:"lieao",0:{offset:{x:0,y:0,width:0,height:0},fix:{height:0}},90:{offset:0,fix:{height:0}},"-90":{offset:0,fix:{height:0}},270:{offset:0,fix:{height:0}},180:{offset:0,fix:{height:0}}};var N=Object.freeze({__proto__:null,checkFullscreen:function(e){k(e)},setCurrentValue:function(e){E(M[e])},getCurrentValue:function(){return C},value:M});let S={name:"unknown",0:{offset:{x:0,y:0,width:0,height:0},fix:{height:0}},90:{offset:0,fix:{height:0}},"-90":{offset:0,fix:{height:0}},270:{offset:0,fix:{height:0}},180:{offset:0,fix:{height:0}}};var V=Object.freeze({__proto__:null,checkFullscreen:function(e){k(e)},setCurrentValue:function(e){E(S[e])},getCurrentValue:function(){return C},value:S});let z={name:"chrome",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}}},j=null;var H=Object.freeze({__proto__:null,getCurrentValue:function(){return C},value:z,eventOrientation:function(e){let t=z.state;switch(j=z[e],E(j),e){case 0:case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width)}},checkFullscreen:function(e){j&&j.fix&&(globalThis.innerHeight>=e.screenHeight-j.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let D={name:"firefox",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:40}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:8}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:8}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:40}}},W=null;var G=Object.freeze({__proto__:null,getCurrentValue:function(){return C},value:D,eventOrientation:function(e){let t=D.state;switch(W=D[e],E(W),e){case 0:case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width)}globalThis.outerWidth<globalThis.innerWidth&&(globalThis.outerWidth=globalThis.innerWidth),globalThis.outerHeight<globalThis.innerHeight&&(globalThis.outerHeight=globalThis.innerHeight)},checkFullscreen:function(e){W&&W.fix&&(globalThis.innerHeight>=e.screenHeight-W.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let Y={name:"uc",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:82}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:100}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:100}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:82}}},q=null;var K=Object.freeze({__proto__:null,getCurrentValue:function(){return C},value:Y,eventOrientation:function(e){let t=Y.state;switch(q=Y[e],E(q),e){case 0:case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width)}},checkFullscreen:function(e){e.isFullscreen=!0}});let J={name:"safari",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:32}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:16}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:16}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:32}}},X=null;var Q=Object.freeze({__proto__:null,getCurrentValue:function(){return C},value:J,eventOrientation:function(e){let t=J.state;switch(X=J[e],E(X),e){case 0:case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width)}},checkFullscreen:function(e){X&&X.fix&&(globalThis.innerHeight>=e.screenHeight-X.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let Z={name:"baidu",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}}},ee=null;var te=Object.freeze({__proto__:null,getCurrentValue:function(){return C},value:Z,eventOrientation:function(e){let t=Z.state;switch(ee=Z[e],E(ee),e){case 0:case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width)}},checkFullscreen:function(e){ee&&ee.fix&&(globalThis.innerHeight>=e.screenHeight-ee.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let ie={name:"liebao",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}}},ne=null;var se=Object.freeze({__proto__:null,getCurrentValue:function(){return C},value:ie,eventOrientation:function(e){let t=ie.state;switch(ne=ie[e],E(ne),e){case 0:case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width)}},checkFullscreen:function(e){ne&&ne.fix&&(globalThis.innerHeight>=e.screenHeight-ne.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let ae={name:"unknown",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}}},oe=null;var re=Object.freeze({__proto__:null,getCurrentValue:function(){return C},value:ae,eventOrientation:function(e){let t=ae.state;switch(oe=ae[e],E(oe),e){case 0:case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width)}},checkFullscreen:function(e){oe&&oe.fix&&(globalThis.innerHeight>=e.screenHeight-oe.fix.height?e.isFullscreen=!0:e.isFullscreen=!1),e.isFullscreen=!0}});function le(e){let t=!1;return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?(t=!0,e&&(e.isFullscreen=!0)):(t=!1,e&&(e.isFullscreen=!1)),t}async function ce(e){if(!document.fullscreenEnabled)return Promise.reject();let t=!1;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(e&&(e.isFullscreen=!1),document.exitFullscreen?(await document.exitFullscreen(),t=!0):document.msExitFullscreen?(await document.msExitFullscreen(),t=!0):document.mozCancelFullScreen?(await document.mozCancelFullScreen(),t=!0):document.webkitExitFullscreen&&(await document.webkitExitFullscreen(),t=!0),t&&e&&(e.isFullscreen=!1)):(document.documentElement.requestFullscreen?(await document.documentElement.requestFullscreen(),t=!0):document.documentElement.msRequestFullscreen?(await document.documentElement.msRequestFullscreen(),t=!0):document.documentElement.mozRequestFullScreen?(await document.documentElement.mozRequestFullScreen(),t=!0):document.documentElement.webkitRequestFullscreen&&(await document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),t=!0),t&&(e&&(e.isFullscreen=!0),fe.useOrientation&&globalThis.screen&&globalThis.screen.orientation&&globalThis.screen.orientation.lock&&await globalThis.screen.orientation.lock(fe.orientation.name)))}let he=!0,ge=!1;let ue={oninit(e){let t=this,i=e.attrs;t.onclick=i.onclick,t.style=i.style,t.config=i.config},onbeforeremove(){},view(){let t=this,i=t.config;return e(".pointer",{style:{width:"4%",height:"10%",borderRadius:"4px 8px 8px 4px",backgroundColor:"#000",opacity:.6,position:"absolute",left:t.style.left,top:t.style.top,zIndex:900},onclick(){i&&(i.isMenu=!0,i.visible=!1),t.onclick&&t.onclick()}},e.trust('<img src="data/sys/4021bb29611b24c4.svg" class="w-100 h-100 dropshadow">'))}},de={oninit(e){let t=e.attrs,i=this;i.event=t.event,i.tray=t.tray,i.info=t.info,i.config=t.config,i.isLeave=!1,i.config||(i.config={isMenu:ge,visible:he,flags:{fullscreen:!0,lock:!0,sound:!0,music:!0}}),i.config.flags||(i.config.flags={}),i.info||(i.info={logo:"logo.png",gameName:"test game",version:"0.0.0",mode:" test mode",token:"token"}),i.tray||(i.tray={state:{visible:!0},sound:{isMute:!1},music:{isMute:!1},screen:{isAutoScale:!0,isLock:!1},isLock:!1,isFullscreen:!1},Object.defineProperty(i.tray,"visible",{get:()=>i.tray.state.visible,set(e){i.tray.state.visible=e}}))},onbeforeremove:e=>(["animate__fadeOutLeft","animate__animated"].forEach((t=>{e.dom.classList.add(t)})),new Promise((e=>{t.setTimeout((()=>{e()}),.4)}))),onremove(){},view(){let t=this,a=t.tray,o=t.event,r=t.info,l=t.config,c=l.flags,h=i.URLs,g=n.menu||[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];return e(".animate__fadeInLeft animate__animated",{onclick(){t.isLeave?(l.isMenu=!1,l.visible=!1,a.visible=!1):(l.visible=!1,a.visible=!0)},style:{zIndex:900,position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},e(".pv2.ph2.bg-black.[id='panel']",[e(".fl.bb.b--gray.mb2.dib.pb2.mb2.w-100.rwdPanelHeader",[e("table.pa2.ml4.dib.br2.bg-black.white.rwdAppInfo",e("tbody.rwd-lh",[e("tr",[e("td",s("gameName")),e("td"," : "),e("td.blue",r.gameName)]),e("tr",[e("td",s("version")),e("td"," : "),e("td.blue",r.version)]),g[8]?e("tr",[e("td",s("gameMode")),e("td"," : "),e("td.blue",r.mode)]):null]))]),g[0]&&c.fullscreen&&!fe.ios?e(".",[e(".fl.w-70.pa1.ma1.rwdOpt",e(".no-underline.near-white.inline-flex",[e("img.dib.fl.mv1.rwdOptIcon.dropshadow",{alt:"FULL SCREEN",src:"data/sys/f512613ddcb62054.png"}),e(".ml3.white.mv3.f4.rwdPanelFont",s("fullscreen"))])),e(".fr.w-20.pt2.mv2.mr2.rwdToggle",{onclick(){a.isFullscreen=!a.isFullscreen,e.redraw(),ce(a).then((()=>{o&&o.fullscreen&&o.fullscreen(a.isFullscreen)}))}},e("label.switch",[e("input[name='toggle'][type='checkbox'][value='fullscreen']",{disabled:!0,checked:a.isFullscreen}),e("span.slider.round")]))]):e("."),g[1]&&c.lock?e(".",[e(".fl.w-70.pa1.ma1.rwdOpt",e(".no-underline.near-white.inline-flex",[e("img.dib.fl.mv1.rwdOptIcon.dropshadow",{alt:"LOCK SCALE",src:"data/sys/8920df5ffd5c25b0.png"}),e(".ml3.white.mv3.f4.rwdPanelFont",s("lock"))])),e(".fr.w-20.pt2.mv2.mr2.rwdToggle",{onclick(){a.isLock=!a.isLock,a.update&&a.update(a),e.redraw(),o&&o.lock&&o.lock(a.isLock)}},e("label.switch",[e("input[name='toggle'][type='checkbox'][value='lock']",{disabled:!0,checked:a.isLock}),e("span.slider.round")]))]):e("."),g[2]&&c.music?e(".",[e(".fl.w-70.pa1.ma1.rwdOpt",e(".no-underline.near-white.inline-flex",[e("img.h-100.dib.fl.mv1.rwdOptIcon.dropshadow[alt='MUSIC'][src='data/sys/ddb7103e5eca70e6.png']"),e(".ml3.white.mv3.f4.rwdPanelFont",s("music"))])),e(".fr.w-20.pt2.mv2.mr2.rwdToggle",{onclick(){a.music.isMute=!a.music.isMute,e.redraw(),o&&o.music&&o.music(a.music)}},e("label.switch",[e("input[name='toggle'][type='checkbox'][value='music']",{disabled:!0,checked:!a.music.isMute}),e("span.slider.round")]))]):e("."),g[3]&&c.sound?e(".",[e(".fl.w-70.pa1.ma1.rwdOpt",e(".no-underline.near-white.inline-flex",[e("img.dib.fl.mv1.rwdOptIcon.dropshadow[alt='SOUND'][src='data/sys/ddb7103e5eca70e6.png']"),e(".ml3.white.mv3.f4.rwdPanelFont",s("sound"))])),e(".fr.w-20.pt2.mv2.mr2.rwdToggle",e("label.switch",[e("input[name='toggle'][type='checkbox'][value='sound']",{checked:!a.sound.isMute,onclick(){a.sound.isMute=!a.sound.isMute,o&&o.sound&&o.sound(a.sound)}}),e("span.slider.round")]))]):e("."),g[4]?e(".fl.w-100.pa2.pt3.bt.b--gray.mt2.rwdBtn",{onclick(){fe.useFocus=!0,h&&h.list&&globalThis.open(h.list+r.token)}},e(".w-100 no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma1 tc br1 pa1 border-box pointer",[e("img.dib h2 w2[src='data/sys/35b95e6d1d3ebf48.png']"),e(".w-100.f3.white.mv1.dib.noselect.rwdPanelFont",s("history"))])):e("."),g[5]?e(".fl.w-100.pa2",{onclick(){fe.useFocus=!0,h&&h.deposit&&globalThis.open(h.deposit+r.token)}},e(".w-100 no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma1 tc br1 pa1 border-box pointer",[e("img.dib h2 w2[src='data/sys/2357769f78f010b1.png']"),e(".w-100.f3.white.mv1.dib.noselect",s("deposit"))])):e("."),g[6]?e(".fl.w-100.pa2",{onclick(){globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload()),"gold"===n.lobbyName&&(globalThis.parent!==globalThis&&globalThis.parent.postMessage("leave","*"),document.location="postdata://leave"),fe.useFocus=!0,h&&h.official&&globalThis.open(h.official+r.token)}},e(".w-100 no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma1 tc br1 pa1 border-box pointer",[e("img.dib h2 w2[src='data/sys/94615eed5b8c0616.png']"),e(".w-100.f3.white.mv1.dib.noselect",s("back"))])):e("."),g[7]?e(".fl.w-100.pa2",{onclick(){if(fe.useFocus=!0,t.isLeave=!0,r.iframe){let e=r.iframe.contentDocument||r.iframe.contentglobalThis.document;e?(e.open(),e.write(""),e.close()):r.iframe.srcdoc="about:blank"}globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload()),"gold"===n.lobbyName?(globalThis.parent!==globalThis&&globalThis.parent.postMessage("leave","*"),document.location="postdata://leave"):h&&h.lobby&&(globalThis.document&&globalThis.document.location&&globalThis.document.location.replace?globalThis.document.location.replace(h.lobby||"about:blank"):globalThis.location.href=h.lobby||"about:blank")}},e(".w-100 no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma1 tc br1 pa1 border-box pointer",[e("img.dib h2 w2[src='data/sys/fe342b264ea95dbb.png']"),e(".w-100.f3.white.mv1.dib.noselect",s("lobby"))])):e("."),e(".")]))}};function pe(e,t){return null!=e?e:t()}function me(e){let t,i=e[0],n=1;for(;n<e.length;){const s=e[n],a=e[n+1];if(n+=2,("optionalAccess"===s||"optionalCall"===s)&&null==i)return;"access"===s||"optionalAccess"===s?(t=i,i=a(i)):"call"!==s&&"optionalCall"!==s||(i=a(((...e)=>i.call(t,...e))),t=void 0)}return i}let fe={},be={resizeTimer:null,timer:null,eventDelay:260},we=null,ye={name:null,angle:0,isTrigger:!1},ve=null;function xe(e){switch(ve&&ve.setCurrentValue&&ve.setCurrentValue(e),e){case 0:case-180:case 180:(fe.usePortrait||fe.useLandscape)&&(fe.isPortrait=!0,fe.isLandscape=!1),fe.screenHeight=screen.height,fe.screenWidth=screen.width;break;case 270:case-90:case-270:case 90:(fe.usePortrait||fe.useLandscape)&&(fe.isPortrait=!1,fe.isLandscape=!0),screen.width<screen.height?(fe.screenHeight=screen.width,fe.screenWidth=screen.height):(fe.screenHeight=screen.height,fe.screenWidth=screen.width)}globalThis.parent===window&&globalThis.scrollTo(0,fe.currentY)}function Te(){fe.isPortrait=!1,fe.isLandscape=!1;let e=0;e=window.matchMedia("(orientation: portrait)").matches?0:90,0===e&&(e=globalThis.screen.orientation&&"number"==typeof globalThis.screen.orientation.angle?globalThis.screen.orientation.angle:parseInt(globalThis.orientation)),ye.angle=e,we?we(e):ve&&ve.eventOrientation?ve.eventOrientation(e):xe(e),globalThis.parent===window&&globalThis.scrollTo(0,fe.currentY)}function Le(i){be.timer&&(t.remove(be.timer),be.timer=null),ye.isTrigger=!0,e.redraw(),be.timer=t.setTimeout((()=>{ye.isTrigger=!1,Te(),ke()}),.001*be.eventDelay)}function Ce(e){if(fe.isMobile&&!e.isChild&&ve&&ve.getCurrentValue){let t=ve.getCurrentValue();if(t){let i=t.offset;e.left=0,e.top=0,e.width=globalThis.innerWidth,e.height=globalThis.innerHeight,"number"==typeof i?e.height=globalThis.innerHeight-i:i&&("number"==typeof i.x&&(e.left=i.x),"number"==typeof i.y&&(e.top=i.y),"number"==typeof i.width&&(e.width=globalThis.innerWidth-i.width),"number"==typeof i.height&&(e.height=globalThis.innerHeight-i.height))}else e.left=0,e.top=0,e.width=globalThis.innerWidth,e.height=globalThis.innerHeight;e.left+="px",e.top+="px",e.width+="px",e.height+="px"}}function Ee(e){let t=e.game,i={x:1,y:1},n=screen.width,s=screen.height;fe.isMobile?(n=globalThis.innerWidth,s=globalThis.innerHeight,fe.useFullscreen||(n=globalThis.innerWidth,s=globalThis.innerHeight),fe.ios&&(s=globalThis.innerHeight,n=globalThis.innerWidth)):(n=globalThis.innerWidth,s=globalThis.innerHeight),t.portrait&&t.landscape&&(n>s?(t.width=t.landscape.width||512,t.height=t.landscape.height||512):(t.width=t.portrait.width||512,t.height=t.portrait.height||512)),e.fix&&(n=parseInt(e.fix.width),s=parseInt(e.fix.height));let a={x:0,y:0};e.left=0,e.top=0;let o=e.reference;o&&(a.x=o.left*n,a.y=o.top*s,n*=o.width,s*=o.height),n-t.width<0?(e.width=n,i.x=n/t.width):e.width=t.width,s-t.height<0?(e.height=s,i.y=s/t.height):e.height=t.height,i.x<i.y?e.height=t.height*i.x:i.x>i.y&&(e.width=t.width*i.y);let r=e.anchor;if(r){let t=(n-e.width)*pe(r.x,(()=>.5)),i=(s-e.height)*pe(r.y,(()=>.5));e.left=a.x+t,e.top=a.y+i}if(e.useCenter){let t=0,i=0;"boolean"==typeof e.useCenter?(i=.5*(s-e.height),i<0&&(i=0),t=.5*(n-e.width),t<0&&(t=0)):(e.useCenter.vertical&&(i=.5*(s-e.height),i<0&&(i=0)),(e.useCenter.horizontal||e.useCenter.left)&&(t=.5*(n-e.width),t<0&&(t=0))),e.left=a.x+t,e.top=a.y+i}e.absPos&&("number"==typeof e.absPos.top?e.top=e.absPos.top:"number"==typeof e.absPos.bottom&&(e.top=s+e.absPos.bottom),"number"==typeof e.absPos.left?e.left=e.absPos.left:"number"==typeof e.absPos.right&&(e.left=n+e.absPos.right)),t.eventResize&&t.eventResize({left:e.left,top:e.top,width:e.width,height:e.height}),e.eventResize&&e.eventResize({width:globalThis.innerWidth,height:globalThis.innerHeight}),e.left+="px",e.top+="px",e.width+="px",e.height+="px"}function ke(i){if(!ye.isTrigger&&!fe.disableResize){if(!i)return!!ye.isTrigger||void(be.resizeTimer||(fe.isResize=!0,e.redraw(),be.resizeTimer=t.setTimeout((()=>{t.remove(be.resizeTimer),be.resizeTimer=null,n()}),.3)));n()}function n(){fe.isMobile&&globalThis.parent===window&&globalThis.scrollTo(0,fe.currentY),t.setTimeout((()=>{ve&&ve.checkFullscreen&&fe.useFullscreen&&ve.checkFullscreen(fe);let t=globalThis.scene;if(fe.settingList.forEach((i=>{if(i){if(!i.isLock)return Ce(i),e.redraw(),!0;if(Ee(i),t){let e=t[i.id];if(e){let t=e.localEvent;if(t&&t.resize){let e={isMobile:fe.isMobile};e.width=globalThis.innerWidth,e.height=globalThis.innerHeight,e.setting=i,t.resize(e)}}}e.redraw()}})),t){Object.getOwnPropertyNames(t).forEach((e=>{let i=t[e];if(i){let e=i.localEvent;if(e&&e.resize){let t={isMobile:fe.isMobile};t.width=globalThis.innerWidth,t.height=globalThis.innerHeight,4!==i.state&&5!==i.state||e.resize(t)}}}))}fe.isResize=!1,e.redraw()}),.01)}}function Re(e){if(me([e,"optionalAccess",e=>e.index])>=0)return-1;let t=-1;for(let i=0;i<fe.settingList.length;i+=1){fe.settingList[i]||(t=i,fe.settingList[i]=e)}return t<0&&(t=fe.settingList.length,fe.settingList.push(e)),e.isLock&&Ee(e),e.index=t,t}function Oe(e){if(me([e,"optionalAccess",e=>e.index])>=0){let t=e.index;t<fe.settingList.length&&(fe.settingList[t]=null),delete e.index}}function Ie(e){fe.disableResize=e}fe.ios=!1,fe.useOrientation=!1,fe.usePortrait=!1,fe.useLandscape=!1,fe.isMobile=!1,fe.mobileReady=null,fe.useFullscreen=!1,fe.isFullscreen=!1,fe.isPortrait=!1,fe.isLandscape=!1,fe.isTouchOnce=!1,fe.isResize=!1,fe.currentY=0,fe.screenWidth=screen.width,fe.screenHeight=screen.height,fe.screenUnit="px",fe.orientation=ye,fe.isTouchDown=!1,fe.useFocus=!1,fe.disableResize=!1,fe.settingList=[];let Ue=!1;let _e=!1;function $e(){return _e}let Fe="title";function Ae(){return Fe}let Be="message";function Pe(){return Be}function Me(t){Fe=t.title,Be=t.msg,_e=!0,e.redraw()}function Ne(){_e=!1,e.redraw()}var Se=Object.freeze({__proto__:null,isVisible:$e,getTitle:Ae,getMessage:Pe,show:Me,hide:Ne});let Ve=null,ze={oninit(e){let t=e.attrs;this.style=t.style,this.complete=t.complete,this.logo=null},oncreate(t){let i=this,n=t.attrs,s=t.dom,a=n.url,o="logo",r=new globalThis.Loader;r.add(o,a,{crossOrigin:!1}),r.load(((t,n)=>{let a=n.logo.data;a.style.position="absolute",a.style.left="0%",a.style.top="0%",a.style.width="100%",a.style.height="100%",i.logo=a,s.appendChild(a),e.redraw(),i.complete&&i.complete()}))},view(){return e(".",{style:this.style})}},je={timeBase:1,oninit(e){let t=e.attrs;this.class=t.class||"ba b--light-blue animate__animated animate__bounceIn",this.style=t.style||{left:"0%",top:"0%",width:"100%",height:"100%"},this.info=t.info,this.serve=t.serve,this.config=t.config||{width:300,height:200,resolution:1,antialias:!1,transparent:!0},this.id=t.id,this.group=t.group,this.title=t.title||"標題",this.logo=t.logo,this.game=null,this.eventClass={current:"ba b--dotted bw1 white-50",onmouseenter:"ba b--dotted bw2 white-50",onmouseleave:"ba b--dotted bw1 white-50"}},onbeforeremove(e){let i=this;return i.game&&i.game.pause(),["animate__animated","animate__lightSpeedOut"].forEach((t=>{e.dom.classList.add(t)})),new Promise((e=>{t.setTimeout(e,.4)}))},view(){let t=this,i=t.eventClass;return e(".",{class:t.class,style:t.style},[e(".game-card-title",t.title),e(ze,{class:"game-card-view ba b--light-gray",style:{zValue:0,position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"},url:t.logo,complete(){}}),e(".",{onclick(){globalThis.Howl&&(Ve||(Ve=new globalThis.Howl({src:["data/f82550ea2e80cd97.wav"]}),Ve.volume(.01)),Ve.play()),di(!1),Wt({serve:t.serve,id:t.id,group:t.group})},onmouseenter(){i.current=i.onmouseenter,e.redraw()},onmouseleave(){i.current=i.onmouseleave,e.redraw()},class:i.current,style:{position:"absolute",left:"10%",top:"10%",width:"80%",height:"75%"}}),e(".game-card-download",{onclick(){Me({yesno:!0,title:"exitGame",msg:"exitGame"})}},[e.trust(`<div class="no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma2 tc br2 pa2">\n    <svg fill="#77ff77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n    <span class="f6 ml3 pr2">${s("download")}</span>\n  </div>`)]),e(".game-card-stop",{onclick(){ci()}},[e.trust(`<div class="no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma2 tc br2 pa2">\n    <svg fill="#77ff77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n    <span class="f6 ml3 pr2">${s("stop")}</span>\n  </div>`)])])}},He={left:"0px",top:"0px",width:"300px",height:"200px"},De={},We={},Ge=null;function Ye(e){return De[e]||(De[e]={}),We=De[e],We}function qe(e,i,s){let a={};function o(){let e=n.registration;e&&e.active&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage(a):t.setTimeout(o,.05)}let c=n.version||"1.0.0",h=!1,g=null;return g=new Promise((t=>{if(!e||!i)return void t(null);function g(){let g=`config/${i}/${e}/gamecard.txt?v=${c}`,u=`config/${i}/${e}/cache.txt`;if(s){let t=s;"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),g=`${t}/config/${i}/${e}/gamecard.txt?v=${c}`,u=`${t}/config/${i}/${e}/cache.txt`}else g=`config/${i}/${e}/gamecard.txt?v=${c}`,u=`config/${i}/${e}/cache.txt`;a.cacheName=`${i}${e}`,a.url=u,n.useCache&&o(),fetch(g,{headers:{"Content-Type":"text/plain"}}).then((e=>e.ok?e.text():null)).then((e=>{if(!e)return;let i={},a=new String(e),o=a.indexOf("{");if(o>=0&&o<=9){let e=JSON.parse(a);if(!e.options||!e.options.overview){let e=l;n.useOptions||(r[e.OVERVIEW_LOGO]=1,r[e.OVERVIEW_ANIMATION]=0,r[e.OVERVIEW_BACKGROUND]=0,r[e.OVERVIEW_PROGRESS]=1)}if(e.templateVersion="slot.2.1",i.gameCard=e,s){let e=s;"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),i.gameCard.baseURL=`${e}/`}h=!0,t(i)}})).catch((e=>{}))}let u,d;if(s){let t=s;"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),u=`${t}/${i}/${e}/config/gamecard.txt?v=${c}`,d=`${t}/${i}/${e}/config/cache.txt`}else u=`${n.projectURL}${i}/${e}/config/gamecard.txt?v=${c}`,d=`${n.projectURL}${i}/${e}/config/cache.txt`;a.cacheName=`${i}${e}`,a.url=d,n.useCache&&o(),fetch(u,{headers:{"Content-Type":"text/plain"}}).then((e=>e.ok?e.text():(g(),null))).then((e=>{if(!e)return;let i={},a=new String(e),o=a.indexOf("{");if(o>=0&&o<=9){if(i.gameCard=JSON.parse(a),s)if(i.gameCard.baseURL){let e=s;"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),i.gameCard.baseURL=e+i.gameCard.baseURL.replace(n.projectURL,"/")}else i.gameCard.baseURL=s;else{let e=globalThis.location.origin;i.gameCard.baseURL?i.gameCard.baseURL.indexOf("://")<0&&(i.gameCard.baseURL=e+i.gameCard.baseURL):i.gameCard.baseURL=globalThis.location.origin+"/"}h=!0,t(i)}if(h)return!0;g()})).catch((()=>{g()}))})),g}function Ke(t,i,n){let s=Date.now(),o="";a&&(o="test/data/gameList.txt?v="+s),i[t]=[],n[t]=0;let r=0;e.request(o).then((e=>{i[t]=e||[],e.forEach((e=>{if(!e)return;e.isSub&&(r+=1);let t=Ye(e.group);if(globalThis.BASE_URL)if(e.baseURL){let t=globalThis.BASE_URL;"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),e.baseURL=t+e.baseURL}else e.baseURL=globalThis.BASE_URL;else{let t=globalThis.location.origin;e.baseURL?e.baseURL=t+e.baseURL:e.baseURL=globalThis.location.origin+"/"}t[e.id]=e})),n[t]=e.length-r}))}window.addEventListener("keydown",(function(e){const t=e.key||e.code;if(a)switch(t){case"r":case"R":if(Ge){globalThis.scene[Ge.id].reload({game:Ge.appConfig,group:Ge.group,id:Ge.id,tablekey:"abcd1234"})}}})),window.addEventListener("keyup",(function(e){e.key||e.code}));let Je={oninit(){let e={},t={};a?Ke("test",e,t):(Ke("slot",e,t),Ke("video",e,t),Ke("game",e,t)),this.group=e,this.displayCount=t},view(){let t=this;return a?e(".gameCardList",{style:{left:"0%",top:"0%",width:"100%",height:"100%"}},e(".",{style:{position:"absolute",left:"0%",top:"40%",width:"100%",height:"25%"}},"group zzzz",e(".layout",{style:{left:"0%",marginTop:"0px",width:25*t.displayCount.game+"%",height:"100%"}},t.group.test?t.group.test.map((t=>{if(!t||t.isSub)return e(".");let i=t.baseURL||"";return e(".",{style:He},[e(je,{id:t.id,group:t.group,serve:{game:t.id,group:t.group},logo:i+t.images.logo,title:`${t.name[o()]}(${t.appConfig})`})])})):e(".")))):e(".gameCardList",{style:{left:"0%",top:"0%",width:"100%",height:"100%"}},e(".",{style:{position:"absolute",left:"0%",top:"65%",width:"100%",height:"25%",overflowX:"scroll"}},"group game",e(".layout",{style:{left:"0%",marginTop:"0px",width:25*t.displayCount.game+"%",height:"100%"}},t.group.game.map((t=>{if(!t||t.isSub)return e(".");let i=t.baseURL||"";return e(".",{style:{left:"0%",top:"0%",width:"90%",height:"100%"}},e(je,{id:t.id,group:"game",serve:{game:t.id,group:"game"},logo:i+t.images.logo,title:t.name[o()]}))})))),e(".",{style:{position:"absolute",left:"0%",top:"5%",width:"100%",height:"25%",overflowX:"scroll"}},"group slot",e(".layout",{style:{left:"0%",marginTop:"0px",width:25*t.displayCount.slot+"%",height:"100%"}},t.group.slot.map((t=>{if(!t&&t.isSub)return e(".");let i=t.baseURL||"";return e(".",{style:{left:"0%",top:"0%",width:"100%",height:"100%"}},[e(je,{id:t.id,group:"slot",serve:{game:t.id,group:"slot"},logo:i+t.images.logo,title:t.name[o()]})])})))),e(".",{style:{position:"absolute",left:"0%",top:"35%",width:"100%",height:"25%",overflowX:"scroll"}},"group video",e(".layout",{style:{left:"0%",marginTop:"0px",width:25*t.displayCount.video+"%",height:"100%"}},t.group.video.map((t=>{if(!t||t.isSub)return e(".");let i=t.baseURL||"";return e(".",{style:{left:"0%",top:"0%",width:"100%",height:"80%"}},[e(je,{id:t.id,group:"video",serve:{game:t.id,group:"video"},logo:i+t.images.logo,title:t.name[o()]})])})))))}};
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var Xe=Object.prototype.toString,Qe=Array.isArray||function(e){return"[object Array]"===Xe.call(e)};function Ze(e){return"function"==typeof e}function et(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tt(e,t){return null!=e&&"object"==typeof e&&t in e}var it=RegExp.prototype.test;var nt=/\S/;function st(e){return!function(e,t){return it.call(e,t)}(nt,e)}var at={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var ot=/\s*/,rt=/\s+/,lt=/\s*=/,ct=/\s*\}/,ht=/#|\^|\/|>|\{|&|=|!/;function gt(e){this.string=e,this.tail=e,this.pos=0}function ut(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function dt(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}gt.prototype.eos=function(){return""===this.tail},gt.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},gt.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},ut.prototype.push=function(e){return new ut(e,this)},ut.prototype.lookup=function(e){var t,i,n,s=this.cache;if(s.hasOwnProperty(e))t=s[e];else{for(var a,o,r,l=this,c=!1;l;){if(e.indexOf(".")>0)for(a=l.view,o=e.split("."),r=0;null!=a&&r<o.length;)r===o.length-1&&(c=tt(a,o[r])||(i=a,n=o[r],null!=i&&"object"!=typeof i&&i.hasOwnProperty&&i.hasOwnProperty(n))),a=a[o[r++]];else a=l.view[e],c=tt(l.view,e);if(c){t=a;break}l=l.parent}s[e]=t}return Ze(t)&&(t=t.call(this.view)),t},dt.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},dt.prototype.parse=function(e,t){var i=this.templateCache,n=e+":"+(t||pt.tags).join(":"),s=void 0!==i,a=s?i.get(n):void 0;return null==a&&(a=function(e,t){if(!e)return[];var i,n,s,a=!1,o=[],r=[],l=[],c=!1,h=!1,g="",u=0;function d(){if(c&&!h)for(;l.length;)delete r[l.pop()];else l=[];c=!1,h=!1}function p(e){if("string"==typeof e&&(e=e.split(rt,2)),!Qe(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(et(e[0])+"\\s*"),n=new RegExp("\\s*"+et(e[1])),s=new RegExp("\\s*"+et("}"+e[1]))}p(t||pt.tags);for(var m,f,b,w,y,v,x=new gt(e);!x.eos();){if(m=x.pos,b=x.scanUntil(i))for(var T=0,L=b.length;T<L;++T)st(w=b.charAt(T))?(l.push(r.length),g+=w):(h=!0,a=!0,g+=" "),r.push(["text",w,m,m+1]),m+=1,"\n"===w&&(d(),g="",u=0,a=!1);if(!x.scan(i))break;if(c=!0,f=x.scan(ht)||"name",x.scan(ot),"="===f?(b=x.scanUntil(lt),x.scan(lt),x.scanUntil(n)):"{"===f?(b=x.scanUntil(s),x.scan(ct),x.scanUntil(n),f="&"):b=x.scanUntil(n),!x.scan(n))throw new Error("Unclosed tag at "+x.pos);if(y=">"==f?[f,b,m,x.pos,g,u,a]:[f,b,m,x.pos],u++,r.push(y),"#"===f||"^"===f)o.push(y);else if("/"===f){if(!(v=o.pop()))throw new Error('Unopened section "'+b+'" at '+m);if(v[1]!==b)throw new Error('Unclosed section "'+v[1]+'" at '+m)}else"name"===f||"{"===f||"&"===f?h=!0:"="===f&&p(b)}if(d(),v=o.pop())throw new Error('Unclosed section "'+v[1]+'" at '+x.pos);return function(e){for(var t,i=[],n=i,s=[],a=0,o=e.length;a<o;++a)switch((t=e[a])[0]){case"#":case"^":n.push(t),s.push(t),n=t[4]=[];break;case"/":s.pop()[5]=t[2],n=s.length>0?s[s.length-1][4]:i;break;default:n.push(t)}return i}(function(e){for(var t,i,n=[],s=0,a=e.length;s<a;++s)(t=e[s])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}(r))}(e,t),s&&i.set(n,a)),a},dt.prototype.render=function(e,t,i,n){var s=this.getConfigTags(n),a=this.parse(e,s),o=t instanceof ut?t:new ut(t,void 0);return this.renderTokens(a,o,i,e,n)},dt.prototype.renderTokens=function(e,t,i,n,s){for(var a,o,r,l="",c=0,h=e.length;c<h;++c)r=void 0,"#"===(o=(a=e[c])[0])?r=this.renderSection(a,t,i,n,s):"^"===o?r=this.renderInverted(a,t,i,n,s):">"===o?r=this.renderPartial(a,t,i,s):"&"===o?r=this.unescapedValue(a,t):"name"===o?r=this.escapedValue(a,t,s):"text"===o&&(r=this.rawValue(a)),void 0!==r&&(l+=r);return l},dt.prototype.renderSection=function(e,t,i,n,s){var a=this,o="",r=t.lookup(e[1]);if(r){if(Qe(r))for(var l=0,c=r.length;l<c;++l)o+=this.renderTokens(e[4],t.push(r[l]),i,n,s);else if("object"==typeof r||"string"==typeof r||"number"==typeof r)o+=this.renderTokens(e[4],t.push(r),i,n,s);else if(Ze(r)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");null!=(r=r.call(t.view,n.slice(e[3],e[5]),(function(e){return a.render(e,t,i,s)})))&&(o+=r)}else o+=this.renderTokens(e[4],t,i,n,s);return o}},dt.prototype.renderInverted=function(e,t,i,n,s){var a=t.lookup(e[1]);if(!a||Qe(a)&&0===a.length)return this.renderTokens(e[4],t,i,n,s)},dt.prototype.indentPartial=function(e,t,i){for(var n=t.replace(/[^ \t]/g,""),s=e.split("\n"),a=0;a<s.length;a++)s[a].length&&(a>0||!i)&&(s[a]=n+s[a]);return s.join("\n")},dt.prototype.renderPartial=function(e,t,i,n){if(i){var s=this.getConfigTags(n),a=Ze(i)?i(e[1]):i[e[1]];if(null!=a){var o=e[6],r=e[5],l=e[4],c=a;0==r&&l&&(c=this.indentPartial(a,l,o));var h=this.parse(c,s);return this.renderTokens(h,t,i,c,n)}}},dt.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},dt.prototype.escapedValue=function(e,t,i){var n=this.getConfigEscape(i)||pt.escape,s=t.lookup(e[1]);if(null!=s)return"number"==typeof s&&n===pt.escape?String(s):n(s)},dt.prototype.rawValue=function(e){return e[1]},dt.prototype.getConfigTags=function(e){return Qe(e)?e:e&&"object"==typeof e?e.tags:void 0},dt.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!Qe(e)?e.escape:void 0};var pt={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){mt.templateCache=e},get templateCache(){return mt.templateCache}},mt=new dt;pt.clearCache=function(){return mt.clearCache()},pt.parse=function(e,t){return mt.parse(e,t)},pt.render=function(e,t,i,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((Qe(s=e)?"array":typeof s)+'" was given as the first argument for mustache#render(template, view, partials)'));var s;return mt.render(e,t,i,n)},pt.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return at[e]}))},pt.Scanner=gt,pt.Context=ut,pt.Writer=dt;let ft={oninit(e){let t=e.attrs;this.url=t.url,this.manager=t.manager,this.setting={id:"children",isLock:!1,useCenter:!1,left:"0%",top:"0%",width:"100%",height:"100%",game:{width:1024,height:1024},reference:{left:0,top:0,width:1,height:1}},Re(this.setting)},oncreate(e){let i=e.instance.children[0].dom;t.setTimeout((()=>{Ie(!0),i.focus()}),.2)},view(){let t=this,i=t.setting;return e(".rwdPanelHeader",{style:{position:"absolute",left:i.left,top:i.top,backgroundColor:"rgba(0,0,0,1)",zIndex:950,opacity:1,width:i.width,height:i.height}},e("iframe",{src:t.url,scrolling:"yes",frameborder:0,style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}}),e(".fl.tc.pv4.bg-black.hover-bg-gray",{style:{position:"absolute",left:"5%",top:"0%",width:"90%",height:"10%",opacity:.75,cursor:"pointer"},onclick(){Ie(!1),t.manager.childrenVisible=!1,t.url=""}},e(".inline-flex.white.border-box.pointer",`${s("close")}`)))}};function bt(e){let t,i=e[0],n=1;for(;n<e.length;){const s=e[n],a=e[n+1];if(n+=2,("optionalAccess"===s||"optionalCall"===s)&&null==i)return;"access"===s||"optionalAccess"===s?(t=i,i=a(i)):"call"!==s&&"optionalCall"!==s||(i=a(((...e)=>i.call(t,...e))),t=void 0)}return i}const wt=0,yt=6,vt=1,xt=3,Tt=4,Lt=5;let Ct={oninit(){this.options={}},oncreate(i){let r=this;r.isIframeLoaded=!1,r.isIframeInit=!1;let l,m=Math.round(performance.now());r.timestamp=m,r.checkItem=null;let f={isFirstTime:!0,useVideo:!1,isCheckData:!1,isChild:!1,isGame:!0,isCreate:!1,isBusy:!0,rendered:null,disable:!0,sysTray:null,trayVisible:!1,childrenVisible:!1,currentUrl:"",useCenter:!0,position:"absolute",left:"25%",top:"25%",width:"50%",height:"50%"},b={state:{visible:!0},sound:{isMute:!1},music:{isMute:!1},screen:{isAutoScale:!0,isLock:!1},isLock:!1,isFullscreen:!1};Object.prototype.hasOwnProperty.call(b,"visible")||Object.defineProperty(b,"visible",{get:()=>b.state.visible,set(t){f.mode!==c.DEMO&&(b.state.visible=t,f.sysTray&&(t?(f.sysTray.isMenu=!1,f.sysTray.visible=!0):(f.sysTray.isMenu=!1,f.sysTray.visible=!1),e.redraw()))}});let w=r.options,y=i.attrs;if(r.currentBaseURL=null,y&&(r.checkItem=y.checkItem,r.currentBaseURL=y.currentBaseURL,f.left=y.left||"25%",f.top=y.top||"25%",f.width=y.width||"50%",f.height=y.height||"50%",f.reference=y.reference,f.fix=y.fix,f.isChild=y.isChild,f.isCheckData=y.isCheckData,y.sysTray?f.sysTray={visible:!0,isMenu:!1,flags:y.sysTray.flags,style:{left:y.sysTray.left||"0px",top:y.sysTray.top||"0px"}}:f.sysTray=null,l=y.config,r.ctrlEvent=y.ctrlEvent),b.visible=!1,!l)return;let v=o();f.isCreate=l.isCreate,f.templateVersion=l.scene.templateVersion,"slot.2.1"===f.templateVersion&&"en-us"===o()&&(v="en"),f.id=l.id,f.mode=l.mode,f.name=l.scene.name[v],f.group=l.scene.group||"game",f.appName=l.scene.app,f.appHash=l.scene.appHash,f.appConfig=l.scene.appConfig,f.devMode=l.scene.devMode,f.dependence=l.scene.dependence,f.background=null,f.backgroundCSS=null,r.appTimeout=a?null:t.setTimeout((()=>{w.initGame=null,r.appTimeout=null,e.redraw(),t.setTimeout((()=>{n.requestReload=!1,n.isReload=!0,li({url:r.currentBaseURL,group:f.group,game:f.appConfig})}),.1)}),10);let x=`${f.group}${f.appConfig}`,T={category:"遊戲程式 "+(r.currentBaseURL||"主網址"),getLabel:()=>x},L={category:"遊戲場景 "+(r.currentBaseURL||"主網址"),getLabel:()=>x},C={category:"建立遊戲 "+(r.currentBaseURL||"主網址"),getLabel:()=>x};n.isCheckGameCDN||(h.loadBegin(C),h.loadBegin(T)),f.anim={element:null,isPlay:!1},f.display="inline",f.opacity=0,f.zIndex=1,y.updateStyle&&y.updateStyle(f);let E=l.scene.images;f.game={id:l.id,group:l.scene.group,mode:l.mode,decimal:l.decimal,name:f.name,logo:E&&E.logo,theOther:l.scene.theOther,version:l.scene.version,baseURL:l.scene.baseURL||"",langID:v},E&&Object.prototype.hasOwnProperty.call(E,"useBackground")&&E.background&&(f.isCheckData||(f.background=`${f.game.baseURL}${E.background}`),"string"==typeof E.useBackground?f.backgroundCSS=`${E.useBackground}`:(E.useBackground,f.backgroundCSS=null)),l.scene.theOther&&l.scene.theOther.id&&(f.game.theOther=l.scene.theOther.id),l.scene.screen&&(f.isLock=l.scene.screen.isLock,f.game.width=l.scene.screen.width||640,f.game.height=l.scene.screen.height||960,f.game.portrait=l.scene.screen.portrait,f.game.landscape=l.scene.screen.landscape,fe.isMobile,b.isLock=f.isLock),f.images=E,f.isCheckData||Re(f);let k=null,R=l.loadingEvent,O=vi(),I=null,U=O.scene[f.id]={templateVersion:f.templateVersion,state:wt,event:{create:null,play:null,pause:null,enter:null,leave:null,focus:null,blur:null,lock:null,fullscreen:null,resize:null,music:null,sound:null},info:{isChild:f.isChild,baseURL:f.game.baseURL||"",id:f.game.id,name:f.game.name,group:f.game.group,theOther:f.game.theOther,width:f.game.width,height:f.game.height,decimal:f.game.decimal,mode:f.game.mode,langID:f.game.langID},gamecard:l.scene,loadingEvent:{title:f.name,start(){n.isCheckGameCDN||h.loadBegin(L),R.start&&R.start()},resBegin(e){R.resBegin&&R.resBegin(e)},resEnd(e){R.resEnd&&R.resEnd(e)},sceneResBegin(e){R.sceneResBegin&&R.sceneResBegin(e)},sceneResLoading(e){R.sceneResLoading&&R.sceneResLoading(e)},sceneResEnd(e){R.sceneResEnd&&R.sceneResEnd(e)},finish(){U.state=Tt,n.isCheckGameCDN||(h.loadEnd(L),h.log({label:x,category:"遊戲場景 "+(r.currentBaseURL||"主網址")}),h.loadEnd(C)),R.finish&&R.finish(U)}},callWeb(e){"string"==typeof e?O.document&&O.document.location&&O.document.location.replace?O.document.location.replace(e||"about:blank"):O.location.href=e||"about:blank":ci(e)},open(t){f.childrenVisible=!0,f.currentUrl=t,e.redraw()},setDisableResize(e){Ie(e)},createTheOther(i,s=0){!function(i,s=0){let a=i,o=s;"number"==typeof i&&(a=s,o=i);let r=a.groupName||Vt,l=a.sceneID,c=globalThis.BASE_URL;qe(l,r,c).then((i=>{let s=Pt[o],r=i.gameCard;if(!r)return;function l(e){n.isReload||a.finish&&a.finish(e)}a.reloadConfig&&(r.reloadConfig=a.reloadConfig),s||(s={style:Bt,reference:{left:0,top:0,width:1,height:1}});let c={com:jt,attrs:{loadingEvent:a.loadingEvent,index:o,style:a.style||s.style,reference:a.reference||s.reference,absPos:a.absPos||s.absPos,id:a.id,scene:r,isChild:!0,finish:l}};n.isReload||(null!==zt[o]?(zt[o]=null,e.redraw(),t.setTimeout((()=>{zt[o]=c,e.redraw()}),.1)):(zt[o]=c,e.redraw()))}))}(i,s)},destroyTheOther(t){zt[t]=null,e.redraw(),O.scene[t]=null},callTheOther(e,t){let i,n=!1,s=O.scene[e];return s&&s.state===Tt&&(U.game.debug=!1,U.state=Tt,U.info.isChild?(U.localEvent.pause(),U.localEvent.hide()):U.localEvent.pause(),i=t||{what:" is this ?"},i.from=U.info.id,n=!0,s.localEvent.pause(),s.state=Lt,s.templateVersion,s.setting.background=t&&t.background||"rgba(0,0,0,0)",s.localEvent.show(),s.localEvent.play(i)),n},checkTheOther(e){let t=!1,i=O.scene[e];return i&&i.state===Tt&&(t=!0),t},getTheOther:e=>O.scene[e],reload(i){if(n.isReload)return;hi(),n.isReload=!0;let s=i;s||(s={game:f.appConfig,group:f.group}),U.game.stop(),U.game.reset();let a=()=>{w.initGame=null,U.game=null,r.ctrlEvent&&r.ctrlEvent.reload&&r.ctrlEvent.reload(),e.redraw(),t.setTimeout((()=>{(async function(){return new Promise((e=>{Object.getOwnPropertyNames(globalThis.scene).forEach((e=>{let t=globalThis.scene[e];t&&(delete t.event,delete t.loadingEvent),delete globalThis.scene[e]})),globalThis.scene={},pi({oncreate(){e()},view:()=>null})}))})().then((()=>{qe(s.game,s.group,r.currentBaseURL).then((e=>{e&&e.gameCard&&(e.gameCard.reloadConfig=i,Wt({gameCard:e.gameCard,id:s.game,group:s.group}))}))}))}),.01)};Gt(),t.setTimeout((()=>{for(let e=0;e<globalThis.frames.length;e+=1){let t=globalThis.frames[e];if(t){let e=t.document;e&&(e.documentElement.innerHTML="")}}a()}),.05)},leave(e){},setMode(t){let i=c;g.mode=t,g.mode===i.REAL?w.info.mode=s("gameModeReal"):w.info.mode=s("gameModeDemo"),e.redraw()},async fullscreen(e){if(e||!le())try{return await ce(b)}catch(e){}},ready(i){if(!U.game&&i&&(U.game=i),r.appTimeout&&(t.remove(r.appTimeout),r.appTimeout=null),n.isCheckGameCDN||(h.loadEnd(T),h.log({label:x,category:"遊戲程式 "+(r.currentBaseURL||"主網址")})),r.checkItem){let t=r.checkItem,i=Math.round(performance.now());t.timeInit=i-r.timestamp,r.timestamp=i,t.state="app",t.timeReady=i-t.timestamp,t.timestamp=i,e.redraw(),t.ready&&t.ready(t)}I(U.game).then((()=>{if(U.game){let e={error(e){h.error({label:x,category:e})},log(e){"string"==typeof e?h.log({label:x,category:e}):e&&(e.label=x,h.log(e))},serviceBegin(e){if(e){if(e.getLabel=()=>x,!e.category)return;h.serviceBegin(e)}},serviceEnd(e){if(e){if(e.getLabel=()=>x,!e.category)return;h.serviceEnd(e)}},loadBegin(e){if(e){if(e.getLabel=()=>x,!e.category)return;h.loadBegin(e)}},loadEnd(e){if(e){if(e.getLabel=()=>x,!e.category)return;h.loadEnd(e)}}};U.game.report=e,U.game.localforage=u}f.isBusy=!1,f.isCreate&&U.event&&U.event.create?(a&&(U.info.console=console),U.info.setting=n,U.event.create(U.info),U.state=vt):U.state=xt}))},graphReady(){U.ready()},setOverviewVisible(t){U.gamecard.manual&&U.gamecard.manual.overview&&(Nt.overview.visible=t,e.redraw())},setEvent(e){let t=U.event;t.create=e.create||t.create,t.play=e.play||t.play,t.pause=e.pause||t.pause,t.enter=e.enter||t.enter,t.leave=e.leave||t.leave,t.focus=e.focus||t.focus,t.blur=e.blur||t.blur,t.lock=e.lock||t.lock,t.fullscreen=e.fullscreen||t.fullscreen,t.resize=e.resize||t.resize,t.music=e.music||t.music,t.sound=e.sound||t.sound}};U.state=yt,I=async e=>{let t=globalThis.location.origin||"";r.currentBaseURL&&(t=r.currentBaseURL);let i=t;i&&i.length>0&&"/"===i[i.length-1]&&(i=i.substring(0,i.length-1));let s=f.appName;if("object"==typeof s&&(s=f.appName[f.game.langID]),i="debug"===f.devMode?`${i}${s}`:`${i}${n.projectURL}${s}`,r.currentBaseURL&&(i=i.replace(n.projectURL,"/")),"game.5.0"===f.templateVersion){let t=await import(i),s=await t.scene.init({setting:n,baseURL:U.info.baseURL,isChild:U.info.isChild,langID:U.info.langID,gamecard:U.gamecard,game:e,nuts:d});Object.defineProperty(e,"scene",{get:()=>U});let a={create(t){O.lobby&&(e.currentUser=O.lobby.currentUser,e.command=O.lobby.net.gameCommand,e.lobby={setEvent:O.lobby.setEvent,setCommand:O.lobby.net.setLobbyCommand,CMD:O.lobby.net.CMD}),s.create&&(t.game=e,t.setting=n,s.create(t))},play(t){e.play(),s.play&&(t.game=e,t.setting=n,s.play(t))},pause(t){e.pause(),s.pause&&(t.game=e,t.setting=n,s.pause(t))},enter(t){s.enter&&(t.game=e,t.setting=n,s.enter(t))},leave(t){s.leave&&(t.game=e,t.setting=n,s.leave(t))},focus(){s.focus&&s.focus()},blur(){s.blur&&s.blur()},lock(e){s.lock&&s.lock(e)},fullscreen(e){s.fullscreen&&s.fullscreen(e)},resize(e){s.resize&&s.resize(e)},music(e){s.music&&s.music(e)},sound(e){s.sound&&s.sound(e)}};U.setEvent(a),U.game=e}};let _={isActive:!0,create(e){e.isCreate&&bt([U,"access",e=>e.event,"optionalAccess",e=>e.create])&&(a&&(U.info.console=console),U.info.setting=n,U.event.create(U.info),U.state=vt)},async enter(e){let t=e||{};t.from||(t.from=U.info.id),t.id||(t.id=f.game.id),t.game||(t.game=U.game),n.isInGame=!0,fe.isMobile&&(f.isChild||globalThis.scrollTo(0,fe.currentY)),f.isFirstTime&&(f.isFirstTime=!1,h.send()),U.game&&(O.lobby&&(U.game.command=O.lobby.net.gameCommand,U.game.table=O.lobby.table[t.id],U.game.currentUser=O.lobby.currentUser),U.game.sysTray=b,U.game.getLCS=async function(){f.useVideo=!0;let{LCS:e}=await import("./agent.8a3f3769.js");return e&&e.setReport&&(e.labelName=x,e.setReport(h)),e},U.game.scanLCS=async function(e){let t={name:"串流服務",category:"檢測串流",getLabel:()=>x},i=await import("./agent.2a4c42e3.js"),n=await i.scan(e,t);return h.sendVideo(),n},U.game.getProject=async function(e,t){const i=await import("./agent.8aa408b9.js");return await i.getProject(e,t)},U.game.getIP=h.getIP),_.show({finish(){bt([U,"access",e=>e.event,"optionalAccess",e=>e.enter])&&(t.setting=n,U.event.enter(t)),_.blur&&_.blur(),ke(!0);let e=null,i=O.scene[U.info.theOther];if(U.info.isChild||i||!U.info.theOther||(U.info.theOther,U.info.theOther.length>0?e={id:U.info.theOther,group:U.info.group}:"object"==typeof U.info.theOther&&(e={id:U.info.theOther.id,group:U.info.theOther.group})),null!==e){let t={style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"},reference:{left:0,top:0,width:1,height:1},groupName:e.group,id:e.id,sceneID:e.id,loadingEvent:{start(){},resBegin(){},resEnd(){},sceneResBegin(){},sceneResLoading(){},sceneResEnd(){},finish(e){e.localEvent.pause(),e.localEvent.hide()}}};U.createTheOther(t)}}})},leave(e){let t=e||{};t.from||(t.from=U.info.id),t.game||(t.game=U.game),bt([U,"access",e=>e.event,"optionalAccess",e=>e.leave])&&(t.setting=n,U.event.leave(t))},play(e){let t=e||{};t.from||(t.from=U.info.id),t.game||(t.game=U.game),bt([U,"access",e=>e.event,"optionalAccess",e=>e.play])&&(t.setting=n,U.event.play(t)),U.state=Lt,ke(!0)},pause(e){let t=e||{};t.from||(t.from=U.info.id),t.game||(t.game=U.game),bt([U,"access",e=>e.event,"optionalAccess",e=>e.pause])&&(t.setting=n,U.event.pause(t)),U.state=Tt},focus(){_.isActive||(_.isActive=!0,bt([U,"access",e=>e.event,"optionalAccess",e=>e.focus])&&U.event.focus())},blur(){_.isActive&&(_.isActive=!1,bt([U,"access",e=>e.event,"optionalAccess",e=>e.blur])&&U.event.blur())},updateBlur(e){e&&e!==_&&_.blur();let t=y.objList;t&&Array.isArray(t)&&t.forEach((t=>{if(t){let i=t.attrs.localEvent;e!==i&&i&&i.blur&&i.blur()}}))},lock(e){f.isLock=e,f.left=y.left||"25%",f.top=y.top||"25%",f.width=y.width||"50%",f.height=y.height||"50%";let t=O.scene[U.info.theOther];t&&t.localEvent.lock(e),ke(!0),bt([U,"access",e=>e.event,"optionalAccess",e=>e.lock])&&U.event.lock(e)},fullscreen(e){bt([U,"access",e=>e.event,"optionalAccess",e=>e.fullscreen])&&U.event.fullscreen(e)},resize(e){bt([U,"access",e=>e.event,"optionalAccess",e=>e.resize])&&U.event.resize(e)},music(e){bt([U,"access",e=>e.event,"optionalAccess",e=>e.music])&&U.event.music(e);let t=O.scene[U.info.theOther];t&&t.localEvent.music(e)},sound(e){bt([U,"access",e=>e.event,"optionalAccess",e=>e.sound])&&U.event.sound(e);let t=O.scene[U.info.theOther];t&&t.localEvent.sound(e)},show(t){let i=f.anim;if(i.element){if(i.isPlay&&(i.isPlay=!1),f.display="inline",f.disable=!1,f.zIndex=4,f.opacity=1,t){if(t.style){let e=t.style;f.zIndex=e.zIndex||4}t.finish&&t.finish()}y.updateStyle&&y.updateStyle(f),e.redraw()}},hide(t){let i=f.anim;if(i.element){if(i.isPlay&&(i.isPlay=!1),f.disable=!0,f.display="none",f.zIndex=2,f.opacity=0,t){if(t.style){let e=t.style;f.zIndex=e.zIndex||2}t.finish&&t.finish()}y.updateStyle&&y.updateStyle(f),e.redraw()}}};U.localEvent=_,U.setting=f,w.onfocus=onfocus,w.initGame=async function(e){f.anim.element=e.dom},w.event=_,w.setting=f,w.tray=b,w.objList=y.objList,w.updateStyle=y.updateStyle;let $=e(".");var F;"game.5.0"===f.templateVersion?U.gamecard.pixiConfig&&($=[e(p.game.pixi,{id:f.id,style:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"},config:U.gamecard.pixiConfig,ready:U.ready})]):$=[e("iframe",{style:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"},scrolling:"no",frameborder:0,oncreate:function(i){k=i.dom,k.scrolling="no",k.frameborder=0;let s=k.style;if(s.width="100%",s.height="100%",s.left="0%",s.top="0%",s.position="absolute",f.isChild||(s.zIndex=2,s.display="inline"),r.isIframeInit)return;r.isIframeInit=!0,w.info.iframe=k;let a=f.id,o=f.name,l=f.group,c=f.appName,h=f.appConfig||a,g=f.devMode,u=f.background,d=f.dependence,p=null;if("object"==typeof c&&(c=f.appName[f.game.langID]),"game.4.0"===f.templateVersion){let e=globalThis.location.origin||"";if(r.currentBaseURL&&(e=r.currentBaseURL),p={appName(){let t=e;return t&&t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t="debug"===g?`${t}${c}`:`${t}${n.projectURL}${c}`,r.currentBaseURL&&(t=t.replace(n.projectURL,"/")),t},appIntegrity:"",id:a,name:o,group:l,jsName(){let t,i=e;return i&&i.length>0&&"/"===i[i.length-1]&&(i=i.substring(0,i.length-1)),r.currentBaseURL&&(this.pathname=this.pathname.replace(n.projectURL,"/")),t=`<script src="${i}${this.pathname}"  crossorigin><\/script>`,t},globalName(){let e=`globalThis.parent.${this.libName} && `;return e+=`(globalThis.${this.libName} = globalThis.parent.${this.libName})`,e},background:u},d){let e=[],t=d;Object.getOwnPropertyNames(t).forEach((i=>{let n=t[i],s={};"string"==typeof n?(s.key=i,s.pathname=n):(s.key=i,s.pathname=n.pathname,s.integrity=n.integrity),e.push(s)})),e.length>0&&(e[e.length-1].isLast=!0),p.importmap=e}f.rendered=pt.render(fi(f.templateVersion),p)}else if("game.3.0"===f.templateVersion){let e=globalThis.location.origin||"";r.currentBaseURL&&(e=r.currentBaseURL);let t=e;if(t&&t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),p={appName(){let e=t;return e="debug"===g?`${e}/${c}`:`${e}/${n.projectURL}${c}`,e},appIntegrity:"",id:a,name:o,group:l,jsName(){let e,i=`${t}${this.pathname}`,n="";return this.integrity&&(n=`integrity="${this.integrity}"`),this.isLast,e=`<script src="${i}" ${n} crossorigin><\/script>`,e},background:u},d){let e=[],t=d;Object.getOwnPropertyNames(t).forEach((i=>{let n=t[i],s={};"string"==typeof n?(s.key=i,s.pathname=n):(s.key=i,s.pathname=n.pathname,s.integrity=n.integrity),e.push(s)})),e.length>0&&(e[e.length-1].isLast=!0),p.importmap=e}f.rendered=pt.render(fi(f.templateVersion),p)}else if("game.2.0"===f.templateVersion){let e=globalThis.location.origin||"";r.currentBaseURL&&(e=r.currentBaseURL);let t=e;t&&t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),p={appName:c,id:a,name:o,group:l,importmapName(){let e=t;r.currentBaseURL&&(this.pathname=this.pathname.replace(n.projectURL,"/"));let i,s=`${e}${this.pathname}`;return i=`"${this.key}": "${s}"`,this.isLast||(i+=","),i},systemjsURL(){let e=`${t}/`;return e=r.currentBaseURL?`${e}systemjs/6.10.3/system.min.js`:"/systemjs/6.10.3/system.min.js",e},background:u};let i=[];if(p.importmap=i,d){let e=d;Object.getOwnPropertyNames(e).forEach((t=>{let s=e[t],a={};"string"==typeof s?(a.key=t,a.pathname=s):(a.key=t,r.currentBaseURL?a.pathname=s.pathname.replace(n.projectURL,"/"):a.pathname=s.pathname,a.integrity=s.integrity),i.push(a)}))}if(p.appName=`${l}-${a}`,"debug"===g){i.push({key:`${l}-${a}`,pathname:`${c}`});let t=e;t&&t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),p.appName=`${t}${c}`}else{let t=e;r.currentBaseURL?(i.push({key:`${l}-${a}`,pathname:`/${c}`}),p.appName=`${t}${c}`):(i.push({key:`${l}-${a}`,pathname:`${n.projectURL}${c}`}),p.appName=`${t}${n.projectURL}${c}`)}i.length>0&&(i[i.length-1].isLast=!0),f.rendered=pt.render(fi(f.templateVersion),p)}else if("slot.2.1"===f.templateVersion){let i="";r.currentBaseURL&&(i=r.currentBaseURL);let s=i;s&&s.length>0&&"/"===s[s.length-1]&&(s=s.substring(0,s.length-1));let g="";p={appName(){let e=s;return e=""===s?`${c}`:r.currentBaseURL?`${e}/${c}`:`${e}${n.projectURL}${c}`,e},systemjsURL(){let e=`${s}/`;return e=`${e}systemjs/system.js`,e},appConfig:()=>g,id:a,name:o,group:l,background:u},U.info.langID=v;let d=n.projectURL;r.currentBaseURL&&(d="/");let m=`${s}${d}config/${l}/${h}/browser.config.js`;""===s&&(m=`config/${l}/${h}/browser.config.js`),fetch(m,{headers:{"Content-Type":"text/plain"}}).then((e=>e.ok?e.text():null)).then((i=>{if(!i)return null;if(g=new String(i),""!==s){let e=`${s}/dependence/`;r.currentBaseURL&&(e=`${r.currentBaseURL}dependence/`),g=g.replace("dependence/",e)}f.rendered=pt.render(fi(f.templateVersion),p),k.src="data/template/4b3df1064ed5591c.html",k.addEventListener("load",(()=>{if(!r.isIframeLoaded&&(r.isIframeLoaded=!0,t.setTimeout((()=>{let e=k.contentDocument||k.contentWindow.document;e.open(),e.write(f.rendered||"!!!! unknown template !!!!"),e.close()}),.05),r.checkItem)){let t=r.checkItem,i=Math.round(performance.now());t.timeOnload=i-r.timestamp,r.timestamp=i,t.state="web",e.redraw()}}),{capture:!0,once:!0})}))}if("slot.2.1"!==f.templateVersion){k.src="data/template/4b3df1064ed5591c.html";const i=()=>{if(!r.isIframeLoaded&&(r.isIframeLoaded=!0,t.setTimeout((()=>{let e=k.contentDocument||k.contentWindow.document;e.open(),e.write(f.rendered||"!!!! unknown template !!!!"),e.close()}),.05),r.checkItem)){let t=r.checkItem,i=Math.round(performance.now());t.timeOnload=i-r.timestamp,r.timestamp=i,t.state="web",e.redraw()}};k.addEventListener("load",i,{capture:!0,once:!0})}}})],w.gamePage=$,w.info={iframe:{},token:g.info.token,gameName:f.game.name,logo:f.game.baseURL+f.game.logo,version:f.game.version||"0.9.9",open(t){f.childrenVisible=!0,f.currentUrl=t,e.redraw()}},F=U.gamecard,Ge=F;let A=c;g.mode===A.REAL?w.info.mode=s("gameModeReal"):w.info.mode=s("gameModeDemo"),e.redraw()},view(){let t,i=this.options,s=i.setting,a=i.objList||[];if(i.info&&i.info.iframe&&fe.isMobile){i.info.iframe.style||(i.info.iframe.style={});let e=i.info.iframe.style;e.width=s.width,e.height=s.height}if(i.initGame&&(t=!s.isChild&&fe.isMobile?(fe.useFullscreen,{position:"absolute",left:"0px",top:fe.currentY+"px",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"}):{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"},s.isCheckData&&(t={left:"0%",top:"0%",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"})),i.initGame){let o="";return s.images.useBackground&&(o=s.background),e(".",{style:t},s.isChild?null:e(".center",{style:{overflowY:"hidden",position:"absolute",zIndex:1,top:"0%",left:"0%",width:`${globalThis.innerWidth}px`,height:`${globalThis.innerHeight}px`}},e(".aspect-ratio--object cover",{style:{background:`url(${o}) center`}})),e(".",{oncreate:i.initGame,style:{position:s.position,boxShadow:s.backgroundCSS,left:s.left,top:s.top,width:s.width,height:s.height,zIndex:s.zIndex||2,opacity:s.opacity,display:s.display}},i.gamePage,a.map((t=>t?(t.attrs.fix=s,t.attrs.updateBlur=i.event.updateBlur,e(t.com,t.attrs)):null)),s.sysTray&&s.sysTray.visible?e(ue,{style:s.sysTray.style,config:s.sysTray}):null,s.sysTray&&s.sysTray.isMenu?e(de,{tray:i.tray,event:i.event,info:i.info,config:s.sysTray}):null),s.childrenVisible?e(ft,{url:s.currentUrl,manager:s}):null,n.msg.length>0?e(".",{style:{position:"absolute",color:"#fff",left:"50%",top:"0%",width:"64px",height:"16px",zIndex:900}},n.msg):null)}return e(".")}},Et={oninit(e){let t=e.attrs;this.options=t.options,this.saveConfig={}},oncreate(){},view(){let t=this.options,i=t.scene.pixiConfig,n=this.saveConfig;return e("article.pa4.white",e("form",[e("fieldset.ba.b--transparent.ph0.mh0",[e("legend.ph0.mh0.fw6.white","遊戲場景設定"),e(".mt3",e("label.db.fw4.lh-copy.f6","寬"),e("input.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"width",name:"width",oninput(e){let t=e.target.value;n.width=parseInt(t),i.width=t},value:i&&i.width})),e(".mt3",e("label.db.fw4.lh-copy.f6","高"),e("input.b.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"height",name:"height",oninput(e){let t=e.target.value;n.height=parseInt(t),i.height=t},value:i&&i.height})),e(".mt3",e("label.db.fw4.lh-copy.f6","解析度"),e("input.b.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"resolution",name:"resolution",oninput(e){let t=e.target.value;n.resolution=parseFloat(t),i.resolution=t},value:i&&i.resolution})),e(".mt3",e("label.db.fw4.lh-copy.f6","是否反鋸齒"),e("input.b.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"antialias",name:"antialias",oninput(e){let t=e.target.value;n.antialias=!1,"true"===t&&(n.antialias=!0),i.antialias=t},value:i&&i.antialias})),e(".mt3",e("label.db.fw4.lh-copy.f6","是否透明"),e("input.b.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"transparent",name:"transparent",oninput(e){let t=e.target.value;n.transparent=!1,"true"===t&&(n.transparent=!0),i.transparent=t},value:i&&i.transparent})),e(".mt3",e("input.b.ph3.pv2.input-reset.ba.b--black.bg-transparent.grow.pointer.f6 white",{onclick(){Object.getOwnPropertyNames(n).forEach((e=>{i[e]=n[e]})),t&&t.ready&&(t.visible=!1,t.ready())},value:"確定"}))])]))}},kt=null,Rt={oninit(i){let n=this,s=i.attrs;n.style=s.style,n.options=s.options,n.resource=s.resource,n.timeout=null,n.isLeave=!1;let a={start(){},resBegin(){},resEnd(){},sceneResBegin(){},sceneResLoading(){n.timeout&&(t.remove(n.timeout),n.timeout=null),n.isLeave||(n.timeout=t.setTimeout((()=>{n.isLeave=!0,n.game&&(n.game.resetUpdate(),n.game.stop(),n.game=null),n.options&&n.options.ready&&n.options.ready();let t=l;r[t.OVERVIEW_ANIMATION]=!1,r[t.OVERVIEW_PROGRESS]=!0,e.redraw(),n.timeout=null}),5))},sceneResEnd(){},finish(){n.timeout&&(t.remove(n.timeout),n.timeout=null)}};!async function(){if(!kt)try{const{getProject:e}=await import("./agent.8aa408b9.js");kt=await e("scenes/loading")}catch(t){n.options&&n.options.ready&&n.options.ready();let i=l;return r[i.OVERVIEW_ANIMATION]=!1,r[i.OVERVIEW_PROGRESS]=!0,void e.redraw()}let t=await kt.lib.scene.init({langID:o(),baseURL:kt.pathname});n.resource.setting=t,Re(t),n.pixiConfig=kt.lib.scene.pixiConfig,e.redraw()}(),n.ready=async function(t){t.resource=s.resource,t.play(),n.game=t;try{n.scene=await kt.lib.scene.create(t,a,d)}catch(i){n.resource.setting&&Oe(n.resource.setting),t.resetUpdate(),t.stop(),n.options&&n.options.ready&&n.options.ready();let s=l;return r[s.OVERVIEW_ANIMATION]=!1,r[s.OVERVIEW_PROGRESS]=!0,void e.redraw()}n.options&&n.options.ready&&n.options.ready()}},oncreate(){let e=this;e.resource.setting&&Re(e.resource.setting)},onremove(){let e=this;e.resource.setting&&Oe(e.resource.setting),e.scene&&e.scene.hide();let t=e.game;t&&(t.resetUpdate(),t.stop())},view(){let t=this;return t.pixiConfig?e(p.game.pixi,{id:"loading9999",config:t.pixiConfig,ready:t.ready}):e(".")}};function Ot(e){let t,i=e[0],n=1;for(;n<e.length;){const s=e[n],a=e[n+1];if(n+=2,("optionalAccess"===s||"optionalCall"===s)&&null==i)return;"access"===s||"optionalAccess"===s?(t=i,i=a(i)):"call"!==s&&"optionalCall"!==s||(i=a(((...e)=>i.call(t,...e))),t=void 0)}return i}let It,Ut=l,_t={oninit(o){let l=this,c=o.attrs,h=c.setUpdateEvent;l.scene=c.scene,l.ready=c.ready,l.serve=c.serve,l.finish=c.finish,l.manager=c.manager;let u=r;if(!n.useOptions){let e=l.scene.options;if(e){u[Ut.OVERVIEW_LOGO]=!1,//!!overview.logo;
m.isCheckGameCDN?u[Ut.OVERVIEW_ANIMATION]=!1:u[Ut.OVERVIEW_ANIMATION]=!0,u[Ut.OVERVIEW_BACKGROUND]=!0,u[Ut.OVERVIEW_PROGRESS]=!1;let t=e.game;t&&(u[Ut.GAME_SCENE_CUSTOM]=!!t.custom,u[Ut.GAME_PERFORMANCE_FPS]=!!t.fps,u[Ut.GAME_DEBUG_MODE]=!!t.debug,u[Ut.GAME_DIALOG_CUSTOM]=!!t.useDialog)}}l.elementLogo=null,l.progress=0,l.progressValue=0,l.baseURL=l.scene.baseURL||"",function(t){if(!Ue){if(Ue=!0,fe.currentY=0,document){let t=globalThis.scene;document.onfullscreenchange=document.onwebkitfullscreenchange=()=>{fe.settingList.forEach((e=>{if(e&&t){let i=t[e.id];if(i){let e=i.game&&i.game.sysTray;le(e);let t=i.localEvent;if(t&&t.fullscreen){let i=e&&e.isFullscreen;t.fullscreen(i)}}}})),e.redraw()},document.onfullscreenerror=document.onwebkitfullscreenerror=()=>{fe.settingList.forEach((e=>{if(e&&t){let i=t[e.id];if(i){let e=i.game&&i.game.sysTray;le(e);let t=i.localEvent;if(t&&t.fullscreen){let i=e&&e.isFullscreen;t.fullscreen(i)}}}})),e.redraw()}}if(!n.isCheckGameCDN&&L.any()?(screen&&screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",Le):globalThis.addEventListener("orientationchange",Le),fe.isMobile=!0,we=xe,L.iOS()?(globalThis.parent===window&&(fe.currentY=200),fe.ios=!0,we=null):L.Android()&&(globalThis.parent===window&&(fe.currentY=200),we=null)):fe.isMobile=!1,t&&(fe.useOrientation=!1,fe.usePortrait=!1,fe.useLandscape=!1,fe.isMobile&&("string"==typeof t.orientation&&("portrait"===t.orientation?(fe.usePortrait=!0,fe.orientation.name="portrait"):(fe.useLandscape=!0,fe.orientation.name="landscape"),fe.useOrientation=!0),ve=null,fe.useFullscreen=!1,L.iOS()?navigator.userAgent.match(/baidu/i)?(ve=te,fe.screenUnit="px",fe.useFullscreen=!1):navigator.userAgent.match(/CriOS/i)?(ve=H,fe.screenUnit="px",fe.useFullscreen=!1):navigator.userAgent.match(/LieBao|ACHEETAHI/i)?(ve=se,fe.screenUnit="px",fe.useFullscreen=!1):navigator.userAgent.match(/FxiOS/i)?(ve=G,fe.screenUnit="px",fe.useFullscreen=!1):navigator.userAgent.match(/Safari/i)?(ve=Q,fe.screenUnit="px",fe.useFullscreen=!1):navigator.userAgent.match(/UCB/i)?(ve=K,fe.screenUnit="px",fe.useFullscreen=!1):ve=re:L.Android()&&(navigator.userAgent.match(/OPR/i)?(ve=$,fe.screenUnit="px",fe.useFullscreen=!1,navigator.userAgent.match(/baidu/i)?ve=P:navigator.userAgent.match(/LieBao|ACHEETAHI/i)&&(ve=N,fe.screenUnit="px",fe.useFullscreen=!1)):navigator.userAgent.match(/baidu/i)?(ve=P,fe.screenUnit="px",fe.useFullscreen=!1):navigator.userAgent.match(/LieBao|ACHEETAHI/i)?(ve=N,fe.screenUnit="px",fe.useFullscreen=!1):navigator.userAgent.match(/Firefox/i)?(ve=U,fe.screenUnit="px",fe.useFullscreen=!1):navigator.userAgent.match(/UCB/i)?(ve=A,fe.screenUnit="px",fe.useFullscreen=!1):navigator.userAgent.match(/Chrome/i)?(fe.useFullscreen=!1,fe.screenUnit="px",ve=O):ve=V),navigator.userAgent.match(/(UBiOS|Pad|Tablet|KFAUW|Mb2345|ME173X|NRD90M|VIE|N2G47H)/i)&&(fe.useFullscreen=!1,fe.screenUnit="px"),ve&&(ve.value.state=fe),globalThis.addEventListener("focus",(()=>{fe.useFocus&&(fe.isTouchOnce=!0,fe.useFocus=!1,ke(!0))}),!0),Te(),ke(!0),fe.settingList.forEach((e=>{if(e)return e.isLock?void Ee(e):(Ce(e),!0)})),fe.isFullscreen=!0,fe.isTouchDown=!1,fe.isTouchOnce=!0)),n.mobileMode){let e=n.mobileMode;parseInt(e)>0&&(fe.isFullscreen=!0,fe.isTouchDown=!1,fe.isTouchOnce=!0)}document.body.onscroll=()=>{!fe.isMobile||fe.orientation.isTrigger||fe.isResize||fe.disableResize||globalThis.parent===window&&fe.isMobile&&(fe.currentY=globalThis.pageYOffset,globalThis.scrollTo(0,fe.currentY),e.redraw())},globalThis.addEventListener("resize",ke)}}(l.scene.screen),fe.settingList=[],u[Ut.OVERVIEW_LOGO]&&(l.setting={id:"logo",isLock:!0,useCenter:!0,left:"25%",top:"25%",width:"50%",height:"50%",game:{width:512,height:512},reference:{left:.25,top:.25,width:.5,height:.5}});l.settingBackground={id:"background",isLock:!1,left:"0%",top:"0%",width:"100%",height:"100%",game:{width:10240,height:10240},reference:{left:0,top:1,width:1,height:1}},l.message="建立預覽",l.display="inline",l.isFinish=!1,l.options={scene:l.scene,visible:!0,ready:l.ready},l.scene.pixiConfig||(r[Ut.GAME_SCENE_CUSTOM]=!1);let d=m;l.manager.show=()=>{Nt.overview.visible=!0,e.redraw()},l.manager.hide=()=>{Nt.overview.visible=!1,e.redraw()},l.leave=function(){if(!m.isCheckGameCDN)if(l.isFinish=!0,d.isFinish=!0,n.isReload=!1,e.redraw(),n.disableNet){if(!Nt.manual.overview){let e=Nt.overview.manager;e.hide&&e.hide()}let e=vi(),t={id:l.scene.id},i=e.scene[t.id];i&&i.localEvent&&i.localEvent.enter(t)}else l.title=s("connecting"),l.message=s("start"),g.isKickOut||(i.isLogin?(Yt=!1,qt()):l.serve&&wi(l.serve).then((()=>{l.title=s("quickPlay"),e.redraw()})))},l.timeout=null;let p={start(){l.message="開始讀取遊戲資料",e.redraw(),Ot([d,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.start,"call",e=>e()])},resBegin(e){Ot([d,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.resBegin,"call",t=>t(e)])},resEnd(e){Ot([d,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.resEnd,"call",t=>t(e)])},sceneResBegin(e){Ot([d,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.sceneResBegin,"call",t=>t(e)])},sceneResLoading(i){let s=0;if(Object.prototype.hasOwnProperty.call(i,"totalProgress")){let e=i.state,t=i.totalProgress;if(e){t=(e.currentIndex-1)/e.totals*100+t/e.totals}s=t.toFixed(0),l.progress=s,l.progressValue=.01*t}else{let e=i.current/i.length;s=(100*e).toFixed(0),l.progress=s,l.progressValue=e}l.isFinish||(l.timeout&&(t.remove(l.timeout),l.timeout=null),a||(l.timeout=t.setTimeout((()=>{n.isReload=!0,li({url:l.baseURL,group:l.scene.group,game:l.scene.appConfig}),l.timeout=null}),5))),r[Ut.OVERVIEW_PROGRESS]&&e.redraw(),Ot([d,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.sceneResLoading,"call",e=>e(s)])},sceneResEnd(e){Ot([d,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.sceneResEnd,"call",t=>t(e)])},async finish(){if(l.timeout&&(t.remove(l.timeout),l.timeout=null),n.requestReload)return;let e=n.store;if(e)try{await e.setItem("baseURL",globalThis.BASE_URL)}catch(e){}r[Ut.OVERVIEW_ANIMATION]&&l.animationLeave?l.animationLeave():l.leave(),Ot([d,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.finish,"call",e=>e()])}};h&&h(p)},oncreate(){let e=this;e.setting&&Re(e.setting),e.settingBackground&&Re(e.settingBackground),ke(!0),n.requestReload&&(n.requestReload=!1),r[Ut.GAME_SCENE_CUSTOM]||r[Ut.OVERVIEW_ANIMATION]||e.options.ready&&e.options.ready()},onremove(){self.setting&&Oe(self.setting),self.settingBackground&&Oe(self.settingBackground)},onbeforeremove:e=>(["animate__animated","animate__fadeOut","animate__faster"].forEach((t=>{e.dom.classList.add(t)})),new Promise((function(t){e.dom.addEventListener("animationend",t)}))),view(){let t=this,i=m.setting,a=t.settingBackground,o=t.setting,l=t.options;t.display,i||(i={left:"0%",top:"0%",width:"0%",height:"0%"}),fe.isMobile&&fe.currentY;let c="";return c=globalThis.innerHeight>globalThis.innerWidth?s(`${n.agent}Portrait`):s(`${n.agent}Landscape`),globalThis.BASE_URL&&(c=globalThis.BASE_URL+"agent/"+c),e(".",{style:{display:t.display,position:"absolute",zIndex:100,left:a.left,top:`${fe.currentY+parseInt(a.top)}px`,width:a.width,height:a.height}},e(".",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},e(".aspect-ratio--object cover",{style:{zIndex:0,background:`url(${c}) center`}})),r[Ut.OVERVIEW_ANIMATION]?e(".",{style:{position:"absolute",left:i.left,top:i.top,width:i.width,height:i.height}},e(Rt,{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"},options:l,resource:m})):null,!n.isReload&&r[Ut.OVERVIEW_LOGO]?e(".",{style:{position:"absolute",left:"25%",top:"25%",width:"50%",height:"50%"}},e("img",{oncreate(e){t.elementLogo=e.dom},src:n.logo,onload(){["animate__animated","animate__fadeIn"].forEach((e=>{t.elementLogo.classList.add(e)}))},style:{opacity:0,zIndex:700,position:"absolute",left:o.left,top:o.top,width:o.width,height:o.height}})):null,r[Ut.GAME_SCENE_CUSTOM]&&l.visible?e(".",{style:{position:"absolute",zIndex:300,left:"0%",top:"0%",width:"100%",height:"100%"}},e(".pv2 mb2 white bg-dark-green o-20",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}}),e(".",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},e(Et,{options:l}))):null,r[Ut.OVERVIEW_PROGRESS]&&!t.isFinish?e(".",{style:{zIndex:100,position:"absolute",left:"10%",top:"90%",width:"80%",height:"4%"}},e("progress.progress",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"40%"},max:"100",value:`${t.progress}`}),e(".tc",{style:{position:"absolute",left:"0%",top:"30%",width:"100%",height:"60%",color:"#a0cdff"}},e("p.v-btm",`${s("loading")} ${t.progress}%`))):null)}},$t={fatal(e){},high(e){},middle(e){},low(e){}},Ft={disableDialog:!1,handle(){let e=l;if(i.state="未連線",n.isInGame&&globalThis.scene){Object.getOwnPropertyNames(globalThis.scene).forEach((e=>{let t=globalThis.scene[e];t&&t.game&&t.game.disconnect&&t.game.disconnect()}))}Ft.disableDialog||r[e.GAME_DIALOG_CUSTOM]&&(i.isError||t.setTimeout((()=>{i.isError||Me({title:"errorLow",msg:"disconnect"})}),2))}},At={handle(e){let t=vi();i.state="遊戲中",Ft.disableDialog=!0,h.serviceEnd(At.report),h.log({label:"net",category:"進入遊戲"});let n={id:e.gid};Ne();let s=t.scene[n.id];s&&s.localEvent&&s.localEvent.enter(n)},report:{time:0,category:"進入遊戲",getLabel:()=>"net"},error:$t.low},Bt={position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"},Pt=[{style:{zIndex:10,position:"absolute",left:"5%",top:"5%",width:"30%",height:"85%"},reference:{left:.05,top:.05,width:.3,height:.85}},{style:{zIndex:10,position:"absolute",left:"35%",top:"5%",width:"30%",height:"85%"},reference:{left:.35,top:.05,width:.3,height:.85}},{style:{zIndex:10,position:"absolute",left:"65%",top:"5%",width:"30%",height:"85%"},reference:{left:.65,top:.05,width:.3,height:.85}}],Mt={isLock:!1,orientation:"test",width:1024,height:768},Nt={overview:{visible:!0,manager:{}},packet:null,gid:null,manual:{overview:!1}},St={visible:!1},Vt="",zt=[],jt={oninit(e){let t=e.attrs,i=this;i.isLoading=!1;let n=t.loadingEvent,s=g,a={id:t.id,decimal:0,mode:s.mode,isCreate:!0,scene:t.scene,loadingEvent:{start(){i.isLoading=!0,n&&n.start&&n.start()},resBegin(e){n&&n.resBegin&&n.resBegin(e)},resEnd(e){n&&n.resEnd&&n.resEnd(e)},sceneResBegin(e){n&&n.sceneResBegin&&n.sceneResBegin(e)},sceneResLoading(e){n&&n.sceneResLoading&&n.sceneResLoading(e)},sceneResEnd(e){n&&n.sceneResEnd&&n.sceneResEnd(e)},finish(e){e&&e.localEvent&&(t.localEvent=e.localEvent),i.isLoading=!1,t.finish&&t.finish(e),n&&n.finish&&n.finish(e)}}};i.config=a,i.style=t.style,i.reference=t.reference,i.fix=t.fix,i.absPos=t.absPos,i.updateBlur=t.updateBlur,i.isChild=t.isChild},view(){let t=this;return e(".",{style:t.style},e(Ct,{updateStyle(e){if(e){let i=t.style;i.display=e.display||i.display,Object.prototype.hasOwnProperty.call(e,"opacity")&&(i.opacity=e.opacity),Object.prototype.hasOwnProperty.call(e,"zIndex")&&(i.zIndex=e.zIndex)}},config:t.config,currentBaseURL:globalThis.BASE_URL,left:"0%",top:"0%",width:"100%",height:"100%",reference:t.reference,updateBlur:t.updateBlur,fix:t.fix,isChild:t.isChild,absPos:t.absPos}))}},Ht={oninit(t){let i=t.attrs,n=this,s=i.sceneInfo;n.objList=i.objList,n.serve=i.serve,n.isReady=!1;let a={reload(){n.isReady=!1}},o={};let r=g,l={id:s.id,decimal:0,mode:r.mode,isCreate:!0,scene:s,loadingEvent:{start(){o.start&&o.start()},resBegin(e){o.resBegin&&o.resBegin(e)},resEnd(e){o.resEnd&&o.resEnd(e)},sceneResBegin(e){o.sceneResBegin&&o.sceneResBegin(e)},sceneResLoading(e){o.sceneResLoading&&o.sceneResLoading(e)},sceneResEnd(e){o.sceneResEnd&&o.sceneResEnd(e)},finish(){o.finish&&o.finish()}}};Nt.packet=null,Nt.gid=s.id||n.serve.id,n.setUpdateEvent=function(e){o=e},n.gameConf=l,n.sceneInfo=s,n.ctrlEvent=a,n.event={ready:function(){n.isReady=!0,e.redraw()},finish:function(){let e=yi();const t=y.CMD;e&&e.setLobbyCommand(t.IN_GAME,{packet:null,gid:s.id||n.serve.id})}}},view(){let t=this,i=t.objList,n=t.gameConf,s=t.event;return e(".",{style:Bt},St.visible&&t.isReady?e(Ct,{currentBaseURL:globalThis.BASE_URL,sysTray:t.sceneInfo.sysTray,ctrlEvent:t.ctrlEvent,config:t.gameConf,zIndex:4,left:"0%",top:"0%",width:"100%",height:"100%",objList:i}):null,e(".",Nt.overview.visible?e(_t,{manager:Nt.overview.manager,serve:t.serve,scene:n.scene,setUpdateEvent:t.setUpdateEvent,ready(){s.ready()},finish(){s.finish()}}):null))}};function Dt(t){let i;if(t.gameCard)i=t.gameCard;else{let e;e=Ye(t.group),i=e[t.id]}if(!i)return;i.manual&&(Nt.manual=i.manual),Vt=i.group;let s={},a=[],o=i.baseURL||"";if(i.images&&i.images.icon){let e=document.getElementsByTagName("link");if(e){let t=e[0];t&&(t.setAttribute("crossorigin","icon"),t.setAttribute("rel","icon"),t.setAttribute("type","image/png"),t.setAttribute("href",o+i.images.icon))}}let r=i.app;"object"==typeof r&&(r=r[It]),i.name[It]?document.title=i.name[It]+" ["+r+"]":document.title=i.name[b.EN]+" ["+r+"]";let l={};let c=g,h={updateConfig:null,id:i.id||t.id,decimal:0,mode:c.mode,isCreate:!0,scene:i,loadingEvent:{start(){l.start&&l.start()},resBegin(e){l.resBegin&&l.resBegin(e)},resEnd(e){l.resEnd&&l.resEnd(e)},sceneResBegin(e){l.sceneResBegin&&l.sceneResBegin(e)},sceneResLoading(e){l.sceneResLoading&&l.sceneResLoading(e)},sceneResEnd(e){l.sceneResEnd&&l.sceneResEnd(e)},finish(){l.finish&&l.finish()}}};Nt.packet=null,Nt.gid=i.id||t.serve.id,a.push({com:_t,attrs:{manager:Nt.overview.manager,serve:t.serve,scene:h.scene,setUpdateEvent:function(e){l=e},ready(){!function(){a.push({com:Ct,attrs:{currentBaseURL:globalThis.BASE_URL,sysTray:i.sysTray,ctrlEvent:s,config:h,zIndex:4,left:"0%",top:"0%",width:"100%",height:"100%"}});let t=null;if(i.theOther&&(i.theOther,i.theOther.length>0?t={id:i.theOther,group:Vt,version:n.version}:"object"==typeof i.theOther&&(t={id:i.theOther.id,group:i.theOther.group||Vt,version:i.theOther.version||"1.0.0"})),null!==t){let i=globalThis.BASE_URL;qe(t.id,t.group,i).then((t=>{let i=t.gameCard;if(!i)return;let n=g,o={id:i.id,decimal:0,mode:n.mode,isCreate:!1,scene:i,loadingEvent:{start(){},resBegin(){},resEnd(){},sceneResBegin(){},sceneResLoading(){},sceneResEnd(){},finish(){}}},r=h.scene.screen||Mt;o.scene.screen={isLock:r.isLock,orientation:r.orientation,width:r.width,height:r.height},a.push({com:{oninit(e){this.attrs=e.attrs,this.attrs.currentBaseURL=globalThis.BASE_URL},view(){return e(Ct,this.attrs)}},attrs:{ctrlEvent:s,config:o,zIndex:1,left:"0%",top:"0%",width:"100%",height:"100%"}}),e.redraw(),ri()}))}else ri();e.redraw()}()},finish(){!function(){let e=t.serve,n=yi();const s=y.CMD;n&&n.setLobbyCommand(s.IN_GAME,{packet:null,gid:i.id||e.id})}()}}}),pi({view:()=>e(".",a.map((t=>e(t.com,t.attrs))))})}function Wt(e){const t=w;switch(It=n.langID,n.serve=e.serve,Nt.manual={overview:!1},Nt.overview.visible=!0,n.pattern){case t.SINGLE:Dt(e);break;case t.MULTI:!function(e){let t=null;if(e.gameCard)t=e.gameCard;else{let i;i=Ye(e.group),t=i[e.id]}if(!t)return;t.manual&&(Nt.manual=t.manual,t.manual.disableNet&&(n.disableNet=!0)),h.report.name=`${t.group}/${t.appConfig}`,Vt=t.group;let i=t.baseURL||"";if(t.images&&t.images.icon){let e=document.getElementsByTagName("link");if(e){let n=e[0];n&&(n.setAttribute("crossorigin","icon"),n.setAttribute("rel","icon"),n.setAttribute("type","image/png"),n.setAttribute("href",i+t.images.icon))}}let s=t.app;"object"==typeof s&&(s=s[It]),t.name[It]?document.title=t.name[It]+" ["+s+"]":document.title=t.name[b.EN]+" ["+s+"]",St.objList=zt,St.sceneInfo=t,St.serve=e.serve,St.visible=!0,pi(Ht,St)}(e)}}function Gt(){zt=[],St.visible=!0,e.redraw()}let Yt=!1;function qt(){let e=yi();const s=y.CMD;let a=Nt;if(Yt)return!0;let o=n,r=i;if(t.setTimeout((()=>{"遊戲中"!==r.state&&(globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload()),Me({title:"connecting",msg:"disconnect"}))}),.001*v),o.module?import("./agent.fc5f16fe.js").then((e=>{e.ingame({name:g.game,group:g.group,gid:a.gid})})):(e&&e.setLobbyCommand(s.IN_GAME,{packet:a.packet,gid:a.gid}),h.serviceBegin(At.report)),Yt=!0,!a.manual.overview){let e=a.overview.manager;e.hide&&e.hide()}return!0}let Kt={oninit(e){let t=e.attrs;t.yesno||Gt(),this.title=t.title,this.msg=t.msg,this.setting={id:"dialog",isLock:!1,useCenter:!1,left:"0%",top:"0%",width:"100%",height:"100%",game:{width:1024,height:1024},reference:{left:0,top:0,width:1,height:1}},Re(this.setting)},oncreate(){},view(){let t=this,i=t.setting,a=null;return a=fe.isMobile?{position:"absolute",left:i.left,top:fe.currentY+"px",backgroundColor:"rgba(0,0,0,1)",zIndex:990,opacity:1,width:i.width,height:i.height}:{position:"absolute",left:i.left,top:i.top,backgroundColor:"rgba(0,0,0,1)",zIndex:990,opacity:1,width:i.width,height:i.height},e(".",{style:a},e(".bg-moon-gray ba bw1",{style:{position:"absolute",left:"20%",top:"30%",width:"60%",height:"40%"}},e(".bg-near-black white f4 fw6 pa4",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"20%"}},e(".tc",s(t.title)||"title")),e(".tc pa5",{style:{position:"absolute",left:"0%",top:"20%",width:"100%",height:"50%"}},e.trust(s(t.msg))||"body message"),e(".tc",{style:{position:"absolute",left:"20%",top:"85%",width:"60%",height:"10%"},onclick(){let e=g,t=n,i=(new Date).getTime(),s=(a=globalThis.BASE_URL,o=()=>"http://172.16.65.127:3000/project/",null!=a?a:o());var a,o;globalThis.location.href=`../check/gamecdn/index.html?group=${e.group}&game=${e.game}&lang=${t.langID}&cdn=${s}&v=${i}`}},[e.trust(`<div class="no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma2 tc br2 pa2">\n    <svg fill="#77ff77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n    <span class="f6 ml3 pr2">${s("detect")}</span>\n  </div>`)])))}},Jt={oninit(){let e=this;e.timeValue=-1,e.touchmoveOnce=!1,e.fields=["一","二","三","四","五","六","七","八","九","十","一","二","三","四","五","六","七","八","九","十"],e.pageY=0,e.imgRotate={id:"rotate",isLock:!0,useCenter:!0,left:"10%",top:"10",width:"80%",height:"80%",game:{width:5120,height:5120},reference:{left:0,top:0,width:1,height:1}},e.imgFullscreen={id:"screen",isLock:!0,useCenter:!0,left:"10%",top:"10",width:"80%",height:"80%",game:{width:5120,height:5120},reference:{left:0,top:0,width:1,height:1}}},view(){let t=this,i=fe,n=i.orientation,s=globalThis.innerWidth,a=globalThis.innerHeight;return n.isTrigger&&(s*=2.5,a*=2.5),i.isMobile&&i.currentY,[i.isTouchOnce&&i.isFullscreen?null:e(".",{style:{zIndex:850,position:"absolute",left:"0%",top:i.currentY+"px",width:(s||i.screenWidth)+"px",height:(a||i.screenHeight)+"px",backgroundColor:"rgba(0,0,0,1)"},ontouchmove(e){fe.isMobile&&!fe.ios&&e.preventDefault()},ontouchend(){if(globalThis.Howl){let e=new globalThis.Howl({src:["data/f82550ea2e80cd97.wav"]});e&&(e.volume(.001),e.play())}if(i.isFullscreen=!0,i.isTouchDown=!1,i.isTouchOnce=!0,fe.ios){let t=globalThis.scene;i.settingList.forEach((e=>{if(t){let i=t[e.id];if(i){(i.game&&i.game.sysTray).isFullscreen=!1}}})),e.redraw(),ke(),i.mobileReady&&i.mobileReady()}else ce().then((()=>{let t=globalThis.scene;i.settingList.forEach((e=>{if(t){let i=t[e.id];if(i){(i.game&&i.game.sysTray).isFullscreen=!0}}})),e.redraw(),ke(),i.mobileReady&&i.mobileReady()})).catch((()=>{let t=globalThis.scene;i.settingList.forEach((e=>{if(t){let i=t[e.id];if(i){(i.game&&i.game.sysTray).isFullscreen=!1}}})),e.redraw(),ke(),i.mobileReady&&i.mobileReady()}))},ontouchstart(e){if(globalThis.Howl){let e=new globalThis.Howl({src:["data/f82550ea2e80cd97.wav"]});e.volume(.001),e.play()}if(i.isTouchDown)return;i.isTouchDown=!0;let n=e.changedTouches||e.originalEvent.touches;if(n){let e=n[0];t.pageY=e.pageY}}},e(".",{oncreate(){Re(t.imgFullscreen)},onremove(){Oe(t.imgFullscreen)},style:{position:"absolute",left:"10%",top:"10%",width:"80%",height:"80%"}},e("img",{src:"data/img/c7aecda7af142624.png",style:{position:"absolute",zIndex:850,left:t.imgFullscreen.left,top:t.imgFullscreen.top,width:t.imgFullscreen.width,height:t.imgFullscreen.height}}))),!n.isTrigger&&i.useOrientation&&i.usePortrait&&!i.isPortrait?e(".",{oncreate(){Re(t.imgRotate),ke(!0)},onremove(){Oe(t.imgRotate)},style:{zIndex:800,position:"absolute",left:"0px",top:globalThis.pageYOffset+"px",width:(globalThis.innerWidth||i.screenWidth)+"px",height:(globalThis.innerHeight||i.screenHeight)+"px",backgroundColor:"rgba(0,0,0,1)"}},e("img",{src:"data/img/f14a0482453bcc34.png",style:{position:"absolute",left:t.imgRotate.left,top:t.imgRotate.top,width:t.imgRotate.width,height:t.imgRotate.height}})):null,!n.isTrigger&&i.useOrientation&&i.useLandscape&&!i.isLandscape?e(".",{oncreate(){Re(t.imgRotate),ke(!0)},onremove(){Oe(t.imgRotate)},style:{zIndex:800,position:"absolute",left:"0px",top:globalThis.pageYOffset+"px",width:(globalThis.innerWidth||i.screenWidth)+"px",height:(globalThis.innerHeight||i.screenHeight)+"px",backgroundColor:"rgba(0,0,0,1)"}},e("img",{src:"data/img/b4c0d11274ffa254.gif",style:{position:"absolute",left:t.imgRotate.left,top:t.imgRotate.top,width:t.imgRotate.width,height:t.imgRotate.height}})):null]}},Xt={"game.2.0":'<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  <title>game 2.0 {{{name}}}</title>\n\n  <script type="systemjs-importmap" crossorigin="anonymous">\n    {\n      "imports": {\n      {{#importmap}}\n        {{{importmapName}}}\n      {{/importmap}}\n      }\n    }\n  <\/script>\n\n</head>\n<body id="{{{id}}}" style="height:100%;width:100%;overflow-x:hidden;overflow-y:hidden">\n<script crossorigin="anonymous">\n  if(!window.globalThis) {\n    window.globalThis = window;\n  }\n\n  let isInitCache = false;\n  function initCache () {\n    if(isInitCache) {\n      return;\n    }\n    isInitCache = true;\n    let isLoaded = false;\n    let registration = null;\n    function loadScript() {\n      if(isLoaded) {\n        return;\n      }\n      isLoaded = true;\n      let script = document.createElement(\'script\');\n      script.onload = function() {\n        System.import("{{{appName}}}");\n      };\n      script.src = "{{{systemjsURL}}}";\n      document.getElementsByTagName(\'head\')[0].appendChild(script);\n    }\n    loadScript();\n  }\n  initCache();\n\n<\/script>\n</body>\n</html>\n',"game.3.0":'<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  <title>game 3.0 {{{name}}}</title>\n\n  {{#importmap}}\n  {{{jsName}}}\n  {{/importmap}}\n\n</head>\n<body id="{{{id}}}" style="height:100%;width:100%;overflow-x:hidden;overflow-y:hidden">\n<script crossorigin="anonymous">\n  if(!window.globalThis) {\n    window.globalThis = window;\n  }\n\n  let isInitCache = false;\n  function initCache () {\n    if(isInitCache) {\n      return;\n    }\n    isInitCache = true;\n    let isLoaded = false;\n    let registration = null;\n    function loadScript() {\n      if(isLoaded) {\n        return;\n      }\n      isLoaded = true;\n      let script = document.createElement(\'script\');\n      script.onload = function() {\n      };\n      script.src = "{{{appName}}}";\n      script.crossorigin = "anonymous";\n      document.getElementsByTagName(\'head\')[0].appendChild(script);\n    }\n    loadScript();\n  }\n\n  initCache();\n<\/script>\n</body>\n</html>\n',"game.4.0":'<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  <title>game 4.0 {{{name}}}</title>\n\n\n  {{#importmap}}\n  {{{jsName}}}\n  {{/importmap}}\n  \n  <script crossorigin="anonymous">\n    if(!window.globalThis) {\n      window.globalThis = window;\n    }\n    {{#globalmap}}\n    {{{globalName}}}\n    {{/globalmap}}\n\n  <\/script>\n</head>\n<body id="{{{id}}}" style="height:100%;width:100%;overflow-x:hidden;overflow-y:hidden">\n  <script type="module">\n    import "{{{appName}}}";\n    window.supportsDynamicImport = true;\n  <\/script>\n</body>\n</html>\n',"slot.2.1":'<!DOCTYPE html>\n<html>\n  <head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  <title>slot.2.1 {{{name}}}</title>\n  </head>\n  <body id="{{{id}}}" style="height:100%;width:100%;overflow-x:hidden;overflow-y:hidden">\n  <script crossorigin="anonymous">\n  if(!window.globalThis) {\n    window.globalThis = window;\n  }\n\n  let isInitCache = false;\n  function initCache () {\n    if(isInitCache) {\n      return;\n    }\n    isInitCache = true;\n    let isLoaded = false;\n    let registration = null;\n    function loadScript() {\n      if(isLoaded) {\n        return;\n      }\n      isLoaded = true;\n      let script = document.createElement(\'script\');\n      script.onload = function() {\n        {{{appConfig}}}\n        ;System.import(\'{{{appName}}}\');\n\n      };\n      script.src = "{{{systemjsURL}}}";\n      script.crossorigin = "anonymous";\n      document.getElementsByTagName(\'head\')[0].appendChild(script);\n    }\n    loadScript();\n  }\n\n  initCache();\n  <\/script>  \n  </body>\n</html>\n'},Qt=!1,Zt=["一","二","三","四","五","六","七","八","九","十","一","二","三","四","五","六","七","八","九","十"],ei=!0,ti=null,ii=null,ni=null,si=!1,ai=null,oi=null;function ri(){if(n.useCache){let e=n.registration;if(e&&e.active&&navigator.serviceWorker.controller){let e={reset:"games"};navigator.serviceWorker.controller.postMessage(e)}}}async function li(i){if(!n.requestReload){let s={eventName:`CDN ${i.url}`,category:"服務線路錯誤",label:`${i.group}${i.game}`};h.error(s),globalThis.scene={},n.requestReload=!0,n.cdnList=[],n.hasCDN=!1,n.selectCDN=!1,ii=null,e.redraw();let a=async function(){await x(),0===n.cdnList.length?bi({element:document.body}):e.redraw()};t.setTimeout((()=>{a()}),.1)}}async function ci(t){si=!0,ai=t||{},oi=await import("./agent.697996b1.js"),e.redraw()}function hi(){si=!1,e.redraw()}let gi={ready(t){globalThis.BASE_URL=t,h.report.currentURL=t,n.selectCDN=!0,globalThis.scene={},e.redraw();let i=g;qe(i.game,i.group,t).then((e=>{e&&e.gameCard&&Wt({gameCard:e.gameCard,serve:i,id:i.game,group:i.group})}))}},ui={context:null,view:()=>ei?n.hasCDN&&!n.selectCDN?e(".basic",e(Li,gi)):e(".basic",fe.isMobile?e(".",{style:{zIndex:0,position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},fe.orientation.isTrigger?null:Zt.map((()=>e(".ba h-25 black tc",{style:{opacity:0}},"")))):null,ii?e(ii,ni):null,fe.isMobile?e(Jt):null,$e()?e(Kt,{title:Ae(),msg:Pe()}):null,si&&oi?e(oi.Component,ai):null):n.hasCDN&&!n.selectCDN?e(".basic#root",e(Li,gi)):e(".basic#root",[fe.isMobile?e(".",{style:{zIndex:0,position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},fe.orientation.isTrigger?null:Zt.map((()=>e(".ba h-25 black tc",{style:{opacity:0}},"")))):null,ii?e(ii,ni):null,fe.isMobile?e(Jt):null,$e()?e(Kt,{title:Ae(),msg:Pe()}):null,si&&oi?e(oi.Component,ai):null])};function di(e){ei=e}function pi(t,i){ii=t,ni=i,e.redraw()}let mi={};function fi(e){return mi[e]}async function bi(i){let s=g,o=globalThis;o.addEventListener&&(o.addEventListener("beforeunload",(e=>{})),o.addEventListener("unload",(()=>{}))),o.scene={},o.game={},mi["game.2.0"]=Xt["game.2.0"],mi["game.3.0"]=Xt["game.3.0"],mi["game.4.0"]=Xt["game.4.0"],mi["slot.2.1"]=Xt["slot.2.1"];let r={game:s.game,group:s.group};if(s.group&&s.game||!T){if(di(!1),!n.hasCDN){let e=globalThis.BASE_URL;qe(r.game,r.group,e).then((e=>{e&&e.gameCard&&Wt({gameCard:e.gameCard,serve:r,id:r.game,group:r.group})}))}}else ii=Je;let l=c;if(s.mode===l.DEMO){let e=840;t.setTimeout((()=>{globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload()),Me({title:"gameModeDemo",msg:"demoTimeout"})}),e)}if(e.mount(i.element,ui),!a)try{let e=(0,(await import("./agent.bf86b3a3.js")).default)(g.key);Date.now()-1e3*e.exp>0&&(g.isKickOut=!0,Me({title:"exitGame",msg:"kickOut"}))}catch(e){}}function wi(s){let o=g,r=null;if(Qt){return new Promise((e=>{let t=o.info;ti&&(ti.login(t),e(ti))}))}Qt=!0,s&&(o.game=s.game||o.game,o.group=s.group||o.group,o.host=s.host||o.host),a&&!o.host&&(r={login:"test/data/login.txt"});let l=new Promise((s=>{let a=globalThis;a.lobby={currentUser:{},table:{},net:{}},n.module?import("./agent.50245f1c.js").then((e=>{let t=e.create();a.lobby.net.gameCommand=t;let i=()=>{o.host.indexOf("://")<0&&(o.host=`wss://${o.host}`);let e=o.info,t=o.host,i=o.protocol,n=o.gameFormat,a={hostname:t};import("./agent.fc5f16fe.js").then((t=>{t.init({gameFormat:n,protocol:i}).then((()=>{t.connect(a).then((()=>{(async function(e){try{let t=await import("./agent.fc5f16fe.js");return await t.login(e)}catch(e){}})(e).then((()=>{s(null)}))}))}))}))};if(r){let e=new globalThis.Loader;e.add("login",r.login,{crossOrigin:!1}),e.load(((e,t)=>{let n=JSON.parse(t.login.data),s=o.info;n.server&&(s.roomID=s.roomID||n.server.roomID,s.token=s.token||n.server.token,s.tablekey=s.tablekey||n.server.tablekey,o.host||(o.host=n.server.host)),i()}))}else i()})):(ti=new y({Loader:globalThis.Loader},"/"+o.namespace),ti.init(r,(n=>{import("./agent.33ae2a2c.js").then((a=>{let r,l=globalThis,c=i;r=a.getCommandList(),ti.setEventMap(r),ti.setSendEvent(a.getSendEvent()),c.state="連線中",e.redraw();let h={};h.send=ti.setGameCommand,h.registerGameEvent=ti.registerGameEvent,h.unregisterGameEvent=ti.unregisterGameEvent,l.lobby.net.gameCommand=h,l.lobby.net.setLobbyCommand=ti.setLobbyCommand,l.lobby.net.CMD=y.CMD,l.lobby.setEvent=a.setEvent,o.host&&ti.setHost(o.host);let g=o.info;n.login&&n.login.server&&(g.roomID=g.roomID||n.login.server.roomID,g.token=g.token||n.login.server.token,g.tablekey=g.tablekey||n.login.server.tablekey);let u=t.setTimeout((()=>{"連線中"===c.state&&(globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload()),Me({title:"connecting",msg:"disconnect"}))}),.001*v);ti.connect({connect(){u&&(t.remove(u),u=null),s(ti)},disconnect(){u&&(t.remove(u),u=null)}})}))})))}));return l}function yi(){return ti}function vi(){return globalThis}var xi=Object.freeze({__proto__:null,resetCache:ri,reload:li,showInfo:ci,hideInfo:hi,setAccountVisible:di,setCurrentContext:pi,getCurrentContext:function(){return ii},showGameList:function(){ii=Je},getGameTemplate:fi,run:bi,autoLogin:wi,getLobby:yi,getManager:vi,setKey:function(e){g.key=e}});async function Ti(t,i,s){let a="",r=null,l=null,c=i.target,h=!1,g=o(),u=n.version||"1.0.0";i.group=t.group,i.game=t.game;try{if(a=`${c}${t.group}/${t.game}/config/gamecard.txt?v=${u}`,r=await fetch(a,{headers:{"Content-Type":"text/plain"}}),!s&&!n.isCheckGameCDN)return null;r.ok&&(l=await r.text())}catch(e){}if(!l)try{if(a=`${c}config/${t.group}/${t.game}/gamecard.txt?v=${u}`,r=await fetch(a,{headers:{"Content-Type":"text/plain"}}),!s&&!n.isCheckGameCDN)return null;r.ok&&(l=await r.text(),h=!0)}catch(e){}let d=null;if(l){d=JSON.parse(l);let e=null;h?(d.templateVersion="slot.2.1",e=`${c}${d.images.icon}`):e=`${c}${t.group}/${t.game}/${d.images.icon}`;let a="";"string"==typeof d.name?a+=d.name+" ":a+=d.name[g]+" ";let o=null;if("string"==typeof d.app?(o=`${c}${d.app}`,a+=d.app):(o=`${c}${d.app[g]}`,a+=d.app[g]),i.app=a,i.version=d.version,i.icon=e,i.downloadEnabled=!0,i.appConfig=d.appConfig,i.gamecard=d,i.useTest){if(o){if(r=await fetch(o),!s&&!n.isCheckGameCDN)return null;if(!r.ok)return i.error&&i.error(i),null}if(e){if(r=await fetch(e),!s&&!n.isCheckGameCDN)return null;if(!r.ok)return i.error&&i.error(i),null}i.timeReady=Math.round(performance.now()-i.timestamp),i.ready&&i.ready(i)}}else i.app="",i.version="",i.gamecard=null,i.error&&i.error(i);return e.redraw(),d}let Li={oninit(e){let t=this,i=e.attrs,s={category:"測試CDN 主網址",getLabel:()=>"common"};h.loadBegin(s),t.cdnList=n.cdnList,t.server=g,t.ready=i.ready;let a=[];t.gamecdnFields=a,t.isFinish=!1;let o=0,r=t.cdnList.length;function l(e){o+=1,o>=r&&(t.server.cdn.errorCounts+=1,t.server.cdn.errorCounts<3?(n.requestReload=!1,n.isReload=!0,li({url:e.target,group:e.group,game:e.appConfig||e.game})):(n.hasCDN=!1,Me({yesno:!1,title:"service",msg:"errorCDN"})))}function c(e){t.isFinish||(t.isFinish=!0,e.isLight=!0,n.isCheckGameCDN=!1,t.server.cdn.errorCounts=0,h.loadEnd(s),h.log({label:"common",category:"測試CDN 主網址"}),t.ready&&t.ready(e.target))}n.isCheckGameCDN=!0,t.cdnList.forEach(((e,i)=>{let n={};n.index=i,n.isLight=!1,n.id=e.id,n.url=e.url,n.target=e.target,n.timestamp=Math.round(performance.now()),n.timeOnload=0,n.timeInit=0,n.timeScene=0,n.timeReady=9999,n.gamecard=null,n.icon="",n.isIconLoaded=!1,n.downloadEnabled=!1,n.loadingEvent={},n.ready=c,n.error=l,n.useTest=!0,a.push(n),Ti(t.server,n)}))},oncreate(){},view:()=>e(".",{left:"0%",right:"0%",width:"100%",height:"100%",position:"absolute",zIndex:0},e(".tmp",e(".cssload-loader",e.trust('<svg class="cssload-logo" height="200" width="200"><text x="49%" y="56%" dominant-baseline="middle" text-anchor="middle" fill="#1375ff">Loading</text></svg>'),e(".cssload-inner cssload-one"),e(".cssload-inner cssload-two"),e(".cssload-inner cssload-three"))),e(".",{style:{opacity:0,left:"0%",right:"0%",width:"1px",height:"1px",position:"absolute",zIndex:0}},e("article.dt.w-100.bb.b--black-05.pb2.mt2",e("div.dtc.v-mid.pl3",e("h1.f6.f5-ns.fw6.lh-title.white.mv1.tc","檢測服務線路"),e("h2.f6.fw4.mt1.mb1.green.tc","使用的線路")))))};var Ci=Object.freeze({__proto__:null,getGameCard:Ti,default:Li});export{At as C,Re as a,Me as b,xi as c,Oe as d,ke as e,Se as f,Ne as g,hi as h,qt as i,vi as j,$t as k,yi as l,Ft as m,Ci as n,fe as s};
