import e from"mithril";import{c as t,h as o,f as r,j as l,b as a}from"./agent.c8faf6b1.js";import{r as s,h as i,a as n}from"./agent.3e740e2d.js";let c={handle(l){globalThis.lobby.currentUser=l.userInfo;let a=i,g=n;a.isLogin=!0,a.state="已登入",t&&o(),e.redraw(),s.serviceEnd(c.report),s.log({label:"net",category:"登入"}),g.isManual||r()},report:{time:0,category:"登入",getLabel:()=>"net"},error:l.fatal},g={handle(e){i.isError=!0,globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload());let t="errorLow";"this account log in elsewhere"===e.text&&(t="elsewhere"),"errorLow"!==t&&a({title:"errorLow",msg:t})}},h={handle(e){i.isError=!0,globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload());let t="kickOut";"idle too long time"===e.text?t="kickOut":"System kickout"===e.text&&(t="systemKickOut"),a({title:"notice",msg:t})}};const m="kickOut",b="updateBalance",u="disconnectMsg";let d={handle(e){let t=e;if("string"==typeof e&&(t=JSON.parse(e)),t&&t.proto&&t.json){let e=JSON.parse(t.json);switch(t.proto){case b:break;case u:g.handle(e);break;case m:h.handle(e)}}}};export{c as C,d as a};
