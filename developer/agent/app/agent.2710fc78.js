import{m as e,u as t,s as i,o as n,i as s,O as a,G as r,r as o,a as l,l as c,n as h,b as g,d as u,e as d,f as p,L as m,T as f,g as b}from"./agent.d38c4a69.js";import{g as w,a as y,I as v}from"./agent.87cf6255.js";let x={Android:()=>navigator.userAgent.match(/Android/i),BlackBerry:()=>navigator.userAgent.match(/BlackBerry/i),iOS:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i),Opera:()=>navigator.userAgent.match(/Opera Mini/i),Windows:()=>navigator.userAgent.match(/IEMobile/i),any:()=>x.Android()||x.BlackBerry()||x.iOS()||x.Opera()||x.Windows()},L=null;function T(e){L=e}function C(e){L&&L.fix&&(globalThis.innerHeight>=e.screenHeight-L.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}let E={name:"chrome",0:{offset:{x:0,y:0,width:0,height:0},fix:{height:68}},90:{offset:{x:0,y:0,width:0,height:0},fix:{height:28}},"-90":{offset:{x:0,y:0,width:0,height:0},fix:{height:28}},270:{offset:{x:0,y:0,width:0,height:0},fix:{height:28}},180:{offset:{x:0,y:0,width:0,height:0},fix:{height:68}}};var k=Object.freeze({__proto__:null,checkFullscreen:function(e){C(e)},setCurrentValue:function(e){T(E[e])},getCurrentValue:function(){return L},value:E});let R={name:"firefox",0:{offset:0,fix:{height:26}},90:{offset:0,fix:{height:26}},"-90":{offset:0,fix:{height:26}},270:{offset:0,fix:{height:26}},180:{offset:0,fix:{height:26}}};var O=Object.freeze({__proto__:null,checkFullscreen:function(e){C(e)},setCurrentValue:function(e){T(R[e])},getCurrentValue:function(){return L},value:R});let I={name:"opera",0:{offset:0,fix:{height:114}},90:{offset:0,fix:{height:72}},"-90":{offset:0,fix:{height:72}},270:{offset:0,fix:{height:72}},180:{offset:0,fix:{height:114}}};var U=Object.freeze({__proto__:null,checkFullscreen:function(e){C(e)},setCurrentValue:function(e){T(I[e])},getCurrentValue:function(){return L},value:I});let _={name:"uc",0:{offset:0,fix:{height:0}},90:{offset:0,fix:{height:0}},"-90":{offset:0,fix:{height:0}},270:{offset:0,fix:{height:0}},180:{offset:0,fix:{height:0}}};var $=Object.freeze({__proto__:null,checkFullscreen:function(e){C(e)},setCurrentValue:function(e){T(_[e])},getCurrentValue:function(){return L},value:_});let F={name:"baidu",0:{offset:{x:0,y:0,width:0,height:0},fix:{height:87}},90:{offset:0,fix:{height:87}},"-90":{offset:0,fix:{height:87}},270:{offset:0,fix:{height:87}},180:{offset:0,fix:{height:87}}};var P=Object.freeze({__proto__:null,checkFullscreen:function(e){C(e)},setCurrentValue:function(e){T(F[e])},getCurrentValue:function(){return L},value:F});let A={name:"lieao",0:{offset:{x:0,y:0,width:0,height:0},fix:{height:0}},90:{offset:0,fix:{height:0}},"-90":{offset:0,fix:{height:0}},270:{offset:0,fix:{height:0}},180:{offset:0,fix:{height:0}}};var B=Object.freeze({__proto__:null,checkFullscreen:function(e){C(e)},setCurrentValue:function(e){T(A[e])},getCurrentValue:function(){return L},value:A});let N={name:"unknown",0:{offset:{x:0,y:0,width:0,height:0},fix:{height:0}},90:{offset:0,fix:{height:0}},"-90":{offset:0,fix:{height:0}},270:{offset:0,fix:{height:0}},180:{offset:0,fix:{height:0}}};var M=Object.freeze({__proto__:null,checkFullscreen:function(e){C(e)},setCurrentValue:function(e){T(N[e])},getCurrentValue:function(){return L},value:N});let V={name:"chrome",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}}},S=null;var H=Object.freeze({__proto__:null,getCurrentValue:function(){return L},value:V,eventOrientation:function(e){let t=V.state;switch(S=V[e],T(S),e){case 0:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width);break;case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width}},checkFullscreen:function(e){S&&S.fix&&(globalThis.innerHeight>=e.screenHeight-S.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let z={name:"firefox",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:40}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:8}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:8}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:40}}},j=null;var D=Object.freeze({__proto__:null,getCurrentValue:function(){return L},value:z,eventOrientation:function(e){let t=z.state;switch(j=z[e],T(j),e){case 0:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width);break;case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width}globalThis.outerWidth<globalThis.innerWidth&&(globalThis.outerWidth=globalThis.innerWidth),globalThis.outerHeight<globalThis.innerHeight&&(globalThis.outerHeight=globalThis.innerHeight)},checkFullscreen:function(e){j&&j.fix&&(globalThis.innerHeight>=e.screenHeight-j.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let W={name:"uc",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:82}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:100}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:100}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:82}}},G=null;var Y=Object.freeze({__proto__:null,getCurrentValue:function(){return L},value:W,eventOrientation:function(e){let t=W.state;switch(G=W[e],T(G),e){case 0:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width);break;case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width}},checkFullscreen:function(e){e.isFullscreen=!0}});let q={name:"safari",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:32}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:16}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:16}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:32}}},K=null;var X=Object.freeze({__proto__:null,getCurrentValue:function(){return L},value:q,eventOrientation:function(e){let t=q.state;switch(K=q[e],T(K),e){case 0:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width);break;case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width}},checkFullscreen:function(e){K&&K.fix&&(globalThis.innerHeight>=e.screenHeight-K.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let J={name:"baidu",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}}},Q=null;var Z=Object.freeze({__proto__:null,getCurrentValue:function(){return L},value:J,eventOrientation:function(e){let t=J.state;switch(Q=J[e],T(Q),e){case 0:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width);break;case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width}},checkFullscreen:function(e){Q&&Q.fix&&(globalThis.innerHeight>=e.screenHeight-Q.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let ee={name:"liebao",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:24}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:24}}},te=null;var ie=Object.freeze({__proto__:null,getCurrentValue:function(){return L},value:ee,eventOrientation:function(e){let t=ee.state;switch(te=ee[e],T(te),e){case 0:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width);break;case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width}},checkFullscreen:function(e){te&&te.fix&&(globalThis.innerHeight>=e.screenHeight-te.fix.height?e.isFullscreen=!0:e.isFullscreen=!1)}});let ne={name:"unknown",0:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},90:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},"-90":{offset:{x:0,y:0,width:0,height:4},fix:{height:0}},180:{offset:{x:0,y:0,width:0,height:4},fix:{height:0}}},se=null;var ae=Object.freeze({__proto__:null,getCurrentValue:function(){return L},value:ne,eventOrientation:function(e){let t=ne.state;switch(se=ne[e],T(se),e){case 0:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width;break;case-90:case 90:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!1,t.isLandscape=!0),screen.width<screen.height?(t.screenHeight=screen.width,t.screenWidth=screen.height):(t.screenHeight=screen.height,t.screenWidth=screen.width);break;case 180:(t.usePortrait||t.useLandscape)&&(t.isPortrait=!0,t.isLandscape=!1),t.screenHeight=screen.height,t.screenWidth=screen.width}},checkFullscreen:function(e){se&&se.fix&&(globalThis.innerHeight>=e.screenHeight-se.fix.height?e.isFullscreen=!0:e.isFullscreen=!1),e.isFullscreen=!0}});function re(e){let t=!1;return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?(t=!0,e&&(e.isFullscreen=!0)):(t=!1,e&&(e.isFullscreen=!1)),t}async function oe(e){if(!document.fullscreenEnabled)return Promise.reject();let t=!1;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(e&&(e.isFullscreen=!1),document.exitFullscreen?(await document.exitFullscreen(),t=!0):document.msExitFullscreen?(await document.msExitFullscreen(),t=!0):document.mozCancelFullScreen?(await document.mozCancelFullScreen(),t=!0):document.webkitExitFullscreen&&(await document.webkitExitFullscreen(),t=!0),t&&e&&(e.isFullscreen=!1)):(document.documentElement.requestFullscreen?(await document.documentElement.requestFullscreen(),t=!0):document.documentElement.msRequestFullscreen?(await document.documentElement.msRequestFullscreen(),t=!0):document.documentElement.mozRequestFullScreen?(await document.documentElement.mozRequestFullScreen(),t=!0):document.documentElement.webkitRequestFullscreen&&(await document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),t=!0),t&&(e&&(e.isFullscreen=!0),pe.useOrientation&&globalThis.screen&&globalThis.screen.orientation&&globalThis.screen.orientation.lock&&await globalThis.screen.orientation.lock(pe.orientation.name)))}let le=!0,ce=!1;let he={oninit(e){let t=this,i=e.attrs;t.onclick=i.onclick,t.style=i.style,t.config=i.config},onbeforeremove(){},view(){let t=this,i=t.config;return e(".pointer",{style:{width:"4%",height:"10%",borderRadius:"4px 8px 8px 4px",backgroundColor:"#000",opacity:.6,position:"absolute",left:t.style.left,top:t.style.top,zIndex:900},onclick(){i&&(i.isMenu=!0,i.visible=!1),t.onclick&&t.onclick()}},e.trust('<img src="data/sys/4021bb29611b24c4.svg" class="w-100 h-100 dropshadow">'))}},ge={oninit(e){let t=e.attrs,i=this;i.event=t.event,i.tray=t.tray,i.info=t.info,i.config=t.config,i.isLeave=!1,i.config||(i.config={isMenu:ce,visible:le,flags:{fullscreen:!0,lock:!0,sound:!0,music:!0}}),i.config.flags||(i.config.flags={}),i.info||(i.info={logo:"logo.png",gameName:"test game",version:"0.0.0",mode:" test mode",token:"token"}),i.tray||(i.tray={state:{visible:!0},sound:{isMute:!1},music:{isMute:!1},screen:{isAutoScale:!0,isLock:!1},isLock:!1,isFullscreen:!1},Object.defineProperty(i.tray,"visible",{get:()=>i.tray.state.visible,set(e){i.tray.state.visible=e}}))},onbeforeremove:e=>(["animate__fadeOutLeft","animate__animated"].forEach((t=>{e.dom.classList.add(t)})),new Promise((e=>{t.setTimeout((()=>{e()}),.4)}))),onremove(){},view(){let t=this,n=t.tray,s=t.event,a=t.info,r=t.config,o=r.flags,l=i.menu||[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0];return e(".animate__fadeInLeft animate__animated",{onclick(){t.isLeave?(r.isMenu=!1,r.visible=!1,n.visible=!1):(r.visible=!1,n.visible=!0)},style:{zIndex:900,position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},e(".pv2.ph2.bg-black.[id='panel']",[e(".fl.bb.b--gray.mb2.dib.pb2.mb2.w-100.rwdPanelHeader",[e("table.pa2.ml4.dib.br2.bg-black.white.rwdAppInfo",e("tbody.rwd-lh",[e("tr",[e("td",w("gameName")),e("td"," : "),e("td.blue",a.gameName)]),e("tr",[e("td",w("version")),e("td"," : "),e("td.blue",a.version)]),l[8]?e("tr",[e("td",w("gameMode")),e("td"," : "),e("td.blue",a.mode)]):null]))]),l[0]&&o.fullscreen&&!pe.ios?e(".",[e(".fl.w-70.pa1.ma1.rwdOpt",e(".no-underline.near-white.inline-flex",[e("img.dib.fl.mv1.rwdOptIcon.dropshadow",{alt:"FULL SCREEN",src:"data/sys/f512613ddcb62054.png"}),e(".ml3.white.mv3.f4.rwdPanelFont",w("fullscreen"))])),e(".fr.w-20.pt2.mv2.mr2.rwdToggle",{onclick(){n.isFullscreen=!n.isFullscreen,e.redraw(),oe(n).then((()=>{s&&s.fullscreen&&s.fullscreen(n.isFullscreen)}))}},e("label.switch",[e("input[name='toggle'][type='checkbox'][value='fullscreen']",{disabled:!0,checked:n.isFullscreen}),e("span.slider.round")]))]):e("."),l[1]&&o.lock?e(".",[e(".fl.w-70.pa1.ma1.rwdOpt",e(".no-underline.near-white.inline-flex",[e("img.dib.fl.mv1.rwdOptIcon.dropshadow",{alt:"LOCK SCALE",src:"data/sys/8920df5ffd5c25b0.png"}),e(".ml3.white.mv3.f4.rwdPanelFont",w("lock"))])),e(".fr.w-20.pt2.mv2.mr2.rwdToggle",{onclick(){n.isLock=!n.isLock,n.update&&n.update(n),e.redraw(),s&&s.lock&&s.lock(n.isLock)}},e("label.switch",[e("input[name='toggle'][type='checkbox'][value='lock']",{disabled:!0,checked:n.isLock}),e("span.slider.round")]))]):e("."),l[2]&&o.music?e(".",[e(".fl.w-70.pa1.ma1.rwdOpt",e(".no-underline.near-white.inline-flex",[e("img.h-100.dib.fl.mv1.rwdOptIcon.dropshadow[alt='MUSIC'][src='data/sys/ddb7103e5eca70e6.png']"),e(".ml3.white.mv3.f4.rwdPanelFont",w("music"))])),e(".fr.w-20.pt2.mv2.mr2.rwdToggle",{onclick(){n.music.isMute=!n.music.isMute,e.redraw(),s&&s.music&&s.music(n.music)}},e("label.switch",[e("input[name='toggle'][type='checkbox'][value='music']",{disabled:!0,checked:!n.music.isMute}),e("span.slider.round")]))]):e("."),l[3]&&o.sound?e(".",[e(".fl.w-70.pa1.ma1.rwdOpt",e(".no-underline.near-white.inline-flex",[e("img.dib.fl.mv1.rwdOptIcon.dropshadow[alt='SOUND'][src='data/sys/ddb7103e5eca70e6.png']"),e(".ml3.white.mv3.f4.rwdPanelFont",w("sound"))])),e(".fr.w-20.pt2.mv2.mr2.rwdToggle",e("label.switch",[e("input[name='toggle'][type='checkbox'][value='sound']",{checked:!n.sound.isMute,onclick(){n.sound.isMute=!n.sound.isMute,s&&s.sound&&s.sound(n.sound)}}),e("span.slider.round")]))]):e("."),l[4]?e(".fl.w-100.pa2.pt3.bt.b--gray.mt2.rwdBtn",{onclick(){pe.useFocus=!0}},e(".w-100 no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma1 tc br1 pa1 border-box pointer",[e("img.dib h2 w2[src='data/sys/35b95e6d1d3ebf48.png']"),e(".w-100.f3.white.mv1.dib.noselect.rwdPanelFont",w("history"))])):e("."),l[5]?e(".fl.w-100.pa2",{onclick(){pe.useFocus=!0}},e(".w-100 no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma1 tc br1 pa1 border-box pointer",[e("img.dib h2 w2[src='data/sys/2357769f78f010b1.png']"),e(".w-100.f3.white.mv1.dib.noselect",w("deposit"))])):e("."),l[6]?e(".fl.w-100.pa2",{onclick(){globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload()),pe.useFocus=!0}},e(".w-100 no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma1 tc br1 pa1 border-box pointer",[e("img.dib h2 w2[src='data/sys/94615eed5b8c0616.png']"),e(".w-100.f3.white.mv1.dib.noselect",w("back"))])):e("."),l[7]?e(".fl.w-100.pa2",{onclick(){if(pe.useFocus=!0,t.isLeave=!0,a.iframe){let e=a.iframe.contentDocument||a.iframe.contentglobalThis.document;e?(e.open(),e.write(""),e.close()):a.iframe.srcdoc="about:blank"}globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload())}},e(".w-100 no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma1 tc br1 pa1 border-box pointer",[e("img.dib h2 w2[src='data/sys/fe342b264ea95dbb.png']"),e(".w-100.f3.white.mv1.dib.noselect",w("lobby"))])):e("."),e(".")]))}};function ue(e,t){return null!=e?e:t()}function de(e){let t,i=e[0],n=1;for(;n<e.length;){const s=e[n],a=e[n+1];if(n+=2,("optionalAccess"===s||"optionalCall"===s)&&null==i)return;"access"===s||"optionalAccess"===s?(t=i,i=a(i)):"call"!==s&&"optionalCall"!==s||(i=a(((...e)=>i.call(t,...e))),t=void 0)}return i}let pe={},me={resizeTimer:null,timer:null,eventDelay:260},fe=null,be={name:null,angle:0,isTrigger:!1},we=null;function ye(e){switch(we&&we.setCurrentValue&&we.setCurrentValue(e),e){case 0:(pe.usePortrait||pe.useLandscape)&&(pe.isPortrait=!0,pe.isLandscape=!1),pe.screenHeight=screen.height,pe.screenWidth=screen.width;break;case 270:case-90:case-270:case 90:(pe.usePortrait||pe.useLandscape)&&(pe.isPortrait=!1,pe.isLandscape=!0),screen.width<screen.height?(pe.screenHeight=screen.width,pe.screenWidth=screen.height):(pe.screenHeight=screen.height,pe.screenWidth=screen.width);break;case-180:case 180:(pe.usePortrait||pe.useLandscape)&&(pe.isPortrait=!0,pe.isLandscape=!1),pe.screenHeight=screen.height,pe.screenWidth=screen.width}globalThis.parent===window&&globalThis.scrollTo(0,pe.currentY)}function ve(){pe.isPortrait=!1,pe.isLandscape=!1;let e=0;e=window.matchMedia("(orientation: portrait)").matches?0:90,0===e&&(e=globalThis.screen.orientation&&"number"==typeof globalThis.screen.orientation.angle?globalThis.screen.orientation.angle:parseInt(globalThis.orientation)),be.angle=e,fe?fe(e):we&&we.eventOrientation?we.eventOrientation(e):ye(e),globalThis.parent===window&&globalThis.scrollTo(0,pe.currentY)}function xe(i){me.timer&&(t.remove(me.timer),me.timer=null),be.isTrigger=!0,e.redraw(),me.timer=t.setTimeout((()=>{be.isTrigger=!1,ve(),Ce()}),.001*me.eventDelay)}function Le(e){if(pe.isMobile&&!e.isChild&&we&&we.getCurrentValue){let t=we.getCurrentValue();if(t){let i=t.offset;e.left=0,e.top=0,e.width=globalThis.innerWidth,e.height=globalThis.innerHeight,"number"==typeof i?e.height=globalThis.innerHeight-i:i&&("number"==typeof i.x&&(e.left=i.x),"number"==typeof i.y&&(e.top=i.y),"number"==typeof i.width&&(e.width=globalThis.innerWidth-i.width),"number"==typeof i.height&&(e.height=globalThis.innerHeight-i.height))}else e.left=0,e.top=0,e.width=globalThis.innerWidth,e.height=globalThis.innerHeight;e.left+="px",e.top+="px",e.width+="px",e.height+="px"}}function Te(e){let t=e.game,i={x:1,y:1},n=screen.width,s=screen.height;pe.isMobile?(n=globalThis.innerWidth,s=globalThis.innerHeight,pe.useFullscreen||(n=globalThis.innerWidth,s=globalThis.innerHeight),pe.ios&&(s=globalThis.innerHeight,n=globalThis.innerWidth)):(n=globalThis.innerWidth,s=globalThis.innerHeight),t.portrait&&t.landscape&&(n>s?(t.width=t.landscape.width||512,t.height=t.landscape.height||512):(t.width=t.portrait.width||512,t.height=t.portrait.height||512)),e.fix&&(n=parseInt(e.fix.width),s=parseInt(e.fix.height));let a={x:0,y:0};e.left=0,e.top=0;let r=e.reference;r&&(a.x=r.left*n,a.y=r.top*s,n*=r.width,s*=r.height),n-t.width<0?(e.width=n,i.x=n/t.width):e.width=t.width,s-t.height<0?(e.height=s,i.y=s/t.height):e.height=t.height,i.x<i.y?e.height=t.height*i.x:i.x>i.y&&(e.width=t.width*i.y);let o=e.anchor;if(o){let t=(n-e.width)*ue(o.x,(()=>.5)),i=(s-e.height)*ue(o.y,(()=>.5));e.left=a.x+t,e.top=a.y+i}if(e.useCenter){let t=0,i=0;"boolean"==typeof e.useCenter?(i=.5*(s-e.height),i<0&&(i=0),t=.5*(n-e.width),t<0&&(t=0)):(e.useCenter.vertical&&(i=.5*(s-e.height),i<0&&(i=0)),(e.useCenter.horizontal||e.useCenter.left)&&(t=.5*(n-e.width),t<0&&(t=0))),e.left=a.x+t,e.top=a.y+i}e.absPos&&("number"==typeof e.absPos.top?e.top=e.absPos.top:"number"==typeof e.absPos.bottom&&(e.top=s+e.absPos.bottom),"number"==typeof e.absPos.left?e.left=e.absPos.left:"number"==typeof e.absPos.right&&(e.left=n+e.absPos.right)),t.eventResize&&t.eventResize({left:e.left,top:e.top,width:e.width,height:e.height}),e.eventResize&&e.eventResize({width:globalThis.innerWidth,height:globalThis.innerHeight}),e.left+="px",e.top+="px",e.width+="px",e.height+="px"}function Ce(i){if(!be.isTrigger&&!pe.disableResize){if(!i)return!!be.isTrigger||void(me.resizeTimer||(pe.isResize=!0,e.redraw(),me.resizeTimer=t.setTimeout((()=>{t.remove(me.resizeTimer),me.resizeTimer=null,n()}),.3)));n()}function n(){pe.isMobile&&globalThis.parent===window&&globalThis.scrollTo(0,pe.currentY),t.setTimeout((()=>{we&&we.checkFullscreen&&pe.useFullscreen&&we.checkFullscreen(pe);let t=globalThis.scene;if(pe.settingList.forEach((i=>{if(i){if(!i.isLock)return Le(i),e.redraw(),!0;if(Te(i),t){let e=t[i.id];if(e){let t=e.localEvent;if(t&&t.resize){let e={isMobile:pe.isMobile};e.width=globalThis.innerWidth,e.height=globalThis.innerHeight,e.setting=i,t.resize(e)}}}e.redraw()}})),t){Object.getOwnPropertyNames(t).forEach((e=>{let i=t[e];if(i){let e=i.localEvent;if(e&&e.resize){let t={isMobile:pe.isMobile};t.width=globalThis.innerWidth,t.height=globalThis.innerHeight,4!==i.state&&5!==i.state||e.resize(t)}}}))}pe.isResize=!1,e.redraw()}),.01)}}function Ee(e){if(de([e,"optionalAccess",e=>e.index])>=0)return-1;let t=-1;for(let i=0;i<pe.settingList.length;i+=1){pe.settingList[i]||(t=i,pe.settingList[i]=e)}return t<0&&(t=pe.settingList.length,pe.settingList.push(e)),e.isLock&&Te(e),e.index=t,t}function ke(e){if(de([e,"optionalAccess",e=>e.index])>=0){let t=e.index;t<pe.settingList.length&&(pe.settingList[t]=null),delete e.index}}function Re(e){pe.disableResize=e}pe.ios=!1,pe.useOrientation=!1,pe.usePortrait=!1,pe.useLandscape=!1,pe.isMobile=!1,pe.mobileReady=null,pe.useFullscreen=!1,pe.isFullscreen=!1,pe.isPortrait=!1,pe.isLandscape=!1,pe.isTouchOnce=!1,pe.isResize=!1,pe.currentY=0,pe.screenWidth=screen.width,pe.screenHeight=screen.height,pe.screenUnit="px",pe.orientation=be,pe.isTouchDown=!1,pe.useFocus=!1,pe.disableResize=!1,pe.settingList=[];let Oe=!1;let Ie=!1;function Ue(){return Ie}let _e="title";function $e(){return _e}let Fe="message";function Pe(){return Fe}function Ae(t){_e=t.title,Fe=t.msg,Ie=!0,e.redraw()}function Be(){Ie=!1,e.redraw()}var Ne=Object.freeze({__proto__:null,isVisible:Ue,getTitle:$e,getMessage:Pe,show:Ae,hide:Be});let Me=null,Ve={oninit(e){let t=e.attrs;this.style=t.style,this.complete=t.complete,this.logo=null},oncreate(t){let i=this,n=t.attrs,s=t.dom,a=n.url,r="logo",o=new globalThis.Loader;o.add(r,a,{crossOrigin:!1}),o.load(((t,n)=>{let a=n.logo.data;a.style.position="absolute",a.style.left="0%",a.style.top="0%",a.style.width="100%",a.style.height="100%",i.logo=a,s.appendChild(a),e.redraw(),i.complete&&i.complete()}))},view(){return e(".",{style:this.style})}},Se={timeBase:1,oninit(e){let t=e.attrs;this.class=t.class||"ba b--light-blue animate__animated animate__bounceIn",this.style=t.style||{left:"0%",top:"0%",width:"100%",height:"100%"},this.info=t.info,this.serve=t.serve,this.config=t.config||{width:300,height:200,resolution:1,antialias:!1,transparent:!0},this.id=t.id,this.group=t.group,this.title=t.title||"標題",this.logo=t.logo,this.game=null,this.eventClass={current:"ba b--dotted bw1 white-50",onmouseenter:"ba b--dotted bw2 white-50",onmouseleave:"ba b--dotted bw1 white-50"}},onbeforeremove(e){let i=this;return i.game&&i.game.pause(),["animate__animated","animate__lightSpeedOut"].forEach((t=>{e.dom.classList.add(t)})),new Promise((e=>{t.setTimeout(e,.4)}))},view(){let t=this,i=t.eventClass;return e(".",{class:t.class,style:t.style},[e(".game-card-title",t.title),e(Ve,{class:"game-card-view ba b--light-gray",style:{zValue:0,position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"},url:t.logo,complete(){}}),e(".",{onclick(){globalThis.Howl&&(Me||(Me=new globalThis.Howl({src:["data/f82550ea2e80cd97.wav"]}),Me.volume(.01)),Me.play()),gi(!1),jt({serve:t.serve,id:t.id,group:t.group})},onmouseenter(){i.current=i.onmouseenter,e.redraw()},onmouseleave(){i.current=i.onmouseleave,e.redraw()},class:i.current,style:{position:"absolute",left:"10%",top:"10%",width:"80%",height:"75%"}}),e(".game-card-download",{onclick(){Ae({yesno:!1,title:"connecting",msg:"disconnect"})}},[e.trust(`<div class="no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma2 tc br2 pa2">\n    <svg fill="#77ff77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n    <span class="f6 ml3 pr2">${w("download")}</span>\n  </div>`)]),e(".game-card-stop",{onclick(){oi()}},[e.trust(`<div class="no-underline near-white bg-animate bg-near-black hover-bg-gray inline-flex items-center ma2 tc br2 pa2">\n    <svg fill="#77ff77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n    <span class="f6 ml3 pr2">${w("stop")}</span>\n  </div>`)])])}},He={left:"0px",top:"0px",width:"300px",height:"200px"},ze={},je={},De=null;function We(e){return ze[e]||(ze[e]={}),je=ze[e],je}function Ge(e,s,r){let o={};function l(){let e=i.registration;e&&e.active&&navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage(o):t.setTimeout(l,.05)}let c=i.version||"1.0.0",h=!1,g=null;return g=new Promise((t=>{if(!e||!s)return void t(null);function g(){let g=`config/${s}/${e}/gamecard.txt?v=${c}`,u=`config/${s}/${e}/cache.txt`;if(r){let t=r;"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),g=`${t}/config/${s}/${e}/gamecard.txt?v=${c}`,u=`${t}/config/${s}/${e}/cache.txt`}else g=`config/${s}/${e}/gamecard.txt?v=${c}`,u=`config/${s}/${e}/cache.txt`;o.cacheName=`${s}${e}`,o.url=u,i.useCache&&l(),fetch(g,{headers:{"Content-Type":"text/plain"}}).then((e=>e.ok?e.text():null)).then((e=>{if(!e)return;let s={},o=new String(e),l=o.indexOf("{");if(l>=0&&l<=9){let e=JSON.parse(o);if(!e.options||!e.options.overview){let e=a;i.useOptions||(n[e.OVERVIEW_LOGO]=1,n[e.OVERVIEW_ANIMATION]=0,n[e.OVERVIEW_BACKGROUND]=0,n[e.OVERVIEW_PROGRESS]=1)}if(e.templateVersion="slot.2.1",s.gameCard=e,r){let e=r;"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),s.gameCard.baseURL=`${e}/`}h=!0,t(s)}})).catch((e=>{}))}let u,d;if(r){let t=r;"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),u=`${t}/${s}/${e}/config/gamecard.txt?v=${c}`,d=`${t}/${s}/${e}/config/cache.txt`}else u=`${i.projectURL}${s}/${e}/config/gamecard.txt?v=${c}`,d=`${i.projectURL}${s}/${e}/config/cache.txt`;o.cacheName=`${s}${e}`,o.url=d,i.useCache&&l(),fetch(u,{headers:{"Content-Type":"text/plain"}}).then((e=>e.ok?e.text():(g(),null))).then((e=>{if(!e)return;let n={},s=new String(e),a=s.indexOf("{");if(a>=0&&a<=9){if(n.gameCard=JSON.parse(s),r)if(n.gameCard.baseURL){let e=r;"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),n.gameCard.baseURL=e+n.gameCard.baseURL.replace(i.projectURL,"/")}else n.gameCard.baseURL=r;else{let e=globalThis.location.origin;n.gameCard.baseURL?n.gameCard.baseURL.indexOf("://")<0&&(n.gameCard.baseURL=e+n.gameCard.baseURL):n.gameCard.baseURL=globalThis.location.origin+"/"}h=!0,t(n)}if(h)return!0;g()})).catch((()=>{g()}))})),g}function Ye(t,i,n){let a=Date.now(),r="";s&&(r="test/data/gameList.txt?v="+a),i[t]=[],n[t]=0;let o=0;e.request(r).then((e=>{i[t]=e||[],e.forEach((e=>{if(!e)return;e.isSub&&(o+=1);let t=We(e.group);if(globalThis.BASE_URL)if(e.baseURL){let t=globalThis.BASE_URL;"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),e.baseURL=t+e.baseURL}else e.baseURL=globalThis.BASE_URL;else{let t=globalThis.location.origin;e.baseURL?e.baseURL=t+e.baseURL:e.baseURL=globalThis.location.origin+"/"}t[e.id]=e})),n[t]=e.length-o}))}function qe(e){const t=e.key||e.code;if(s)switch(t){case"r":case"R":if(De){globalThis.scene[De.id].reload({game:De.appConfig,group:De.group,id:De.id,tablekey:"abcd1234"})}}}function Ke(e){e.key||e.code}let Xe={oninit(){let e={},t={};s?Ye("test",e,t):(Ye("slot",e,t),Ye("video",e,t),Ye("game",e,t)),this.group=e,this.displayCount=t,globalThis.addEventListener("keydown",qe),globalThis.addEventListener("keyup",Ke)},view(){let t=this;return s?e(".gameCardList",{style:{left:"0%",top:"0%",width:"100%",height:"100%"}},e(".",{style:{position:"absolute",left:"0%",top:"40%",width:"100%",height:"25%"}},"group zzzz",e(".layout",{style:{left:"0%",marginTop:"0px",width:25*t.displayCount.game+"%",height:"100%"}},t.group.test?t.group.test.map((t=>{if(!t||t.isSub)return e(".");let n=t.baseURL||"",s=t.images;return i.useAvif?s.v2&&(s=s.v2):s.v1&&(s=s.v1),e(".",{style:He},[e(Se,{id:t.id,group:t.group,serve:{game:t.id,group:t.group},logo:n+s.logo,title:`${t.name[y()]}(${t.appConfig})`})])})):e(".")))):e(".gameCardList",{style:{left:"0%",top:"0%",width:"100%",height:"100%"}},e(".",{style:{position:"absolute",left:"0%",top:"65%",width:"100%",height:"25%",overflowX:"scroll"}},"group game",e(".layout",{style:{left:"0%",marginTop:"0px",width:25*t.displayCount.game+"%",height:"100%"}},t.group.game.map((t=>{if(!t||t.isSub)return e(".");let i=t.baseURL||"";return e(".",{style:{left:"0%",top:"0%",width:"90%",height:"100%"}},e(Se,{id:t.id,group:"game",serve:{game:t.id,group:"game"},logo:i+t.images.logo,title:t.name[y()]}))})))),e(".",{style:{position:"absolute",left:"0%",top:"5%",width:"100%",height:"25%",overflowX:"scroll"}},"group slot",e(".layout",{style:{left:"0%",marginTop:"0px",width:25*t.displayCount.slot+"%",height:"100%"}},t.group.slot.map((t=>{if(!t&&t.isSub)return e(".");let i=t.baseURL||"";return e(".",{style:{left:"0%",top:"0%",width:"100%",height:"100%"}},[e(Se,{id:t.id,group:"slot",serve:{game:t.id,group:"slot"},logo:i+t.images.logo,title:t.name[y()]})])})))),e(".",{style:{position:"absolute",left:"0%",top:"35%",width:"100%",height:"25%",overflowX:"scroll"}},"group video",e(".layout",{style:{left:"0%",marginTop:"0px",width:25*t.displayCount.video+"%",height:"100%"}},t.group.video.map((t=>{if(!t||t.isSub)return e(".");let i=t.baseURL||"";return e(".",{style:{left:"0%",top:"0%",width:"100%",height:"80%"}},[e(Se,{id:t.id,group:"video",serve:{game:t.id,group:"video"},logo:i+t.images.logo,title:t.name[y()]})])})))))}};
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var Je=Object.prototype.toString,Qe=Array.isArray||function(e){return"[object Array]"===Je.call(e)};function Ze(e){return"function"==typeof e}function et(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tt(e,t){return null!=e&&"object"==typeof e&&t in e}var it=RegExp.prototype.test;var nt=/\S/;function st(e){return!function(e,t){return it.call(e,t)}(nt,e)}var at={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var rt=/\s*/,ot=/\s+/,lt=/\s*=/,ct=/\s*\}/,ht=/#|\^|\/|>|\{|&|=|!/;function gt(e){this.string=e,this.tail=e,this.pos=0}function ut(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function dt(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}gt.prototype.eos=function(){return""===this.tail},gt.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},gt.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},ut.prototype.push=function(e){return new ut(e,this)},ut.prototype.lookup=function(e){var t,i,n,s=this.cache;if(s.hasOwnProperty(e))t=s[e];else{for(var a,r,o,l=this,c=!1;l;){if(e.indexOf(".")>0)for(a=l.view,r=e.split("."),o=0;null!=a&&o<r.length;)o===r.length-1&&(c=tt(a,r[o])||(i=a,n=r[o],null!=i&&"object"!=typeof i&&i.hasOwnProperty&&i.hasOwnProperty(n))),a=a[r[o++]];else a=l.view[e],c=tt(l.view,e);if(c){t=a;break}l=l.parent}s[e]=t}return Ze(t)&&(t=t.call(this.view)),t},dt.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},dt.prototype.parse=function(e,t){var i=this.templateCache,n=e+":"+(t||pt.tags).join(":"),s=void 0!==i,a=s?i.get(n):void 0;return null==a&&(a=function(e,t){if(!e)return[];var i,n,s,a=!1,r=[],o=[],l=[],c=!1,h=!1,g="",u=0;function d(){if(c&&!h)for(;l.length;)delete o[l.pop()];else l=[];c=!1,h=!1}function p(e){if("string"==typeof e&&(e=e.split(ot,2)),!Qe(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(et(e[0])+"\\s*"),n=new RegExp("\\s*"+et(e[1])),s=new RegExp("\\s*"+et("}"+e[1]))}p(t||pt.tags);for(var m,f,b,w,y,v,x=new gt(e);!x.eos();){if(m=x.pos,b=x.scanUntil(i))for(var L=0,T=b.length;L<T;++L)st(w=b.charAt(L))?(l.push(o.length),g+=w):(h=!0,a=!0,g+=" "),o.push(["text",w,m,m+1]),m+=1,"\n"===w&&(d(),g="",u=0,a=!1);if(!x.scan(i))break;if(c=!0,f=x.scan(ht)||"name",x.scan(rt),"="===f?(b=x.scanUntil(lt),x.scan(lt),x.scanUntil(n)):"{"===f?(b=x.scanUntil(s),x.scan(ct),x.scanUntil(n),f="&"):b=x.scanUntil(n),!x.scan(n))throw new Error("Unclosed tag at "+x.pos);if(y=">"==f?[f,b,m,x.pos,g,u,a]:[f,b,m,x.pos],u++,o.push(y),"#"===f||"^"===f)r.push(y);else if("/"===f){if(!(v=r.pop()))throw new Error('Unopened section "'+b+'" at '+m);if(v[1]!==b)throw new Error('Unclosed section "'+v[1]+'" at '+m)}else"name"===f||"{"===f||"&"===f?h=!0:"="===f&&p(b)}if(d(),v=r.pop())throw new Error('Unclosed section "'+v[1]+'" at '+x.pos);return function(e){for(var t,i=[],n=i,s=[],a=0,r=e.length;a<r;++a)switch((t=e[a])[0]){case"#":case"^":n.push(t),s.push(t),n=t[4]=[];break;case"/":s.pop()[5]=t[2],n=s.length>0?s[s.length-1][4]:i;break;default:n.push(t)}return i}(function(e){for(var t,i,n=[],s=0,a=e.length;s<a;++s)(t=e[s])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}(o))}(e,t),s&&i.set(n,a)),a},dt.prototype.render=function(e,t,i,n){var s=this.getConfigTags(n),a=this.parse(e,s),r=t instanceof ut?t:new ut(t,void 0);return this.renderTokens(a,r,i,e,n)},dt.prototype.renderTokens=function(e,t,i,n,s){for(var a,r,o,l="",c=0,h=e.length;c<h;++c)o=void 0,"#"===(r=(a=e[c])[0])?o=this.renderSection(a,t,i,n,s):"^"===r?o=this.renderInverted(a,t,i,n,s):">"===r?o=this.renderPartial(a,t,i,s):"&"===r?o=this.unescapedValue(a,t):"name"===r?o=this.escapedValue(a,t,s):"text"===r&&(o=this.rawValue(a)),void 0!==o&&(l+=o);return l},dt.prototype.renderSection=function(e,t,i,n,s){var a=this,r="",o=t.lookup(e[1]);if(o){if(Qe(o))for(var l=0,c=o.length;l<c;++l)r+=this.renderTokens(e[4],t.push(o[l]),i,n,s);else if("object"==typeof o||"string"==typeof o||"number"==typeof o)r+=this.renderTokens(e[4],t.push(o),i,n,s);else if(Ze(o)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");null!=(o=o.call(t.view,n.slice(e[3],e[5]),(function(e){return a.render(e,t,i,s)})))&&(r+=o)}else r+=this.renderTokens(e[4],t,i,n,s);return r}},dt.prototype.renderInverted=function(e,t,i,n,s){var a=t.lookup(e[1]);if(!a||Qe(a)&&0===a.length)return this.renderTokens(e[4],t,i,n,s)},dt.prototype.indentPartial=function(e,t,i){for(var n=t.replace(/[^ \t]/g,""),s=e.split("\n"),a=0;a<s.length;a++)s[a].length&&(a>0||!i)&&(s[a]=n+s[a]);return s.join("\n")},dt.prototype.renderPartial=function(e,t,i,n){if(i){var s=this.getConfigTags(n),a=Ze(i)?i(e[1]):i[e[1]];if(null!=a){var r=e[6],o=e[5],l=e[4],c=a;0==o&&l&&(c=this.indentPartial(a,l,r));var h=this.parse(c,s);return this.renderTokens(h,t,i,c,n)}}},dt.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},dt.prototype.escapedValue=function(e,t,i){var n=this.getConfigEscape(i)||pt.escape,s=t.lookup(e[1]);if(null!=s)return"number"==typeof s&&n===pt.escape?String(s):n(s)},dt.prototype.rawValue=function(e){return e[1]},dt.prototype.getConfigTags=function(e){return Qe(e)?e:e&&"object"==typeof e?e.tags:void 0},dt.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!Qe(e)?e.escape:void 0};var pt={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){mt.templateCache=e},get templateCache(){return mt.templateCache}},mt=new dt;pt.clearCache=function(){return mt.clearCache()},pt.parse=function(e,t){return mt.parse(e,t)},pt.render=function(e,t,i,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((Qe(s=e)?"array":typeof s)+'" was given as the first argument for mustache#render(template, view, partials)'));var s;return mt.render(e,t,i,n)},pt.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return at[e]}))},pt.Scanner=gt,pt.Context=ut,pt.Writer=dt;let ft={oninit(e){let t=e.attrs;this.url=t.url,this.manager=t.manager,this.setting={id:"children",isLock:!1,useCenter:!1,left:"0%",top:"0%",width:"100%",height:"100%",game:{width:1024,height:1024},reference:{left:0,top:0,width:1,height:1}},Ee(this.setting)},oncreate(e){let i=e.instance.children[0].dom;t.setTimeout((()=>{Re(!0),i.focus()}),.2)},view(){let t=this,i=t.setting;return e(".rwdPanelHeader",{style:{position:"absolute",left:i.left,top:i.top,backgroundColor:"rgba(0,0,0,1)",zIndex:950,opacity:1,width:i.width,height:i.height}},e("iframe",{src:t.url,scrolling:"yes",frameborder:0,style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}}),e(".fl.tc.pv4.bg-black.hover-bg-gray",{style:{position:"absolute",left:"5%",top:"0%",width:"90%",height:"10%",opacity:.75,cursor:"pointer"},onclick(){Re(!1),t.manager.childrenVisible=!1,t.url=""}},e(".inline-flex.white.border-box.pointer",`${w("close")}`)))}};function bt(e){let t,i=e[0],n=1;for(;n<e.length;){const s=e[n],a=e[n+1];if(n+=2,("optionalAccess"===s||"optionalCall"===s)&&null==i)return;"access"===s||"optionalAccess"===s?(t=i,i=a(i)):"call"!==s&&"optionalCall"!==s||(i=a(((...e)=>i.call(t,...e))),t=void 0)}return i}const wt=0,yt=6,vt=1,xt=3,Lt=4,Tt=5;let Ct={oninit(){this.options={}},oncreate(n){let a=this;a.isIframeLoaded=!1,a.isIframeInit=!1;let u,d=Math.round(performance.now());a.timestamp=d,a.checkItem=null;let p={isFirstTime:!0,useVideo:!1,isCheckData:!1,isChild:!1,isGame:!0,isCreate:!1,isBusy:!0,rendered:null,disable:!0,sysTray:null,trayVisible:!1,childrenVisible:!1,currentUrl:"",useCenter:!0,position:"absolute",left:"25%",top:"25%",width:"50%",height:"50%"},m={state:{visible:!0},sound:{isMute:!1},music:{isMute:!1},screen:{isAutoScale:!0,isLock:!1},isLock:!1,isFullscreen:!1};Object.prototype.hasOwnProperty.call(m,"visible")||Object.defineProperty(m,"visible",{get:()=>m.state.visible,set(t){p.mode!==r.DEMO&&(m.state.visible=t,p.sysTray&&(t?(p.sysTray.isMenu=!1,p.sysTray.visible=!0):(p.sysTray.isMenu=!1,p.sysTray.visible=!1),e.redraw()))}});let f=a.options,b=n.attrs;if(a.currentBaseURL=null,b&&(a.checkItem=b.checkItem,a.currentBaseURL=b.currentBaseURL,p.left=b.left||"25%",p.top=b.top||"25%",p.width=b.width||"50%",p.height=b.height||"50%",p.reference=b.reference,p.fix=b.fix,p.isChild=b.isChild,p.isCheckData=b.isCheckData,b.sysTray?p.sysTray={visible:!0,isMenu:!1,flags:b.sysTray.flags,style:{left:b.sysTray.left||"0px",top:b.sysTray.top||"0px"}}:p.sysTray=null,u=b.config,a.ctrlEvent=b.ctrlEvent),m.visible=!1,!u)return;let v=y();p.isCreate=u.isCreate,p.templateVersion=u.scene.templateVersion,"slot.2.1"===p.templateVersion&&"en-us"===y()&&(v="en"),p.id=u.id,p.mode=u.mode,p.name=u.scene.name[v],p.group=u.scene.group||"game",p.appName=u.scene.app,p.appHash=u.scene.appHash,p.appConfig=u.scene.appConfig,p.devMode=u.scene.devMode,p.dependence=u.scene.dependence,p.background=null,p.backgroundCSS=null,a.appTimeout=s?null:t.setTimeout((()=>{f.initGame=null,a.appTimeout=null,e.redraw(),t.setTimeout((()=>{i.requestReload=!1,i.isReload=!0,ri({url:a.currentBaseURL,group:p.group,game:p.appConfig})}),.1)}),10);let x=`${p.group}${p.appConfig}`,L={category:"遊戲程式 "+(a.currentBaseURL||"主網址"),getLabel:()=>x},T={category:"遊戲場景 "+(a.currentBaseURL||"主網址"),getLabel:()=>x},C={category:"建立遊戲 "+(a.currentBaseURL||"主網址"),getLabel:()=>x};i.isCheckGameCDN||(o.loadBegin(C),o.loadBegin(L)),p.anim={element:null,isPlay:!1},p.display="inline",p.opacity=0,p.zIndex=1,b.updateStyle&&b.updateStyle(p);let E=u.scene.images;i.useAvif?E.v2&&(E=E.v2):E.v1&&(E=E.v1),p.game={id:u.id,group:u.scene.group,mode:u.mode,decimal:u.decimal,name:p.name,logo:E&&E.logo,theOther:u.scene.theOther,version:u.scene.version,baseURL:u.scene.baseURL||"",langID:v},E&&Object.prototype.hasOwnProperty.call(E,"useBackground")&&E.background&&(p.isCheckData||(p.background=`${p.game.baseURL}${E.background}`),"string"==typeof E.useBackground?p.backgroundCSS=`${E.useBackground}`:(E.useBackground,p.backgroundCSS=null)),u.scene.theOther&&u.scene.theOther.id&&(p.game.theOther=u.scene.theOther.id),u.scene.screen&&(p.isLock=u.scene.screen.isLock,p.game.width=u.scene.screen.width||640,p.game.height=u.scene.screen.height||960,p.game.portrait=u.scene.screen.portrait,p.game.landscape=u.scene.screen.landscape,pe.isMobile,m.isLock=p.isLock),p.images=E,p.isCheckData||Ee(p);let k=null,R=u.loadingEvent,O=wi(),I=null,U=O.scene[p.id]={templateVersion:p.templateVersion,state:wt,event:{create:null,play:null,pause:null,enter:null,leave:null,focus:null,blur:null,lock:null,fullscreen:null,resize:null,music:null,sound:null},info:{isChild:p.isChild,baseURL:p.game.baseURL||"",id:p.game.id,name:p.game.name,group:p.game.group,theOther:p.game.theOther,width:p.game.width,height:p.game.height,decimal:p.game.decimal,mode:p.game.mode,langID:p.game.langID},gamecard:u.scene,loadingEvent:{title:p.name,start(){i.isCheckGameCDN||o.loadBegin(T),R.start&&R.start()},resBegin(e){R.resBegin&&R.resBegin(e)},resEnd(e){R.resEnd&&R.resEnd(e)},sceneResBegin(e){R.sceneResBegin&&R.sceneResBegin(e)},sceneResLoading(e){R.sceneResLoading&&R.sceneResLoading(e)},sceneResEnd(e){R.sceneResEnd&&R.sceneResEnd(e)},finish(){U.state=Lt,i.isCheckGameCDN||(o.loadEnd(T),o.log({label:x,category:"遊戲場景 "+(a.currentBaseURL||"主網址")}),o.loadEnd(C)),R.finish&&R.finish(U)}},callWeb(e){"string"==typeof e?O.document&&O.document.location&&O.document.location.replace?O.document.location.replace(e||"about:blank"):O.location.href=e||"about:blank":oi(e)},open(t){p.childrenVisible=!0,p.currentUrl=t,e.redraw()},setDisableResize(e){Re(e)},createTheOther(n,s=0){!function(n,s=0){let a=n,r=s;"number"==typeof n&&(a=s,r=n);let o=a.groupName||Vt,l=a.sceneID,c=globalThis.BASE_URL;Ge(l,o,c).then((n=>{let s=Bt[r],o=n.gameCard;if(!o)return;function l(e){i.isReload||a.finish&&a.finish(e)}a.reloadConfig&&(o.reloadConfig=a.reloadConfig),s||(s={style:At,reference:{left:0,top:0,width:1,height:1}});let c={com:Ht,attrs:{loadingEvent:a.loadingEvent,index:r,style:a.style||s.style,reference:a.reference||s.reference,absPos:a.absPos||s.absPos,id:a.id,scene:o,isChild:!0,finish:l}};i.isReload||(null!==St[r]?(St[r]=null,e.redraw(),t.setTimeout((()=>{St[r]=c,e.redraw()}),.1)):(St[r]=c,e.redraw()))}))}(n,s)},destroyTheOther(t){St[t]=null,e.redraw(),O.scene[t]=null},callTheOther(e,t){let i,n=!1,s=O.scene[e];return s&&s.state===Lt&&(U.game.debug=!1,U.state=Lt,U.info.isChild?(U.localEvent.pause(),U.localEvent.hide()):U.localEvent.pause(),i=t||{what:" is this ?"},i.from=U.info.id,n=!0,s.localEvent.pause(),s.state=Tt,s.templateVersion,s.setting.background=t&&t.background||"rgba(0,0,0,0)",s.localEvent.show(),s.localEvent.play(i)),n},checkTheOther(e){let t=!1,i=O.scene[e];return i&&i.state===Lt&&(t=!0),t},getTheOther:e=>O.scene[e],reload(n){if(i.isReload)return;li(),i.isReload=!0;let s=n;s||(s={game:p.appConfig,group:p.group}),U.game.stop(),U.game.reset();let r=()=>{f.initGame=null,U.game=null,a.ctrlEvent&&a.ctrlEvent.reload&&a.ctrlEvent.reload(),e.redraw(),t.setTimeout((()=>{(async function(){return new Promise((e=>{Object.getOwnPropertyNames(globalThis.scene).forEach((e=>{let t=globalThis.scene[e];t&&(delete t.event,delete t.loadingEvent),delete globalThis.scene[e]})),globalThis.scene={},ui({oncreate(){e()},view:()=>null})}))})().then((()=>{Ge(s.game,s.group,a.currentBaseURL).then((e=>{e&&e.gameCard&&(e.gameCard.reloadConfig=n,jt({gameCard:e.gameCard,id:s.game,group:s.group}))}))}))}),.01)};Dt(),t.setTimeout((()=>{for(let e=0;e<globalThis.frames.length;e+=1){let t=globalThis.frames[e];if(t){let e=t.document;e&&(e.documentElement.innerHTML="")}}r()}),.05)},leave(e){},setMode(t){let i=r;l.mode=t,l.mode===i.REAL?f.info.mode=w("gameModeReal"):f.info.mode=w("gameModeDemo"),e.redraw()},async fullscreen(e){if(e||!re())try{return await oe(m)}catch(e){}},ready(n){if(!U.game&&n&&(U.game=n),a.appTimeout&&(t.remove(a.appTimeout),a.appTimeout=null),i.isCheckGameCDN||(o.loadEnd(L),o.log({label:x,category:"遊戲程式 "+(a.currentBaseURL||"主網址")})),a.checkItem){let t=a.checkItem,i=Math.round(performance.now());t.timeInit=i-a.timestamp,a.timestamp=i,t.state="app",t.timeReady=i-t.timestamp,t.timestamp=i,e.redraw(),t.ready&&t.ready(t)}I(U.game).then((()=>{if(U.game){let e={error(e){o.error({label:x,category:e})},log(e){"string"==typeof e?o.log({label:x,category:e}):e&&(e.label=x,o.log(e))},serviceBegin(e){if(e){if(e.getLabel=()=>x,!e.category)return;o.serviceBegin(e)}},serviceEnd(e){if(e){if(e.getLabel=()=>x,!e.category)return;o.serviceEnd(e)}},loadBegin(e){if(e){if(e.getLabel=()=>x,!e.category)return;o.loadBegin(e)}},loadEnd(e){if(e){if(e.getLabel=()=>x,!e.category)return;o.loadEnd(e)}}};U.game.report=e,U.game.localforage=c}p.isBusy=!1,p.isCreate&&U.event&&U.event.create?(s&&(U.info.console=console),U.info.setting=i,U.event.create(U.info),U.state=vt):U.state=xt}))},graphReady(){U.ready()},setOverviewVisible(t){U.gamecard.manual&&U.gamecard.manual.overview&&(Nt.overview.visible=t,e.redraw())},setEvent(e){let t=U.event;t.create=e.create||t.create,t.play=e.play||t.play,t.pause=e.pause||t.pause,t.enter=e.enter||t.enter,t.leave=e.leave||t.leave,t.focus=e.focus||t.focus,t.blur=e.blur||t.blur,t.lock=e.lock||t.lock,t.fullscreen=e.fullscreen||t.fullscreen,t.resize=e.resize||t.resize,t.music=e.music||t.music,t.sound=e.sound||t.sound}};U.state=yt,I=async e=>{let t=globalThis.location.origin;a.currentBaseURL&&(t=a.currentBaseURL),p.game.baseURL.length>0&&(t=p.game.baseURL);let n=t;n.length>0&&"/"===n[n.length-1]&&(n=n.substring(0,n.length-1));let s=p.appName;"object"==typeof s&&(s=p.appName[p.game.langID]);let r=s.split("/"),o=r.length-1;if(n=o>2?`${n}/${r[o-1]}/${r[o]}`:`${n}/${s}`,"game.5.0"===p.templateVersion){let t=await import(n),s=await t.scene.init({setting:i,baseURL:U.info.baseURL,isChild:U.info.isChild,langID:U.info.langID,gamecard:U.gamecard,game:e,nuts:h});Object.defineProperty(e,"scene",{get:()=>U});let a={create(t){O.lobby&&(e.currentUser=O.lobby.currentUser,e.command=O.lobby.net.gameCommand,e.lobby={setEvent:O.lobby.setEvent,setCommand:O.lobby.net.setLobbyCommand,CMD:O.lobby.net.CMD}),s.create&&(t.game=e,t.setting=i,s.create(t))},play(t){e.play(),s.play&&(t.game=e,t.setting=i,s.play(t))},pause(t){e.pause(),s.pause&&(t.game=e,t.setting=i,s.pause(t))},enter(t){s.enter&&(t.game=e,t.setting=i,s.enter(t))},leave(t){s.leave&&(t.game=e,t.setting=i,s.leave(t))},focus(){s.focus&&s.focus()},blur(){s.blur&&s.blur()},lock(e){s.lock&&s.lock(e)},fullscreen(e){s.fullscreen&&s.fullscreen(e)},resize(e){s.resize&&s.resize(e)},music(e){s.music&&s.music(e)},sound(e){s.sound&&s.sound(e)}};U.setEvent(a),U.game=e}};let _={isActive:!0,create(e){e.isCreate&&bt([U,"access",e=>e.event,"optionalAccess",e=>e.create])&&(s&&(U.info.console=console),U.info.setting=i,U.event.create(U.info),U.state=vt)},async enter(e){let t=e||{};t.from||(t.from=U.info.id),t.id||(t.id=p.game.id),t.game||(t.game=U.game),i.isInGame=!0,pe.isMobile&&(p.isChild||globalThis.scrollTo(0,pe.currentY)),p.isFirstTime&&(p.isFirstTime=!1,o.send()),U.game&&(O.lobby&&(U.game.command=O.lobby.net.gameCommand,U.game.table=O.lobby.table[t.id],U.game.currentUser=O.lobby.currentUser),U.game.sysTray=m,U.game.getLCS=async function(){p.useVideo=!0;let{LCS:e}=await import("./agent.984cc42d.js");return e&&e.setReport&&(e.labelName=x,e.setReport(o)),e},U.game.scanLCS=async function(e){let t={name:"串流服務",category:"檢測串流",getLabel:()=>x},i=await import("./agent.2ad02c7b.js"),n=await i.scan(e,t);return o.sendVideo(),n},U.game.getProject=async function(e,t){const i=await import("./agent.7403860c.js");return await i.getProject(e,t)},U.game.getIP=o.getIP),_.show({finish(){bt([U,"access",e=>e.event,"optionalAccess",e=>e.enter])&&(t.setting=i,U.event.enter(t)),_.blur&&_.blur(),Ce(!0);let e=null,n=O.scene[U.info.theOther];if(U.info.isChild||n||!U.info.theOther||(U.info.theOther,U.info.theOther.length>0?e={id:U.info.theOther,group:U.info.group}:"object"==typeof U.info.theOther&&(e={id:U.info.theOther.id,group:U.info.theOther.group})),null!==e){let t={style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"},reference:{left:0,top:0,width:1,height:1},groupName:e.group,id:e.id,sceneID:e.id,loadingEvent:{start(){},resBegin(){},resEnd(){},sceneResBegin(){},sceneResLoading(){},sceneResEnd(){},finish(e){e.localEvent.pause(),e.localEvent.hide()}}};U.createTheOther(t)}}})},leave(e){let t=e||{};t.from||(t.from=U.info.id),t.game||(t.game=U.game),bt([U,"access",e=>e.event,"optionalAccess",e=>e.leave])&&(t.setting=i,U.event.leave(t))},play(e){let t=e||{};t.from||(t.from=U.info.id),t.game||(t.game=U.game),bt([U,"access",e=>e.event,"optionalAccess",e=>e.play])&&(t.setting=i,U.event.play(t)),U.state=Tt,Ce(!0)},pause(e){let t=e||{};t.from||(t.from=U.info.id),t.game||(t.game=U.game),bt([U,"access",e=>e.event,"optionalAccess",e=>e.pause])&&(t.setting=i,U.event.pause(t)),U.state=Lt},focus(){_.isActive||(_.isActive=!0,bt([U,"access",e=>e.event,"optionalAccess",e=>e.focus])&&U.event.focus())},blur(){_.isActive&&(_.isActive=!1,bt([U,"access",e=>e.event,"optionalAccess",e=>e.blur])&&U.event.blur())},updateBlur(e){e&&e!==_&&_.blur();let t=b.objList;t&&Array.isArray(t)&&t.forEach((t=>{if(t){let i=t.attrs.localEvent;e!==i&&i&&i.blur&&i.blur()}}))},lock(e){p.isLock=e,p.left=b.left||"25%",p.top=b.top||"25%",p.width=b.width||"50%",p.height=b.height||"50%";let t=O.scene[U.info.theOther];t&&t.localEvent.lock(e),Ce(!0),bt([U,"access",e=>e.event,"optionalAccess",e=>e.lock])&&U.event.lock(e)},fullscreen(e){bt([U,"access",e=>e.event,"optionalAccess",e=>e.fullscreen])&&U.event.fullscreen(e)},resize(e){bt([U,"access",e=>e.event,"optionalAccess",e=>e.resize])&&U.event.resize(e)},music(e){bt([U,"access",e=>e.event,"optionalAccess",e=>e.music])&&U.event.music(e);let t=O.scene[U.info.theOther];t&&t.localEvent.music(e)},sound(e){bt([U,"access",e=>e.event,"optionalAccess",e=>e.sound])&&U.event.sound(e);let t=O.scene[U.info.theOther];t&&t.localEvent.sound(e)},show(t){let i=p.anim;if(i.element){if(i.isPlay&&(i.isPlay=!1),p.display="inline",p.disable=!1,p.zIndex=4,p.opacity=1,t){if(t.style){let e=t.style;p.zIndex=e.zIndex||4}t.finish&&t.finish()}b.updateStyle&&b.updateStyle(p),e.redraw()}},hide(t){let i=p.anim;if(i.element){if(i.isPlay&&(i.isPlay=!1),p.disable=!0,p.display="none",p.zIndex=2,p.opacity=0,t){if(t.style){let e=t.style;p.zIndex=e.zIndex||2}t.finish&&t.finish()}b.updateStyle&&b.updateStyle(p),e.redraw()}}};U.localEvent=_,U.setting=p,f.onfocus=onfocus,f.initGame=async function(e){p.anim.element=e.dom},f.event=_,f.setting=p,f.tray=m,f.objList=b.objList,f.updateStyle=b.updateStyle;let $=e(".");var F;"game.5.0"===p.templateVersion?U.gamecard.pixiConfig&&($=[e(g.game.pixi,{id:p.id,style:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"},config:U.gamecard.pixiConfig,ready:U.ready})]):$=[e("iframe",{style:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"},scrolling:"no",frameborder:0,oncreate:function(n){k=n.dom,k.scrolling="no",k.frameborder=0;let s=k.style;if(s.width="100%",s.height="100%",s.left="0%",s.top="0%",s.position="absolute",p.isChild||(s.zIndex=2,s.display="inline"),a.isIframeInit)return;a.isIframeInit=!0,f.info.iframe=k;let r=p.id,o=p.name,l=p.group,c=p.appName,h=p.appConfig||r,g=p.devMode,u=p.background,d=p.dependence,m=null;if("object"==typeof c&&(c=p.appName[p.game.langID]),"game.4.0"===p.templateVersion){let e=globalThis.location.origin;if(a.currentBaseURL&&(e=a.currentBaseURL),p.game.baseURL.length>0&&(e=p.game.baseURL),m={appName(){let t=e;t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1));let i=c.split("/"),n=i.length-1;return t=n>2?`${t}/${i[n-1]}/${i[n]}`:`${t}/${c}`,t},appIntegrity:"",id:r,name:o,group:l,jsName(){let e,t=globalThis.location.origin;return a.currentBaseURL&&(t=a.currentBaseURL),t&&t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),e=`<script src="${t}${this.pathname}"  crossorigin><\/script>`,e},globalName(){let e=`globalThis.parent.${this.libName} && `;return e+=`(globalThis.${this.libName} = globalThis.parent.${this.libName})`,e},background:u},d){let e=[],t=d;Object.getOwnPropertyNames(t).forEach((i=>{let n=t[i],s={};"string"==typeof n?(s.key=i,s.pathname=n):(s.key=i,s.pathname=n.pathname,s.integrity=n.integrity),e.push(s)})),e.length>0&&(e[e.length-1].isLast=!0),m.importmap=e}p.rendered=pt.render(pi(p.templateVersion),m)}else if("game.3.0"===p.templateVersion){let e=globalThis.location.origin;a.currentBaseURL&&(e=a.currentBaseURL);let t=e;if(t&&t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),m={appName(){let e=t;return e="debug"===g?`${e}/${c}`:`${e}/${i.projectURL}${c}`,e},appIntegrity:"",id:r,name:o,group:l,jsName(){let e,i=`${t}${this.pathname}`,n="";return this.integrity&&(n=`integrity="${this.integrity}"`),this.isLast,e=`<script src="${i}" ${n} crossorigin><\/script>`,e},background:u},d){let e=[],t=d;Object.getOwnPropertyNames(t).forEach((i=>{let n=t[i],s={};"string"==typeof n?(s.key=i,s.pathname=n):(s.key=i,s.pathname=n.pathname,s.integrity=n.integrity),e.push(s)})),e.length>0&&(e[e.length-1].isLast=!0),m.importmap=e}p.rendered=pt.render(pi(p.templateVersion),m)}else if("game.2.0"===p.templateVersion){let e=globalThis.location.origin;a.currentBaseURL&&(e=a.currentBaseURL);let t=e;t&&t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),m={appName:c,id:r,name:o,group:l,importmapName(){let e=t;a.currentBaseURL&&(this.pathname=this.pathname.replace(i.projectURL,"/"));let n,s=`${e}${this.pathname}`;return n=`"${this.key}": "${s}"`,this.isLast||(n+=","),n},systemjsURL(){let e=`${t}/`;return e=a.currentBaseURL?`${e}systemjs/6.12.4/system.min.js`:"/systemjs/6.12.4/system.min.js",e},background:u};let n=[];if(m.importmap=n,d){let e=d;Object.getOwnPropertyNames(e).forEach((t=>{let s=e[t],r={};"string"==typeof s?(r.key=t,r.pathname=s):(r.key=t,a.currentBaseURL?r.pathname=s.pathname.replace(i.projectURL,"/"):r.pathname=s.pathname,r.integrity=s.integrity),n.push(r)}))}if(m.appName=`${l}-${r}`,"debug"===g){n.push({key:`${l}-${r}`,pathname:`${c}`});let t=e;t&&t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),m.appName=`${t}${c}`}else{let t=e;a.currentBaseURL?(n.push({key:`${l}-${r}`,pathname:`/${c}`}),m.appName=`${t}${c}`):(n.push({key:`${l}-${r}`,pathname:`${i.projectURL}${c}`}),m.appName=`${t}${i.projectURL}${c}`)}n.length>0&&(n[n.length-1].isLast=!0),p.rendered=pt.render(pi(p.templateVersion),m)}else if("slot.2.1"===p.templateVersion){let n="";a.currentBaseURL&&(n=a.currentBaseURL);let s=n;s&&s.length>0&&"/"===s[s.length-1]&&(s=s.substring(0,s.length-1));let g="";m={appName(){let e=s;return e=""===s?`${c}`:a.currentBaseURL?`${e}/${c}`:`${e}${i.projectURL}${c}`,e},systemjsURL(){let e=`${s}/`;return e=`${e}systemjs/system.js`,e},appConfig:()=>g,id:r,name:o,group:l,background:u},U.info.langID=v;let d=i.projectURL;a.currentBaseURL&&(d="/");let f=`${s}${d}config/${l}/${h}/browser.config.js`;""===s&&(f=`config/${l}/${h}/browser.config.js`),fetch(f,{headers:{"Content-Type":"text/plain"}}).then((e=>e.ok?e.text():null)).then((i=>{if(!i)return null;if(g=new String(i),""!==s){let e=`${s}/dependence/`;a.currentBaseURL&&(e=`${a.currentBaseURL}dependence/`),g=g.replace("dependence/",e)}p.rendered=pt.render(pi(p.templateVersion),m),k.src="data/template/4b3df1064ed5591c.html",k.addEventListener("load",(()=>{if(!a.isIframeLoaded&&(a.isIframeLoaded=!0,t.setTimeout((()=>{let e=k.contentDocument||k.contentWindow.document;e.open(),e.write(p.rendered||"!!!! unknown template !!!!"),e.close()}),.05),a.checkItem)){let t=a.checkItem,i=Math.round(performance.now());t.timeOnload=i-a.timestamp,a.timestamp=i,t.state="web",e.redraw()}}),{capture:!0,once:!0})}))}if("slot.2.1"!==p.templateVersion){k.src="data/template/4b3df1064ed5591c.html";const i=()=>{if(!a.isIframeLoaded&&(a.isIframeLoaded=!0,t.setTimeout((()=>{let e=k.contentDocument||k.contentWindow.document;e.open(),e.write(p.rendered||"!!!! unknown template !!!!"),e.close()}),.05),a.checkItem)){let t=a.checkItem,i=Math.round(performance.now());t.timeOnload=i-a.timestamp,a.timestamp=i,t.state="web",e.redraw()}};k.addEventListener("load",i,{capture:!0,once:!0})}}})],f.gamePage=$,f.info={iframe:{},token:l.info.token,gameName:p.game.name,logo:p.game.baseURL+p.game.logo,version:p.game.version||"0.9.9",open(t){p.childrenVisible=!0,p.currentUrl=t,e.redraw()}},F=U.gamecard,De=F;let P=r;l.mode===P.REAL?f.info.mode=w("gameModeReal"):f.info.mode=w("gameModeDemo"),e.redraw()},onremove(){ke(this.options.setting)},view(){let t,n=this.options,s=n.setting,a=n.objList||[];if(n.info&&n.info.iframe&&pe.isMobile){n.info.iframe.style||(n.info.iframe.style={});let e=n.info.iframe.style;e.width=s.width,e.height=s.height}if(n.initGame){t=!s.isChild&&pe.isMobile?(pe.useFullscreen,{position:"absolute",left:"0px",top:pe.currentY+"px",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"}):{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"},s.isCheckData&&(t={left:"0%",top:"0%",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"});let r="";return s.images.useBackground&&(r=s.background),e(".",{style:t},s.isChild?null:e(".center",{style:{overflowY:"hidden",position:"absolute",zIndex:1,top:"0%",left:"0%",width:`${globalThis.innerWidth}px`,height:`${globalThis.innerHeight}px`}},e(".aspect-ratio--object cover",{style:{background:`url(${r}) center`}})),e(".",{oncreate:n.initGame,style:{position:s.position,boxShadow:s.backgroundCSS,left:s.left,top:s.top,width:s.width,height:s.height,zIndex:s.zIndex||2,opacity:s.opacity,display:s.display}},n.gamePage,a.map((t=>t?(t.attrs.fix=s,t.attrs.updateBlur=n.event.updateBlur,e(t.com,t.attrs)):null)),s.sysTray&&s.sysTray.visible?e(he,{style:s.sysTray.style,config:s.sysTray}):null,s.sysTray&&s.sysTray.isMenu?e(ge,{tray:n.tray,event:n.event,info:n.info,config:s.sysTray}):null),s.childrenVisible?e(ft,{url:s.currentUrl,manager:s}):null,i.msg.length>0?e(".",{style:{position:"absolute",color:"#fff",left:"50%",top:"0%",width:"64px",height:"16px",zIndex:900}},i.msg):null)}return e(".")}},Et={oninit(e){let t=e.attrs;this.options=t.options,this.saveConfig={}},oncreate(){},view(){let t=this.options,i=t.scene.pixiConfig,n=this.saveConfig;return e("article.pa4.white",e("form",[e("fieldset.ba.b--transparent.ph0.mh0",[e("legend.ph0.mh0.fw6.white","遊戲場景設定"),e(".mt3",e("label.db.fw4.lh-copy.f6","寬"),e("input.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"width",name:"width",oninput(e){let t=e.target.value;n.width=parseInt(t),i.width=t},value:i&&i.width})),e(".mt3",e("label.db.fw4.lh-copy.f6","高"),e("input.b.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"height",name:"height",oninput(e){let t=e.target.value;n.height=parseInt(t),i.height=t},value:i&&i.height})),e(".mt3",e("label.db.fw4.lh-copy.f6","解析度"),e("input.b.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"resolution",name:"resolution",oninput(e){let t=e.target.value;n.resolution=parseFloat(t),i.resolution=t},value:i&&i.resolution})),e(".mt3",e("label.db.fw4.lh-copy.f6","是否反鋸齒"),e("input.b.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"antialias",name:"antialias",oninput(e){let t=e.target.value;n.antialias=!1,"true"===t&&(n.antialias=!0),i.antialias=t},value:i&&i.antialias})),e(".mt3",e("label.db.fw4.lh-copy.f6","是否透明"),e("input.b.pa2.input-reset.ba.bg-transparent.w-40.red",{id:"transparent",name:"transparent",oninput(e){let t=e.target.value;n.transparent=!1,"true"===t&&(n.transparent=!0),i.transparent=t},value:i&&i.transparent})),e(".mt3",e("input.b.ph3.pv2.input-reset.ba.b--black.bg-transparent.grow.pointer.f6 white",{onclick(){Object.getOwnPropertyNames(n).forEach((e=>{i[e]=n[e]})),t&&t.ready&&(t.visible=!1,t.ready())},value:"確定"}))])]))}},kt=null,Rt={oninit(s){let r=this,o=s.attrs;r.style=o.style,r.options=o.options,r.resource=o.resource,r.timeout=null,r.isLeave=!1;let l={start(){},resBegin(){},resEnd(){},sceneResBegin(){},sceneResLoading(){r.timeout&&(t.remove(r.timeout),r.timeout=null),r.isLeave||(r.timeout=t.setTimeout((()=>{r.isLeave=!0,r.game&&(r.game.resetUpdate(),r.game.stop(),r.game=null),r.options&&r.options.ready&&r.options.ready();let t=a;n[t.OVERVIEW_ANIMATION]=!1,n[t.OVERVIEW_PROGRESS]=!0,e.redraw(),r.timeout=null}),5))},sceneResEnd(){},finish(){r.timeout&&(t.remove(r.timeout),r.timeout=null)}};!async function(){if(!kt)try{const{getProject:e}=await import("./agent.7403860c.js");kt=await e("scenes/loading")}catch(t){r.options&&r.options.ready&&r.options.ready();let i=a;return n[i.OVERVIEW_ANIMATION]=!1,n[i.OVERVIEW_PROGRESS]=!0,void e.redraw()}let t=await kt.lib.scene.init({langID:y(),baseURL:kt.pathname,useAvif:i.useAvif});r.resource.setting=t,Ee(t),r.pixiConfig=kt.lib.scene.pixiConfig,e.redraw()}(),r.ready=async function(t){t.resource=o.resource,t.play(),r.game=t;try{r.scene=await kt.lib.scene.create(t,l,h)}catch(i){r.resource.setting&&ke(r.resource.setting),t.resetUpdate(),t.stop(),r.options&&r.options.ready&&r.options.ready();let s=a;return n[s.OVERVIEW_ANIMATION]=!1,n[s.OVERVIEW_PROGRESS]=!0,void e.redraw()}r.options&&r.options.ready&&r.options.ready()}},oncreate(){let e=this;e.resource.setting&&Ee(e.resource.setting)},onremove(){let e=this;e.resource.setting&&ke(e.resource.setting),e.scene&&e.scene.hide();let t=e.game;t&&(t.resetUpdate(),t.stop())},view(){let t=this;return t.pixiConfig?e(g.game.pixi,{id:"loading9999",config:t.pixiConfig,ready:t.ready}):e(".")}};function Ot(e){let t,i=e[0],n=1;for(;n<e.length;){const s=e[n],a=e[n+1];if(n+=2,("optionalAccess"===s||"optionalCall"===s)&&null==i)return;"access"===s||"optionalAccess"===s?(t=i,i=a(i)):"call"!==s&&"optionalCall"!==s||(i=a(((...e)=>i.call(t,...e))),t=void 0)}return i}let It,Ut=a,_t={oninit(a){let r=this,o=a.attrs,c=o.setUpdateEvent;r.scene=o.scene,r.ready=o.ready,r.serve=o.serve,r.finish=o.finish,r.manager=o.manager;let h=n;if(!i.useOptions){let e=r.scene.options;if(e){h[Ut.OVERVIEW_LOGO]=!1,//!!overview.logo;
u.isCheckGameCDN?h[Ut.OVERVIEW_ANIMATION]=!1:h[Ut.OVERVIEW_ANIMATION]=!0,h[Ut.OVERVIEW_BACKGROUND]=!0,h[Ut.OVERVIEW_PROGRESS]=!1;let t=e.game;t&&(h[Ut.GAME_SCENE_CUSTOM]=!!t.custom,h[Ut.GAME_PERFORMANCE_FPS]=!!t.fps,h[Ut.GAME_DEBUG_MODE]=!!t.debug,h[Ut.GAME_DIALOG_CUSTOM]=!!t.useDialog)}}r.elementLogo=null,r.progress=0,r.progressValue=0,r.baseURL=r.scene.baseURL||"",function(t){if(pe.currentY=0,document){let t=globalThis.scene;document.onfullscreenchange=document.onwebkitfullscreenchange=()=>{pe.settingList.forEach((e=>{if(e&&t){let i=t[e.id];if(i){let e=i.game&&i.game.sysTray;re(e);let t=i.localEvent;if(t&&t.fullscreen){let i=e&&e.isFullscreen;t.fullscreen(i)}}}})),e.redraw()},document.onfullscreenerror=document.onwebkitfullscreenerror=()=>{pe.settingList.forEach((e=>{if(e&&t){let i=t[e.id];if(i){let e=i.game&&i.game.sysTray;re(e);let t=i.localEvent;if(t&&t.fullscreen){let i=e&&e.isFullscreen;t.fullscreen(i)}}}})),e.redraw()}}if(!i.isCheckGameCDN&&x.any()?(Oe||(screen&&screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",xe):globalThis.addEventListener("orientationchange",xe)),pe.isMobile=!0,fe=ye,x.iOS()?(globalThis.parent===window&&(pe.currentY=200),pe.ios=!0,fe=null):x.Android()&&(globalThis.parent===window&&(pe.currentY=200),fe=null)):pe.isMobile=!1,t&&(pe.useOrientation=!1,pe.usePortrait=!1,pe.useLandscape=!1,pe.isMobile&&("string"==typeof t.orientation&&("portrait"===t.orientation?(pe.usePortrait=!0,pe.orientation.name="portrait"):(pe.useLandscape=!0,pe.orientation.name="landscape"),pe.useOrientation=!0),we=null,pe.useFullscreen=!1,x.iOS()?navigator.userAgent.match(/baidu/i)?(we=Z,pe.screenUnit="px",pe.useFullscreen=!1):navigator.userAgent.match(/CriOS/i)?(we=H,pe.screenUnit="px",pe.useFullscreen=!1):navigator.userAgent.match(/LieBao|ACHEETAHI/i)?(we=ie,pe.screenUnit="px",pe.useFullscreen=!1):navigator.userAgent.match(/FxiOS/i)?(we=D,pe.screenUnit="px",pe.useFullscreen=!1):navigator.userAgent.match(/Safari/i)?(we=X,pe.screenUnit="px",pe.useFullscreen=!1):navigator.userAgent.match(/UCB/i)?(we=Y,pe.screenUnit="px",pe.useFullscreen=!1):we=ae:x.Android()&&(navigator.userAgent.match(/OPR/i)?(we=U,pe.screenUnit="px",pe.useFullscreen=!1,navigator.userAgent.match(/baidu/i)?we=P:navigator.userAgent.match(/LieBao|ACHEETAHI/i)&&(we=B,pe.screenUnit="px",pe.useFullscreen=!1)):navigator.userAgent.match(/baidu/i)?(we=P,pe.screenUnit="px",pe.useFullscreen=!1):navigator.userAgent.match(/LieBao|ACHEETAHI/i)?(we=B,pe.screenUnit="px",pe.useFullscreen=!1):navigator.userAgent.match(/Firefox/i)?(we=O,pe.screenUnit="px",pe.useFullscreen=!1):navigator.userAgent.match(/UCB/i)?(we=$,pe.screenUnit="px",pe.useFullscreen=!1):navigator.userAgent.match(/Chrome/i)?(pe.useFullscreen=!1,pe.screenUnit="px",we=k):we=M),navigator.userAgent.match(/(UBiOS|Pad|Tablet|KFAUW|Mb2345|ME173X|NRD90M|VIE|N2G47H)/i)&&(pe.useFullscreen=!1,pe.screenUnit="px"),we&&(we.value.state=pe),Oe||globalThis.addEventListener("focus",(()=>{pe.useFocus&&(pe.isTouchOnce=!0,pe.useFocus=!1,Ce(!0))}),!0),ve(),Ce(!0),pe.settingList.forEach((e=>{if(e)return e.isLock?void Te(e):(Le(e),!0)})),pe.isFullscreen=!0,pe.isTouchDown=!1,pe.isTouchOnce=!0)),i.mobileMode){let e=i.mobileMode;parseInt(e)>0&&(pe.isFullscreen=!0,pe.isTouchDown=!1,pe.isTouchOnce=!0)}document.body.onscroll=()=>{!pe.isMobile||pe.orientation.isTrigger||pe.isResize||pe.disableResize||globalThis.parent===window&&pe.isMobile&&(pe.currentY=globalThis.pageYOffset,globalThis.scrollTo(0,pe.currentY),e.redraw())},Oe||globalThis.addEventListener("resize",Ce),Oe=!0}(r.scene.screen),pe.settingList=[],h[Ut.OVERVIEW_LOGO]&&(r.setting={id:"logo",isLock:!0,useCenter:!0,left:"25%",top:"25%",width:"50%",height:"50%",game:{width:512,height:512},reference:{left:.25,top:.25,width:.5,height:.5}});r.settingBackground={id:"background",isLock:!1,left:"0%",top:"0%",width:"100%",height:"100%",game:{width:10240,height:10240},reference:{left:0,top:1,width:1,height:1}},r.message="建立預覽",r.display="inline",r.isFinish=!1,r.options={scene:r.scene,visible:!0,ready:r.ready},r.scene.pixiConfig||(n[Ut.GAME_SCENE_CUSTOM]=!1);let g=u;r.manager.show=()=>{Nt.overview.visible=!0,e.redraw()},r.manager.hide=()=>{Nt.overview.visible=!1,e.redraw()},r.leave=function(){if(!u.isCheckGameCDN)if(r.isFinish=!0,g.isFinish=!0,i.isReload=!1,e.redraw(),i.disableNet){if(!Nt.manual.overview){let e=Nt.overview.manager;e.hide&&e.hide()}let e=wi(),t={id:r.scene.id},i=e.scene[t.id];i&&i.localEvent&&i.localEvent.enter(t)}else r.title=w("connecting"),r.message=w("start"),l.isKickOut||(d.isLogin?(Wt=!1,Gt()):r.serve&&fi(r.serve).then((()=>{r.title=w("quickPlay"),e.redraw()})))},r.timeout=null;let p={start(){r.message="開始讀取遊戲資料",e.redraw(),Ot([g,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.start,"call",e=>e()])},resBegin(e){Ot([g,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.resBegin,"call",t=>t(e)])},resEnd(e){Ot([g,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.resEnd,"call",t=>t(e)])},sceneResBegin(e){Ot([g,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.sceneResBegin,"call",t=>t(e)])},sceneResLoading(a){let o=0;if(Object.prototype.hasOwnProperty.call(a,"totalProgress")){let e=a.state,t=a.totalProgress;if(e){t=(e.currentIndex-1)/e.totals*100+t/e.totals}o=t.toFixed(0),r.progress=o,r.progressValue=.01*t}else{let e=a.current/a.length;o=(100*e).toFixed(0),r.progress=o,r.progressValue=e}r.isFinish||(r.timeout&&(t.remove(r.timeout),r.timeout=null),s||(r.timeout=t.setTimeout((()=>{i.isReload=!0,ri({url:r.baseURL,group:r.scene.group,game:r.scene.appConfig}),r.timeout=null}),5))),n[Ut.OVERVIEW_PROGRESS]&&e.redraw(),Ot([g,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.sceneResLoading,"call",e=>e(o)])},sceneResEnd(e){Ot([g,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.sceneResEnd,"call",t=>t(e)])},async finish(){if(r.timeout&&(t.remove(r.timeout),r.timeout=null),i.requestReload)return;let e=i.store;if(e)try{await e.setItem("baseURL",globalThis.BASE_URL)}catch(e){}n[Ut.OVERVIEW_ANIMATION]&&r.animationLeave?r.animationLeave():r.leave(),Ot([g,"optionalAccess",e=>e.loadingEvent,"optionalAccess",e=>e.finish,"call",e=>e()])}};c&&c(p)},oncreate(){let e=this;e.setting&&Ee(e.setting),e.settingBackground&&Ee(e.settingBackground),Ce(!0),i.requestReload&&(i.requestReload=!1),n[Ut.GAME_SCENE_CUSTOM]||n[Ut.OVERVIEW_ANIMATION]||e.options.ready&&e.options.ready()},onremove(){self.setting&&ke(self.setting),self.settingBackground&&ke(self.settingBackground)},onbeforeremove:e=>(["animate__animated","animate__fadeOut","animate__faster"].forEach((t=>{e.dom.classList.add(t)})),new Promise((function(t){e.dom.addEventListener("animationend",t)}))),view(){let t=this,s=u.setting,a=t.settingBackground,r=t.setting,o=t.options;t.display,s||(s={left:"0%",top:"0%",width:"0%",height:"0%"}),pe.isMobile&&pe.currentY;let l="",c=i.images;return c&&(l=globalThis.innerHeight>globalThis.innerWidth?c.background[`${i.agent}Portrait`]:c.background[`${i.agent}Landscape`]),globalThis.BASE_URL&&(l=globalThis.BASE_URL+"agent/"+l),e(".",{style:{display:t.display,position:"absolute",zIndex:100,left:a.left,top:`${pe.currentY+parseInt(a.top)}px`,width:a.width,height:a.height}},e(".",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},e(".aspect-ratio--object cover",{style:{zIndex:0,background:`url(${l}) center`}})),n[Ut.OVERVIEW_ANIMATION]?e(".",{style:{position:"absolute",left:s.left,top:s.top,width:s.width,height:s.height}},e(Rt,{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"},options:o,resource:u})):null,!i.isReload&&n[Ut.OVERVIEW_LOGO]?e(".",{style:{position:"absolute",left:"25%",top:"25%",width:"50%",height:"50%"}},e("img",{oncreate(e){t.elementLogo=e.dom},src:i.logo,onload(){["animate__animated","animate__fadeIn"].forEach((e=>{t.elementLogo.classList.add(e)}))},style:{opacity:0,zIndex:700,position:"absolute",left:r.left,top:r.top,width:r.width,height:r.height}})):null,n[Ut.GAME_SCENE_CUSTOM]&&o.visible?e(".",{style:{position:"absolute",zIndex:300,left:"0%",top:"0%",width:"100%",height:"100%"}},e(".pv2 mb2 white bg-dark-green o-20",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}}),e(".",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},e(Et,{options:o}))):null,n[Ut.OVERVIEW_PROGRESS]&&!t.isFinish?e(".",{style:{zIndex:100,position:"absolute",left:"10%",top:"90%",width:"80%",height:"4%"}},e("progress.progress",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"40%"},max:"100",value:`${t.progress}`}),e(".tc",{style:{position:"absolute",left:"0%",top:"30%",width:"100%",height:"60%",color:"#a0cdff"}},e("p.v-btm",`${w("loading")} ${t.progress}%`))):null)}},$t={fatal(e){},high(e){},middle(e){},low(e){}},Ft={disableDialog:!1,handle(){let e=a;if(d.state="未連線",i.isInGame&&globalThis.scene){Object.getOwnPropertyNames(globalThis.scene).forEach((e=>{let t=globalThis.scene[e];t&&t.game&&t.game.disconnect&&t.game.disconnect()}))}Ft.disableDialog||n[e.GAME_DIALOG_CUSTOM]&&(d.isError||t.setTimeout((()=>{d.isError||Ae({title:"errorLow",msg:"disconnect"})}),2))}},Pt={handle(e){let t=wi();d.state="遊戲中",Ft.disableDialog=!0,o.serviceEnd(Pt.report),o.log({label:"net",category:"進入遊戲"});let i={id:e.gid};Be();let n=t.scene[i.id];n&&n.localEvent&&n.localEvent.enter(i)},report:{time:0,category:"進入遊戲",getLabel:()=>"net"},error:$t.low},At={position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"},Bt=[{style:{zIndex:10,position:"absolute",left:"5%",top:"5%",width:"30%",height:"85%"},reference:{left:.05,top:.05,width:.3,height:.85}},{style:{zIndex:10,position:"absolute",left:"35%",top:"5%",width:"30%",height:"85%"},reference:{left:.35,top:.05,width:.3,height:.85}},{style:{zIndex:10,position:"absolute",left:"65%",top:"5%",width:"30%",height:"85%"},reference:{left:.65,top:.05,width:.3,height:.85}}],Nt={overview:{visible:!0,manager:{}},packet:null,gid:null,manual:{overview:!1}},Mt={visible:!1},Vt="",St=[],Ht={oninit(e){let t=e.attrs,i=this;i.isLoading=!1;let n=t.loadingEvent,s=l,a={id:t.id,decimal:0,mode:s.mode,isCreate:!0,scene:t.scene,loadingEvent:{start(){i.isLoading=!0,n&&n.start&&n.start()},resBegin(e){n&&n.resBegin&&n.resBegin(e)},resEnd(e){n&&n.resEnd&&n.resEnd(e)},sceneResBegin(e){n&&n.sceneResBegin&&n.sceneResBegin(e)},sceneResLoading(e){n&&n.sceneResLoading&&n.sceneResLoading(e)},sceneResEnd(e){n&&n.sceneResEnd&&n.sceneResEnd(e)},finish(e){e&&e.localEvent&&(t.localEvent=e.localEvent),i.isLoading=!1,t.finish&&t.finish(e),n&&n.finish&&n.finish(e)}}};i.config=a,i.style=t.style,i.reference=t.reference,i.fix=t.fix,i.absPos=t.absPos,i.updateBlur=t.updateBlur,i.isChild=t.isChild},view(){let t=this;return e(".",{style:t.style},e(Ct,{updateStyle(e){if(e){let i=t.style;i.display=e.display||i.display,Object.prototype.hasOwnProperty.call(e,"opacity")&&(i.opacity=e.opacity),Object.prototype.hasOwnProperty.call(e,"zIndex")&&(i.zIndex=e.zIndex)}},config:t.config,currentBaseURL:globalThis.BASE_URL,left:"0%",top:"0%",width:"100%",height:"100%",reference:t.reference,updateBlur:t.updateBlur,fix:t.fix,isChild:t.isChild,absPos:t.absPos}))}},zt={oninit(t){let i=t.attrs,n=this,s=i.sceneInfo;n.objList=i.objList,n.serve=i.serve,n.isReady=!1;let a={reload(){n.isReady=!1}},r={};let o=l,c={id:s.id,decimal:0,mode:o.mode,isCreate:!0,scene:s,loadingEvent:{start(){r.start&&r.start()},resBegin(e){r.resBegin&&r.resBegin(e)},resEnd(e){r.resEnd&&r.resEnd(e)},sceneResBegin(e){r.sceneResBegin&&r.sceneResBegin(e)},sceneResLoading(e){r.sceneResLoading&&r.sceneResLoading(e)},sceneResEnd(e){r.sceneResEnd&&r.sceneResEnd(e)},finish(){r.finish&&r.finish()}}};Nt.packet=null,Nt.gid=s.id||n.serve.id,n.setUpdateEvent=function(e){r=e},n.gameConf=c,n.sceneInfo=s,n.ctrlEvent=a,n.event={ready:function(){n.isReady=!0,e.redraw()},finish:function(){let e=bi();const t=m.CMD;e&&e.setLobbyCommand(t.IN_GAME,{packet:null,gid:s.id||n.serve.id})}}},view(){let t=this,i=t.objList,n=t.gameConf,s=t.event;return e(".",{style:At},Mt.visible&&t.isReady?e(Ct,{currentBaseURL:globalThis.BASE_URL,sysTray:t.sceneInfo.sysTray,ctrlEvent:t.ctrlEvent,config:t.gameConf,zIndex:4,left:"0%",top:"0%",width:"100%",height:"100%",objList:i}):null,e(".",Nt.overview.visible?e(_t,{manager:Nt.overview.manager,serve:t.serve,scene:n.scene,setUpdateEvent:t.setUpdateEvent,ready(){s.ready()},finish(){s.finish()}}):null))}};function jt(e){It=i.langID,i.serve=e.serve,Nt.manual={overview:!1},Nt.overview.visible=!0,function(e){let t=null;if(e.gameCard)t=e.gameCard;else{let i;i=We(e.group),t=i[e.id]}if(!t)return;t.manual&&(Nt.manual=t.manual,t.manual.disableNet&&(i.disableNet=!0)),o.report.name=`${t.group}/${t.appConfig}`,Vt=t.group;let n=t.baseURL||"",s=t.images;if(i.useAvif?s.v2&&(s=s.v2):s.v1&&(s=s.v1),s.icon){let e=document.getElementsByTagName("link");if(e){let t=e[0];if(t)if(t.setAttribute("crossorigin","icon"),t.setAttribute("rel","icon"),t.setAttribute("type","image/png"),"kc"===i.agent){let e="data/img/logo/kc/87faada2e433ffce.ico";t.setAttribute("href",e)}else t.setAttribute("href",n+s.icon)}}let a=t.app;"object"==typeof a&&(a=a[It]),t.name[It]?document.title=t.name[It]:document.title=t.name[v.EN],Mt.objList=St,Mt.sceneInfo=t,Mt.serve=e.serve,Mt.visible=!0,ui(zt,Mt)}(e)}function Dt(){St=[],Mt.visible=!0,e.redraw()}let Wt=!1;function Gt(){let e=bi();const n=m.CMD;let s=Nt;if(Wt)return!0;let a=i,r=d;if(t.setTimeout((()=>{"遊戲中"!==r.state&&(globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload()),Ae({title:"connecting",msg:"disconnect"}))}),.001*f),a.module?import("./agent.cdaae91c.js").then((e=>{e.ingame({name:l.game,group:l.group,gid:s.gid})})):(e&&e.setLobbyCommand(n.IN_GAME,{packet:s.packet,gid:s.gid}),o.serviceBegin(Pt.report)),Wt=!0,!s.manual.overview){let e=s.overview.manager;e.hide&&e.hide()}return!0}let Yt={oninit(e){let t=e.attrs;t.yesno||Dt(),this.title=t.title,this.msg=t.msg,this.setting={id:"dialog",isLock:!1,useCenter:!1,left:"0%",top:"0%",width:"100%",height:"100%",game:{width:1024,height:1024},reference:{left:0,top:0,width:1,height:1}},Ee(this.setting)},oncreate(){},view(){let t=this,i=t.setting,n=null;return n=pe.isMobile?{position:"absolute",left:i.left,top:pe.currentY+"px",backgroundColor:"rgba(0,0,0,1)",zIndex:990,opacity:1,width:i.width,height:i.height}:{position:"absolute",left:i.left,top:i.top,backgroundColor:"rgba(0,0,0,1)",zIndex:990,opacity:1,width:i.width,height:i.height},e(".",{style:n},e(".bg-moon-gray ba bw1",{style:{position:"absolute",left:"10%",top:"10%",width:"80%",height:"75%"}},e(".bg-near-black white f4 fw6 pa4",{style:{position:"absolute",left:"0%",top:"0%",width:"100%",height:"20%"}},e(".tc",w(t.title)||"title")),e(".tc pa5",{style:{position:"absolute",left:"0%",top:"20%",width:"100%",height:"50%"}},e.trust(w(t.msg))||"body message")))}},qt={oninit(){let e=this;e.timeValue=-1,e.touchmoveOnce=!1,e.fields=["一","二","三","四","五","六","七","八","九","十","一","二","三","四","五","六","七","八","九","十"],e.pageY=0,e.imgRotate={id:"rotate",isLock:!0,useCenter:!0,left:"10%",top:"10",width:"80%",height:"80%",game:{width:5120,height:5120},reference:{left:0,top:0,width:1,height:1}},e.imgFullscreen={id:"screen",isLock:!0,useCenter:!0,left:"10%",top:"10",width:"80%",height:"80%",game:{width:5120,height:5120},reference:{left:0,top:0,width:1,height:1}}},view(){let t=this,i=pe,n=i.orientation,s=globalThis.innerWidth,a=globalThis.innerHeight;return n.isTrigger&&(s*=2.5,a*=2.5),i.isMobile&&i.currentY,[i.isTouchOnce&&i.isFullscreen?null:e(".",{style:{zIndex:850,position:"absolute",left:"0%",top:i.currentY+"px",width:(s||i.screenWidth)+"px",height:(a||i.screenHeight)+"px",backgroundColor:"rgba(0,0,0,1)"},ontouchmove(e){pe.isMobile&&!pe.ios&&e.preventDefault()},ontouchend(){if(globalThis.Howl){let e=new globalThis.Howl({src:["data/f82550ea2e80cd97.wav"]});e&&(e.volume(.001),e.play())}if(i.isFullscreen=!0,i.isTouchDown=!1,i.isTouchOnce=!0,pe.ios){let t=globalThis.scene;i.settingList.forEach((e=>{if(t){let i=t[e.id];if(i){(i.game&&i.game.sysTray).isFullscreen=!1}}})),e.redraw(),Ce(),i.mobileReady&&i.mobileReady()}else oe().then((()=>{let t=globalThis.scene;i.settingList.forEach((e=>{if(t){let i=t[e.id];if(i){(i.game&&i.game.sysTray).isFullscreen=!0}}})),e.redraw(),Ce(),i.mobileReady&&i.mobileReady()})).catch((()=>{let t=globalThis.scene;i.settingList.forEach((e=>{if(t){let i=t[e.id];if(i){(i.game&&i.game.sysTray).isFullscreen=!1}}})),e.redraw(),Ce(),i.mobileReady&&i.mobileReady()}))},ontouchstart(e){if(globalThis.Howl){let e=new globalThis.Howl({src:["data/f82550ea2e80cd97.wav"]});e.volume(.001),e.play()}if(i.isTouchDown)return;i.isTouchDown=!0;let n=e.changedTouches||e.originalEvent.touches;if(n){let e=n[0];t.pageY=e.pageY}}},e(".",{oncreate(){Ee(t.imgFullscreen)},onremove(){ke(t.imgFullscreen)},style:{position:"absolute",left:"10%",top:"10%",width:"80%",height:"80%"}},e("img",{src:"data/img/c7aecda7af142624.png",style:{position:"absolute",zIndex:850,left:t.imgFullscreen.left,top:t.imgFullscreen.top,width:t.imgFullscreen.width,height:t.imgFullscreen.height}}))),!n.isTrigger&&i.useOrientation&&i.usePortrait&&!i.isPortrait?e(".",{oncreate(){Ee(t.imgRotate),Ce(!0)},onremove(){ke(t.imgRotate)},style:{zIndex:800,position:"absolute",left:"0px",top:globalThis.pageYOffset+"px",width:(globalThis.innerWidth||i.screenWidth)+"px",height:(globalThis.innerHeight||i.screenHeight)+"px",backgroundColor:"rgba(0,0,0,1)"}},e("img",{src:"data/img/f14a0482453bcc34.png",style:{position:"absolute",left:t.imgRotate.left,top:t.imgRotate.top,width:t.imgRotate.width,height:t.imgRotate.height}})):null,!n.isTrigger&&i.useOrientation&&i.useLandscape&&!i.isLandscape?e(".",{oncreate(){Ee(t.imgRotate),Ce(!0)},onremove(){ke(t.imgRotate)},style:{zIndex:800,position:"absolute",left:"0px",top:globalThis.pageYOffset+"px",width:(globalThis.innerWidth||i.screenWidth)+"px",height:(globalThis.innerHeight||i.screenHeight)+"px",backgroundColor:"rgba(0,0,0,1)"}},e("img",{src:"data/img/b4c0d11274ffa254.gif",style:{position:"absolute",left:t.imgRotate.left,top:t.imgRotate.top,width:t.imgRotate.width,height:t.imgRotate.height}})):null]}},Kt={"game.2.0":'<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  <title>game 2.0 {{{name}}}</title>\n\n  <script type="systemjs-importmap" crossorigin="anonymous">\n    {\n      "imports": {\n      {{#importmap}}\n        {{{importmapName}}}\n      {{/importmap}}\n      }\n    }\n  <\/script>\n\n</head>\n<body id="{{{id}}}" style="height:100%;width:100%;overflow-x:hidden;overflow-y:hidden">\n<script crossorigin="anonymous">\n  if(!window.globalThis) {\n    window.globalThis = window;\n  }\n\n  let isInitCache = false;\n  function initCache () {\n    if(isInitCache) {\n      return;\n    }\n    isInitCache = true;\n    let isLoaded = false;\n    let registration = null;\n    function loadScript() {\n      if(isLoaded) {\n        return;\n      }\n      isLoaded = true;\n      let script = document.createElement(\'script\');\n      script.onload = function() {\n        System.import("{{{appName}}}");\n      };\n      script.src = "{{{systemjsURL}}}";\n      document.getElementsByTagName(\'head\')[0].appendChild(script);\n    }\n    loadScript();\n  }\n  initCache();\n\n<\/script>\n</body>\n</html>\n',"game.3.0":'<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  <title>game 3.0 {{{name}}}</title>\n\n  {{#importmap}}\n  {{{jsName}}}\n  {{/importmap}}\n\n</head>\n<body id="{{{id}}}" style="height:100%;width:100%;overflow-x:hidden;overflow-y:hidden">\n<script crossorigin="anonymous">\n  if(!window.globalThis) {\n    window.globalThis = window;\n  }\n\n  let isInitCache = false;\n  function initCache () {\n    if(isInitCache) {\n      return;\n    }\n    isInitCache = true;\n    let isLoaded = false;\n    let registration = null;\n    function loadScript() {\n      if(isLoaded) {\n        return;\n      }\n      isLoaded = true;\n      let script = document.createElement(\'script\');\n      script.onload = function() {\n      };\n      script.src = "{{{appName}}}";\n      script.crossorigin = "anonymous";\n      document.getElementsByTagName(\'head\')[0].appendChild(script);\n    }\n    loadScript();\n  }\n\n  initCache();\n<\/script>\n</body>\n</html>\n',"game.4.0":'<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  <title>game 4.0 {{{name}}}</title>\n\n\n  {{#importmap}}\n  {{{jsName}}}\n  {{/importmap}}\n  \n  <script crossorigin="anonymous">\n    if(!window.globalThis) {\n      window.globalThis = window;\n    }\n    {{#globalmap}}\n    {{{globalName}}}\n    {{/globalmap}}\n\n  <\/script>\n</head>\n<body id="{{{id}}}" style="height:100%;width:100%;overflow-x:hidden;overflow-y:hidden">\n  <script type="module">\n    import "{{{appName}}}";\n    window.supportsDynamicImport = true;\n  <\/script>\n</body>\n</html>\n',"slot.2.1":'<!DOCTYPE html>\n<html>\n  <head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  <title>slot.2.1 {{{name}}}</title>\n  </head>\n  <body id="{{{id}}}" style="height:100%;width:100%;overflow-x:hidden;overflow-y:hidden">\n  <script crossorigin="anonymous">\n  if(!window.globalThis) {\n    window.globalThis = window;\n  }\n\n  let isInitCache = false;\n  function initCache () {\n    if(isInitCache) {\n      return;\n    }\n    isInitCache = true;\n    let isLoaded = false;\n    let registration = null;\n    function loadScript() {\n      if(isLoaded) {\n        return;\n      }\n      isLoaded = true;\n      let script = document.createElement(\'script\');\n      script.onload = function() {\n        {{{appConfig}}}\n        ;System.import(\'{{{appName}}}\');\n\n      };\n      script.src = "{{{systemjsURL}}}";\n      script.crossorigin = "anonymous";\n      document.getElementsByTagName(\'head\')[0].appendChild(script);\n    }\n    loadScript();\n  }\n\n  initCache();\n  <\/script>  \n  </body>\n</html>\n'},Xt=!1,Jt=["一","二","三","四","五","六","七","八","九","十","一","二","三","四","五","六","七","八","九","十"],Qt=!0,Zt=null,ei=null,ti=null,ii=!1,ni=null,si=null,ai=null;async function ri(n){if(!i.requestReload){let s={eventName:`CDN ${n.url}`,category:"服務線路錯誤",label:`${n.group}${n.game}`};o.error(s),globalThis.scene={},i.requestReload=!0,i.cdnList=[],i.hasCDN=!1,i.selectCDN=!1,ei=null,e.redraw();let a=async function(){ai&&(await ai(),0===i.cdnList.length?mi({element:document.body}):e.redraw())};t.setTimeout((()=>{a()}),.1)}}async function oi(t){ii=!0,ni=t||{},si=await import("./agent.ce04cbf5.js"),e.redraw()}function li(){ii=!1,e.redraw()}let ci={ready(t){globalThis.BASE_URL=t,o.report.currentURL=t,i.selectCDN=!0,globalThis.scene={},e.redraw();let n=l;Ge(n.game,n.group,t).then((e=>{e&&e.gameCard&&jt({gameCard:e.gameCard,serve:n,id:n.game,group:n.group})}))}},hi={context:null,view:()=>Qt?i.hasCDN&&!i.selectCDN?e(".basic",e(xi,ci)):e(".basic",pe.isMobile?e(".",{style:{zIndex:0,position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},pe.orientation.isTrigger?null:Jt.map((()=>e(".ba h-25 black tc",{style:{opacity:0}},"")))):null,ei?e(ei,ti):null,pe.isMobile?e(qt):null,Ue()?e(Yt,{title:$e(),msg:Pe()}):null,ii&&si?e(si.Component,ni):null):i.hasCDN&&!i.selectCDN?e(".basic#root",e(xi,ci)):e(".basic#root",[pe.isMobile?e(".",{style:{zIndex:0,position:"absolute",left:"0%",top:"0%",width:"100%",height:"100%"}},pe.orientation.isTrigger?null:Jt.map((()=>e(".ba h-25 black tc",{style:{opacity:0}},"")))):null,ei?e(ei,ti):null,pe.isMobile?e(qt):null,Ue()?e(Yt,{title:$e(),msg:Pe()}):null,ii&&si?e(si.Component,ni):null])};function gi(e){Qt=e}function ui(t,i){ei=t,ti=i,e.redraw()}let di={};function pi(e){return di[e]}async function mi(n){let a=l;ai=n.checkCDN;let o=globalThis;o.addEventListener&&(o.addEventListener("beforeunload",(e=>{})),o.addEventListener("unload",(()=>{}))),o.scene={},o.game={},di["game.2.0"]=Kt["game.2.0"],di["game.3.0"]=Kt["game.3.0"],di["game.4.0"]=Kt["game.4.0"],di["slot.2.1"]=Kt["slot.2.1"];let c={game:a.game,group:a.group};if(a.group&&a.game||!b){if(gi(!1),!i.hasCDN){let e=globalThis.BASE_URL;Ge(c.game,c.group,e).then((e=>{e&&e.gameCard&&jt({gameCard:e.gameCard,serve:c,id:c.game,group:c.group})}))}}else ei=Xe;let h=r;if(a.mode===h.DEMO){let e=840;t.setTimeout((()=>{globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload()),Ae({title:"gameModeDemo",msg:"demoTimeout"})}),e)}if(e.mount(n.element,hi),!s)try{let e=(0,(await import("./agent.2f58af89.js")).default)(l.key);Date.now()-1e3*e.exp>0&&(l.isKickOut=!0,Ae({title:"exitGame",msg:"kickOut"}))}catch(e){}}function fi(n){let s=l;if(Xt){return new Promise((e=>{let t=s.info;Zt&&(Zt.login(t),e(Zt))}))}return Xt=!0,n&&(s.game=n.game||s.game,s.group=n.group||s.group,s.host=n.host||s.host),new Promise((n=>{let a=globalThis;a.lobby={currentUser:{},table:{},net:{}},i.module?import("./agent.5516a41f.js").then((e=>{let t=e.create();a.lobby.net.gameCommand=t;(()=>{s.host.indexOf("://")<0&&(s.host=`wss://${s.host}`);let e=s.info,t=s.host,i=s.protocol,a=s.gameFormat,r={hostname:t};import("./agent.cdaae91c.js").then((t=>{t.init({gameFormat:a,protocol:i}).then((()=>{t.connect(r).then((()=>{(async function(e){try{let t=await import("./agent.cdaae91c.js");return await t.login(e)}catch(e){}})(e).then((()=>{n(null)}))}))}))}))})()})):(Zt=new m({},"/"+s.namespace),Zt.init(),import("./agent.465abc5e.js").then((i=>{let a,r=globalThis,o=d;a=i.getCommandList(),Zt.setEventMap(a),Zt.setSendEvent(i.getSendEvent()),o.state="連線中",e.redraw();let l={};l.send=Zt.setGameCommand,l.registerGameEvent=Zt.registerGameEvent,l.unregisterGameEvent=Zt.unregisterGameEvent,r.lobby.net.gameCommand=l,r.lobby.net.setLobbyCommand=Zt.setLobbyCommand,r.lobby.net.CMD=m.CMD,r.lobby.setEvent=i.setEvent,s.host&&Zt.setHost(s.host);let c=t.setTimeout((()=>{"連線中"===o.state&&(globalThis.Howler&&(globalThis.Howler.mute(!0),globalThis.Howler.unload()),Ae({title:"connecting",msg:"disconnect"}))}),.001*f);Zt.connect({connect(){c&&(t.remove(c),c=null),n(Zt)},disconnect(){c&&(t.remove(c),c=null)}})})))}))}function bi(){return Zt}function wi(){return globalThis}var yi=Object.freeze({__proto__:null,resetCache:function(){if(i.useCache){let e=i.registration;if(e&&e.active&&navigator.serviceWorker.controller){let e={reset:"games"};navigator.serviceWorker.controller.postMessage(e)}}},reload:ri,showInfo:oi,hideInfo:li,setAccountVisible:gi,setCurrentContext:ui,getCurrentContext:function(){return ei},showGameList:function(){ei=Xe},getGameTemplate:pi,run:mi,autoLogin:fi,getLobby:bi,getManager:wi,setKey:function(e){l.key=e}});async function vi(t,n,s){let a="",r=null,o=null,l=n.target,c=!1,h=y(),g=i.version||"1.0.0";n.group=t.group,n.game=t.game;try{if(a=`${l}${t.group}/${t.game}/config/gamecard.txt?v=${g}`,r=await fetch(a,{headers:{"Content-Type":"text/plain"}}),!s&&!i.isCheckGameCDN)return null;r.ok&&(o=await r.text())}catch(e){}if(!o)try{if(a=`${l}config/${t.group}/${t.game}/gamecard.txt?v=${g}`,r=await fetch(a,{headers:{"Content-Type":"text/plain"}}),!s&&!i.isCheckGameCDN)return null;r.ok&&(o=await r.text(),c=!0)}catch(e){}let u=null;if(o){u=JSON.parse(o);let e=u.images;i.useAvif?e.v2&&(e=e.v2):e.v1&&(e=e.v1);let a=null;c?(u.templateVersion="slot.2.1",a=`${l}${e.icon}`):a=`${l}${t.group}/${t.game}/${e.icon}`;let g="";"string"==typeof u.name?g+=u.name+" ":g+=u.name[h]+" ";let d=null;if("string"==typeof u.app?(d=`${l}${u.app}`,g+=u.app):(d=`${l}${u.app[h]}`,g+=u.app[h]),n.app=g,n.version=u.version,n.icon=a,n.downloadEnabled=!0,n.appConfig=u.appConfig,n.gamecard=u,n.useTest){if(d){if(r=await fetch(d),!s&&!i.isCheckGameCDN)return null;if(!r.ok)return n.error&&n.error(n),null}if(a){if(r=await fetch(a),!s&&!i.isCheckGameCDN)return null;if(!r.ok)return n.error&&n.error(n),null}n.timeReady=Math.round(performance.now()-n.timestamp),n.ready&&n.ready(n)}}else n.app="",n.version="",n.gamecard=null,n.error&&n.error(n);return e.redraw(),u}let xi={oninit(e){let t=this,n=e.attrs,s={category:"測試CDN 主網址",getLabel:()=>"common"};o.loadBegin(s),t.cdnList=i.cdnList,t.server=l,t.ready=n.ready;let a=[];t.gamecdnFields=a,t.isFinish=!1;let r=0,c=t.cdnList.length;function h(e){r+=1,r>=c&&(t.server.cdn.errorCounts+=1,t.server.cdn.errorCounts<3?(i.requestReload=!1,i.isReload=!0,ri({url:e.target,group:e.group,game:e.appConfig||e.game})):(i.hasCDN=!1,Ae({yesno:!1,title:"service",msg:"errorCDN"})))}function g(e){t.isFinish||(t.isFinish=!0,e.isLight=!0,i.isCheckGameCDN=!1,t.server.cdn.errorCounts=0,o.loadEnd(s),o.log({label:"common",category:"測試CDN 主網址"}),t.ready&&t.ready(e.target))}i.isCheckGameCDN=!0,t.cdnList.forEach(((e,i)=>{let n={};n.index=i,n.isLight=!1,n.id=e.id,n.url=e.url,n.target=e.target,n.timestamp=Math.round(performance.now()),n.timeOnload=0,n.timeInit=0,n.timeScene=0,n.timeReady=9999,n.gamecard=null,n.icon="",n.isIconLoaded=!1,n.downloadEnabled=!1,n.loadingEvent={},n.ready=g,n.error=h,n.useTest=!0,a.push(n),vi(t.server,n)}))},oncreate(){},view:()=>e(".",{left:"0%",right:"0%",width:"100%",height:"100%",position:"absolute",zIndex:0},e(".tmp",e(".cssload-loader",e.trust('<svg class="cssload-logo" height="200" width="200"><text x="49%" y="56%" dominant-baseline="middle" text-anchor="middle" fill="#1375ff">Loading</text></svg>'),e(".cssload-inner cssload-one"),e(".cssload-inner cssload-two"),e(".cssload-inner cssload-three"))),e(".",{style:{opacity:0,left:"0%",right:"0%",width:"1px",height:"1px",position:"absolute",zIndex:0}},e("article.dt.w-100.bb.b--black-05.pb2.mt2",e("div.dtc.v-mid.pl3",e("h1.f6.f5-ns.fw6.lh-title.white.mv1.tc","檢測服務線路"),e("h2.f6.fw4.mt1.mb1.green.tc","使用的線路")))))};var Li=Object.freeze({__proto__:null,getGameCard:vi,default:xi});export{Pt as C,Ee as a,Ae as b,yi as c,ke as d,Ce as e,Ne as f,Be as g,li as h,Gt as i,wi as j,$t as k,bi as l,Ft as m,Li as n,pe as s};
