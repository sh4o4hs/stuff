import{m as e,g as n,l as o,b as r,k as a,C as t,n as i}from"./agent.2f3052af.js";import{u as c}from"./agent.b38a3088.js";import{a as l,s as d,b as s}from"./agent.c55f3b95.js";import{r as g}from"./agent.e16c05fc.js";import{C as m,n as h,a as G}from"./agent.e5fd3732.js";import"./agent.87cf6255.js";let p=!0,f={handle(){if(!p)return;p=!1;let a=s;a.state="已連線",e.redraw(),n(),g.serviceBegin(m.report);let t=o(),i=l.info;t.login(i),c.setTimeout((function(){a.isError||a.isLogin||r({title:"errorLow",msg:"disconnect"})}),d.commandTimeout)}},u={handle(){}},w={handle(e){}},b={handle(){},error:a.low},x={handle(e){},error:a.low},j={},M=null,T=!0,C={game(){h&&T&&(T=!1)}};function L(e){j.connect=e.connect||j.connect,j.disconnect=e.disconnect||j.disconnect,j.disconnectMsg=e.disconnectMsg||j.disconnectMsg,j.reconnect=e.reconnect||j.reconnect,j.broadcast=e.broadcast||j.broadcast,j.login=e.login||j.login,j.relogin=e.relogin||j.relogin,j.inGame=e.inGame||j.inGame,j.toGame=e.toGame||j.toGame,j.exitGame=e.exitGame||j.exitGame}function k(){return M||(M={connect:{handle(e){f.handle(e),j.connect&&j.connect.handle(e)}},login:{handle(e){m.handle(e),j.login&&j.login.handle(e)},error:m.error},relogin:{handle(e){m.handle(e),j.relogin&&j.relogin.handle(e)},error:m.error},inGame:{handle(e){t.handle(e),j.inGame&&j.inGame.handle(e)},error:t.error},toGame:{handle(e){j.toGame&&j.toGame.handle(e)},error:b.error},exitGame:{handle(e){x.handle(e),j.exitGame&&j.exitGame.handle(e)},error:x.error},broadcast:{handle(e){G.handle(e),j.broadcast&&j.broadcast.handle(e)}},ping:{handle(){},error:a.low},pong:{handle(n){d.ping?(l.ping=n,d.msg="ping:"+n,e.redraw()):d.msg=""},error:a.low},reconnect:{handle(e){u.handle(e),j.reconnect&&j.reconnect.handle(e)},error:a.low},disconnectMsg:{handle(n){d.ping&&(d.msg="disconnect:"+(new Date).toTimeString(),e.redraw()),w.handle(n),j.disconnectMsg&&j.disconnectMsg.handle(n)}},disconnect:{handle(e){i.handle(e),j.disconnect&&j.disconnect.handle(e)}}}),M}function v(){return C}export{k as getCommandList,v as getSendEvent,T as isFirst,L as setEvent};
