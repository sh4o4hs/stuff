import{m as e,r as n,a as o,u as r,s as a,e as t}from"./agent.d38c4a69.js";import{g as c,l as i,b as l,k as d,C as s,m as g}from"./agent.2710fc78.js";import{C as m,a as h}from"./agent.3e10fffd.js";import"./agent.87cf6255.js";let G=!0,p={handle(){if(!G)return;G=!1;let d=t;d.state="已連線",e.redraw(),c(),n.serviceBegin(m.report);let s=i(),g=o.info;s.login(g),r.setTimeout((function(){d.isError||d.isLogin||l({title:"errorLow",msg:"disconnect"})}),a.commandTimeout)}},u={handle(){}},w={handle(e){}},f={handle(){},error:d.low},b={handle(e){},error:d.low},x={},M=null,j=!0,T={game(){j&&(j=!1)}};function C(e){x.connect=e.connect||x.connect,x.disconnect=e.disconnect||x.disconnect,x.disconnectMsg=e.disconnectMsg||x.disconnectMsg,x.reconnect=e.reconnect||x.reconnect,x.broadcast=e.broadcast||x.broadcast,x.login=e.login||x.login,x.relogin=e.relogin||x.relogin,x.inGame=e.inGame||x.inGame,x.toGame=e.toGame||x.toGame,x.exitGame=e.exitGame||x.exitGame}function L(){return M||(M={connect:{handle(e){p.handle(e),x.connect&&x.connect.handle(e)}},login:{handle(e){m.handle(e),x.login&&x.login.handle(e)},error:m.error},relogin:{handle(e){m.handle(e),x.relogin&&x.relogin.handle(e)},error:m.error},inGame:{handle(e){s.handle(e),x.inGame&&x.inGame.handle(e)},error:s.error},toGame:{handle(e){x.toGame&&x.toGame.handle(e)},error:f.error},exitGame:{handle(e){b.handle(e),x.exitGame&&x.exitGame.handle(e)},error:b.error},broadcast:{handle(e){h.handle(e),x.broadcast&&x.broadcast.handle(e)}},ping:{handle(){},error:d.low},pong:{handle(n){a.ping?(o.ping=n,a.msg="ping:"+n,e.redraw()):a.msg=""},error:d.low},reconnect:{handle(e){u.handle(e),x.reconnect&&x.reconnect.handle(e)},error:d.low},disconnectMsg:{handle(n){a.ping&&(a.msg="disconnect:"+(new Date).toTimeString(),e.redraw()),w.handle(n),x.disconnectMsg&&x.disconnectMsg.handle(n)}},disconnect:{handle(e){g.handle(e),x.disconnect&&x.disconnect.handle(e)}}}),M}function k(){return T}export{L as getCommandList,k as getSendEvent,j as isFirst,C as setEvent};
