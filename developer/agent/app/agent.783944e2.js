import{d as e,a as t}from"./agent.33a941c4.js";import o from"tweenjs";import*as r from"foot";import"mithril";import"localforage";import"nuts";let i="filename",a="blob",l={"video/photos":1,"video/domains":1,"video/player":1,"video/player2":1,"scenes/loading":1,"lib/264":1,"lib/player":1};async function n(e,o){let r=globalThis.BASE_URL,n=null,s=null,m=null;if(!t.versionTimestamp){let e=new Date;t.versionTimestamp=e.getTime()}let c=t.versionTimestamp;if(o&&(o.mode&&(n=o.mode),o.version&&(s=o.version)),l[e])try{m=import.meta.resolve(e)}catch(e){}let p=`${t.projectURL}${e}`;if(r&&r.length>0&&("/"===r[r.length-1]&&(r=r.substring(0,r.length-1)),p=p.replace(t.projectURL,"/"),p=`${r}${p}`),!m){let e=null;if(e=s?await fetch(`${p}/v${s}.json`):await fetch(`${p}/index.json?v=${c}`),e&&e.ok){let t=await e.json();m=t.isDebug?t.app:`${p}/${t.app.replace("./","")}`}}if(m){if(n){if(n===i)return{root:r,filename:m,pathname:p};if(n===a){let e=await fetch(m,{credentials:"omit"});if(e&&e.ok){let t=await e.text(),o=new Blob([t]);return{root:r,blob:o,blobURL:globalThis.URL.createObjectURL(o),pathname:p}}return Promise.reject(new Error("getProject error"))}}return{root:r,lib:await import(m),pathname:p}}return Promise.reject(new Error("getProject error"))}async function s(){e.Howl=r.Howl,e.Howler=r.Howler,e.IsMobile=r.IsMobile,e.Mustache=r.Mustache,e.decode=r.decode,e.createjs=o}export{n as getProject,s as load};
